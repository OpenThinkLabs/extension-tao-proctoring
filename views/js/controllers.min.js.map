{"version":3,"file":"taoProctoring/controller/routes.js","sources":["routes.js","../helper/status.js","../component/breadcrumbs.js","../templates/delivery/listBoxActions!tpl","../templates/delivery/listBoxStats!tpl","Delivery/index.js","Delivery/manage.js","tpl!taoProctoring/tpl/item-progress","tpl!taoProctoring/tpl/delivery-link","Delivery/monitoring.js","Delivery/testTakers.js","../../taoQtiTest/testRunner/resumingStrategy/keepAfterResume.js","../templates/deliveryServer/authorizationSuccess!tpl","DeliveryServer/awaiting.js","Diagnostic/index.js","../templates/reporting/datepicker!tpl","Reporting/index.js","TestCenter/index.js","TestCenter/testCenter.js"],"names":["define","TestCenter","actions","index","testCenter","Diagnostic","Reporting","Delivery","manage","monitoring","monitoringAll","testTakers","_","__","getStatus","statusName","_status","getStatusByCode","statusCode","find","code","verifyTestTaker","testTakerData","actionName","formatted","id","label","firstname","lastname","status","state","allowed","can","reason","init","authorize","pause","terminate","report","awaiting","authorized","inprogress","paused","completed","terminated","breadcrumbs","$container","crumbs","data","renderTo","replace","cls","hb","template","Handlebars","depth0","helpers","partials","this","compilerInfo","merge","stack1","helper","options","buffer","functionType","escapeExpression","helperMissing","call","hash","program1","periodStart","periodEnd","self","showProperties","inverse","noop","fn","program","locked","inProgress","$","moment","loadingBar","listBox","encode","feedback","bulkActionPopup","breadcrumbsFactory","actionsTpl","statsTpl","refreshPolling","cssScope","start","taoProctoringCtlr","format","boxes","each","box","props","properties","tplData","stats","awaitingApproval","toString","html","content","update","pollTo","clearTimeout","list","stop","setTimeout","refresh","setLoading","ajax","url","serviceUrl","cache","dataType","type","done","deliveryId","selection","map","testTaker","firstName","lastName","resourceType","allowedResources","categoriesDefinitions","categories","on","_url","delivery","testCenterId","execution","pluck","error","response","success","warning","encodeHtml","title","textEmpty","textNumber","textLoading","width","e","pauseUrl","stopPropagation","preventDefault","get","res","isPlainObject","isArray","inProgressExecs","filter","length","info","dialog","proctorDeliveryIndexCtlr","$list","dataset","assignUrl","removeUrl","monitoringUrl","request","message","testtaker","datatable","remove","empty","available","loading","tools","icon","action","location","href","massAction","autoRender","autoDestroy","onOkBtn","selectable","model","position","program2","program5","total","program3","program7","program8","time","program10","display","program11","elapsedStr","program12","totalStr","program14","section","item","itemProgressTpl","deliveryLinkTpl","_timerFormat","Math","floor","authorise","execBulkAction","authoriseUrl","terminateUrl","reportUrl","getExecutionData","uri","actionTitle","cb","allowedTestTakers","forbiddenTestTakers","_selection","askForReason","checkedTestTaker","push","config","assign","$content","deniedResources","isFunction","actionButtons","manageUrl","serviceAllUrl","hidden","transform","value","row","elapsed","newDataset","children","$btn","hide","uniq","forIn","show","proctorDeliveryAssignCtlr","managerUrl","event","sessionStateFactory","_start","_interval","TypeError","setInterval","setLocalStorageData","getLocalStorageData","_accuracy","_stop","clearInterval","_reset","clearLocalStorage","_init","accuracy","val","window","localStorage","setItem","_storageKey","getItem","result","JSON","parse","removeItem","sessionState","reset","restart","getDuration","dialogAlert","polling","keepAfterResume","authSuccessTpl","awaitingAuthorizationCtlr","removeClass","exit","returnUrl","isAuthorizedUrl","deliveryExecution","runDeliveryUrl","deliveryLabel","text","deliveryInit","async","reject","resolve","interval","autoStart","taoProctoringDiagnosticCtlr","notYet","buttons","bandwidth","end","datepickerTpl","dateRangePicker","date","params","$panel","append","$periodStart","$periodEnd","datepicker","dateFormat","autoSize","change","taoProctoringReportCtlr","today","taoProctoringIndexCtlr","taoProctoringTestSiteCtlr"],"mappings":"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ACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC3IA,AD4IA;AC3IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACtCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACrBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC7CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACvOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC/LA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC1IA,AD2IA;AC1IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACxBA,ADyBA;ACxBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACrgBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC5JA,AD6JA;AC5JA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACvGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACjBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACvIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACxMA,ADyMA;ACxMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACzBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACpOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACjHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sourcesContent":["define('taoProctoring/controller/routes',{\n    'TestCenter' : {\n        'actions' : {\n            'index' : 'controller/TestCenter/index',\n            'testCenter' : 'controller/TestCenter/testCenter'\n        }\n    },\n    'Diagnostic' : {\n        'actions' : {\n            'index' : 'controller/Diagnostic/index'\n        }\n    },\n    'Reporting' : {\n        'actions' : {\n            'index' : 'controller/Reporting/index'\n        }\n    },\n    'Delivery' : {\n        'actions' : {\n            'index' : 'controller/Delivery/index',\n            'manage' : 'controller/Delivery/manage',\n            'monitoring' : 'controller/Delivery/monitoring',\n            'monitoringAll' : 'controller/Delivery/monitoring',\n            'testTakers' : 'controller/Delivery/testTakers'\n        }\n    }\n});\n\n","/*\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2015 (original work) Open Assessment Technologies SA ;\n *\n */\ndefine('taoProctoring/helper/status',['lodash', 'i18n'], function(_, __){\n    'use strict';\n    var _status = {\n        init : {\n            code : 'INIT',\n            label : __('Init'),\n            can : {\n                authorize : __('not awaiting'),\n                pause : __('not in progress'),\n                terminate : true,\n                report : true\n            }\n        },\n        awaiting : {\n            code : 'AWAITING',\n            label : __('Awaiting'),\n            can : {\n                authorize : true,\n                pause : __('not in progress'),\n                terminate : true,\n                report : true\n            }\n        },\n        authorized : {\n            code : 'AUTHORIZED',\n            label : __('Authorized but not started'),\n            can : {\n                authorize : __('already authorized'),\n                pause : __('not started'), //not in progress\n                terminate : true,\n                report : true\n            }\n        },\n        inprogress : {\n            code : 'INPROGRESS',\n            label : __('In Progress'),\n            can : {\n                authorize : __('already authorized'),\n                pause : true,\n                terminate : true,\n                report : true\n            }\n        },\n        paused : {\n            code : 'PAUSED',\n            label : __('Paused'),\n            can : {\n                authorize : __('is paused'),\n                pause : __('is already paused'),\n                terminate : true,\n                report : true\n            }\n        },\n        completed : {\n            code : 'COMPLETED',\n            label : __('Completed'),\n            can : {\n                authorize : __('is completed'),\n                pause : __('is completed'),\n                terminate : __('is completed'),\n                report : __('is completed')\n            }\n        },\n        terminated : {\n            code : 'TERMINATED',\n            label : __('Terminated'),\n            can : {\n                authorize : __('is terminated'),\n                pause : __('is terminated'),\n                terminate : __('is terminated'),\n                report : __('is terminated')\n            }\n        }\n    };\n\n    /**\n     * Get the status model from its name\n     * @param {string} statusName\n     * @returns {object}\n     */\n    function getStatus(statusName){\n        return _status[statusName];\n    }\n\n    /**\n     * Get the status model from its code\n     * @param {string} statusName\n     * @returns {object}\n     */\n    function getStatusByCode(statusCode){\n        return _.find(_status, {code : statusCode});\n    }\n\n    /**\n     * Verify and reformat test taker data for the execBulkAction's need\n     * @param {Object} testTakerData\n     * @param {String} actionName\n     * @returns {Object}\n     */\n    function verifyTestTaker(testTakerData, actionName){\n        var formatted = {\n            id : testTakerData.id,\n            label : testTakerData.firstname + ' ' + testTakerData.lastname\n        };\n        var status = _status.getStatusByCode(testTakerData.state.status);\n        if(status){\n            formatted.allowed = (status.can[actionName] === true);\n            if(!formatted.allowed){\n                formatted.reason = status.can[actionName];\n            }\n        }\n        return formatted;\n    }\n\n    return {\n        getStatus : getStatus,\n        getStatusByCode : getStatusByCode,\n        verifyTestTaker : verifyTestTaker\n    };\n});\n\n\n","/*\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2015 (original work) Open Assessment Technologies SA ;\n *\n */\ndefine('taoProctoring/component/breadcrumbs',['ui/breadcrumbs'], function(breadcrumbs){\n    \n    /**\n     * Wrap the generic breadcrumbs component into a very specialized\n     * \n     * @param {JQyery} $container\n     * @param {Array} [crumbs]\n     * @returns {unresolved}\n     */\n    return function breadcrumbFactory($container, crumbs){\n        return breadcrumbs({\n            breadcrumbs : crumbs || $container.data('breadcrumbs'),\n            renderTo: $container.find('.header'),\n            replace: true,\n            cls : 'action-bar horizontal-action-bar'\n        });\n    };\n});\n\n\n","\ndefine('tpl!taoProctoring/templates/delivery/listBoxActions', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, functionType=\"function\", escapeExpression=this.escapeExpression, helperMissing=helpers.helperMissing;\n\n\n  buffer += \"<span class=\\\"listbox-actions\\\">\\n    <span class=\\\"action pause\\\" data-delivery=\\\"\";\n  if (helper = helpers.id) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.id); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\">\\n        <span class=\\\"icon-pause\\\"></span>\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Pause\", options) : helperMissing.call(depth0, \"__\", \"Pause\", options)))\n    + \"\\n    </span>\\n    <span class=\\\"action play\\\">\\n        <span class=\\\"icon-play\\\"></span>\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Monitor\", options) : helperMissing.call(depth0, \"__\", \"Monitor\", options)))\n    + \"\\n    </span>\\n</span>\";\n  return buffer;\n  });\n});\n\n","\ndefine('tpl!taoProctoring/templates/delivery/listBoxStats', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, helperMissing=helpers.helperMissing, escapeExpression=this.escapeExpression, functionType=\"function\", self=this;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", stack1, helper, options;\n  buffer += \"\\n<ul class=\\\"plain listbox-properties\\\">\\n    <li>\\n        <label>\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Start\", options) : helperMissing.call(depth0, \"__\", \"Start\", options)))\n    + \"</label>: \";\n  if (helper = helpers.periodStart) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.periodStart); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\n    </li>\\n    <li>\\n        <label>\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"End\", options) : helperMissing.call(depth0, \"__\", \"End\", options)))\n    + \"</label>: \";\n  if (helper = helpers.periodEnd) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.periodEnd); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\n    </li>\\n</ul>\\n\";\n  return buffer;\n  }\n\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.showProperties), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n<p class=\\\"listbox-stats\\\">\\n    <span class=\\\"icon-lock\\\"></span><span class=\\\"number\\\">\";\n  if (helper = helpers.locked) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.locked); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"</span>\\n    <span class=\\\"icon-play\\\"></span><span class=\\\"number\\\">\";\n  if (helper = helpers.inProgress) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.inProgress); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"</span>\\n    <span class=\\\"icon-pause\\\"></span><span class=\\\"number\\\">\";\n  if (helper = helpers.paused) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.paused); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"</span>\\n</p>\";\n  return buffer;\n  });\n});\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2015 (original work) Open Assessment Technologies SA ;\n */\n/**\n * @author Jean-Sébastien Conan <jean-sebastien.conan@vesperiagroup.com>\n */\ndefine('taoProctoring/controller/Delivery/index',[\n    'lodash',\n    'jquery',\n    'i18n',\n    'helpers',\n    'moment',\n    'layout/loading-bar',\n    'ui/listbox',\n    'util/encode',\n    'ui/feedback',\n    'ui/bulkActionPopup',\n    'taoProctoring/helper/status',\n    'taoProctoring/component/breadcrumbs',\n    'tpl!taoProctoring/templates/delivery/listBoxActions',\n    'tpl!taoProctoring/templates/delivery/listBoxStats'\n], function (_, $, __, helpers, moment, loadingBar, listBox, encode, feedback, bulkActionPopup, _status, breadcrumbsFactory, actionsTpl, statsTpl) {\n    'use strict';\n\n    /**\n     * The polling delay used to refresh the list\n     * @type {Number}\n     */\n    var refreshPolling = 60 * 1000; // once per minute\n\n    /**\n     * The CSS scope\n     * @type {String}\n     */\n    var cssScope = '.delivery-index';\n\n    // the page is always loading data when starting\n    loadingBar.start();\n\n    /**\n     * Controls the ProctorDelivery index page\n     *\n     * @type {Object}\n     */\n    var taoProctoringCtlr = {\n        /**\n         * Entry point of the page\n         */\n        start : function start() {\n            var $container = $(cssScope);\n            var boxes = $container.data('list');\n            var crumbs = $container.data('breadcrumbs');\n            var categories = $container.data('categories');\n            var testCenterId = $container.data('testcenter');\n            var list = listBox({\n                title: __(\"Sessions\"),\n                textEmpty: __(\"No sessions available\"),\n                textNumber: __(\"Available\"),\n                textLoading: __(\"Loading\"),\n                renderTo: $container.find('.content'),\n                replace: true,\n                list: format(boxes),\n                width:12\n            });\n            var bc = breadcrumbsFactory($container, crumbs);\n            var serviceUrl = helpers._url('deliveries', 'Delivery', 'taoProctoring', {testCenter : testCenterId});\n            var pollTo = null;\n            \n            function format(boxes){\n                \n                _.each(boxes, function(box){\n\n                    var props = box.properties;\n                    var tplData = {\n                        locked : box.stats.awaitingApproval,\n                        inProgress : box.stats.inProgress,\n                        paused : box.stats.paused\n                    };\n\n                    if(props && props.periodStart && props.periodEnd){\n                        tplData.showProperties = true;\n                        tplData.periodStart = moment(props.periodStart).toString();\n                        tplData.periodEnd = moment(props.periodEnd).toString();\n\n                        //add a special class for boxes that have more information to display\n                        box.cls = 'has-properties-displayed';\n                    }\n                    box.html = actionsTpl({\n                        id : box.id\n                    });\n                    box.content = statsTpl(tplData);\n                });\n\n                return boxes;\n            }\n\n            // update the index from a JSON array\n            function update(boxes) {\n                \n                if (pollTo) {\n                    clearTimeout(pollTo);\n                    pollTo = null;\n                }\n\n                list.update(format(boxes));\n                loadingBar.stop();\n\n                // poll the server at regular interval to refresh the index\n                if (refreshPolling) {\n                    pollTo = setTimeout(refresh, refreshPolling);\n                }\n            };\n\n            // refresh the index\n            function refresh() {\n                loadingBar.start();\n                list.setLoading(true);\n\n                $.ajax({\n                    url: serviceUrl,\n                    cache: false,\n                    dataType : 'json',\n                    type: 'GET'\n                }).done(function(boxes) {\n                    update(boxes);\n                });\n            };\n            \n            /**\n             * Exec \n             * @param {String} actionName\n             * @param {String} actionTitle\n             * @param {Array} selection\n             * @param {Function} cb\n             * @returns {undefined}\n             */\n            function pause(deliveryId, selection){\n                \n                var allowed  = _.map(selection, function(data){\n                    return {\n                        id : data.id,\n                        label : data.testTaker.firstName + ' ' + data.testTaker.lastName\n                    };\n                });\n                \n                bulkActionPopup({\n                    renderTo : $container,\n                    actionName : __('Pause Session'),\n                    reason : true,\n                    resourceType : 'test taker',\n                    allowedResources : allowed,\n                    categoriesDefinitions : categories.pause.categoriesDefinitions,\n                    categories : categories.pause.categories\n                }).on('ok', function(reason){\n                    //execute callback\n                    $.ajax({\n                        url: helpers._url('pauseExecutions', 'Delivery', 'taoProctoring'),\n                        data: {\n                            delivery : deliveryId,\n                            testCenter : testCenterId,\n                            execution: _.pluck(selection, 'id'),\n                            reason: reason\n                        },\n                        dataType : 'json',\n                        type: 'POST',\n                        error: function() {\n                            loadingBar.stop();\n                        }\n                    }).done(function(response) {\n                        loadingBar.stop();\n                        if (response && response.success) {\n                            feedback().success('Selected deliveries successfully paused');\n                            refresh();\n                        } else {\n                            feedback().warning(__('Something went wrong ...') + '<br>' + encode.html(response.error), {encodeHtml: false});\n                        }\n                    });\n                });\n            }\n            \n            $container.on('click', '.pause', function(e){\n                \n                var deliveryId = $(this).data('delivery');\n                var pauseUrl = (deliveryId === 'all') ? \n                    helpers._url('allDeliveriesExecutions', 'Delivery', 'taoProctoring', {testCenter : testCenterId}) :\n                    helpers._url('deliveryExecutions', 'Delivery', 'taoProctoring', {delivery : deliveryId, testCenter : testCenterId});\n                \n                //prevent clicking the parent link that goes to the monitoring screen\n                e.stopPropagation();\n                e.preventDefault();\n                \n                //get list of all test taker for the selected delivery\n                $.get(pauseUrl, function(res){\n                    if(_.isPlainObject(res) && _.isArray(res.data)){\n                        var inProgressExecs = _.filter(res.data, function(data){\n                            return (data.state && data.state.status === _status.getStatus('inprogress').code);\n                        });\n                        if(inProgressExecs.length){\n                            pause(deliveryId, inProgressExecs);\n                        }else{\n                            feedback().info(__('There is no delivery in progress'));\n                        }\n                    }\n                });\n            });\n            \n            if (!boxes) {\n                refresh();\n            } else {\n                loadingBar.stop();\n            }\n        }\n    };\n\n    return taoProctoringCtlr;\n});\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2015 (original work) Open Assessment Technologies SA ;\n */\n/**\n * @author Jean-Sébastien Conan <jean-sebastien.conan@vesperiagroup.com>\n */\ndefine('taoProctoring/controller/Delivery/manage',[\n    'jquery',\n    'i18n',\n    'helpers',\n    'layout/loading-bar',\n    'util/encode',\n    'ui/feedback',\n    'ui/dialog',\n    'taoProctoring/component/breadcrumbs',\n    'ui/datatable'\n], function ($, __, helpers, loadingBar, encode, feedback, dialog, breadcrumbsFactory) {\n    'use strict';\n\n    /**\n     * The CSS scope\n     * @type {String}\n     */\n    var cssScope = '.delivery-manager';\n\n    // the page is always loading data when starting\n    loadingBar.start();\n\n    /**\n     * Controls the taoProctoring delivery page\n     *\n     * @type {Object}\n     */\n    var proctorDeliveryIndexCtlr = {\n        /**\n         * Entry point of the page\n         */\n        start : function start() {\n            var $container = $(cssScope);\n            var $list = $container.find('.list');\n            var crumbs = $container.data('breadcrumbs');\n            var dataset = $container.data('set');\n            var deliveryId = $container.data('delivery');\n            var testCenterId = $container.data('testcenter');\n            var assignUrl = helpers._url('testTakers', 'Delivery', 'taoProctoring', {delivery : deliveryId, testCenter : testCenterId});\n            var removeUrl = helpers._url('removeTestTakers', 'Delivery', 'taoProctoring', {delivery : deliveryId, testCenter : testCenterId});\n            var serviceUrl = helpers._url('deliveryTestTakers', 'Delivery', 'taoProctoring', {delivery : deliveryId, testCenter : testCenterId});\n            var monitoringUrl = helpers._url('monitoring', 'Delivery', 'taoProctoring', {delivery : deliveryId, testCenter: testCenterId});\n\n            var bc = breadcrumbsFactory($container, crumbs);\n\n            // request the server with a selection of test takers\n            var request = function(url, selection, message) {\n                if (selection && selection.length) {\n                    loadingBar.start();\n\n                    $.ajax({\n                        url: url,\n                        data: {\n                            testtaker: selection\n                        },\n                        dataType : 'json',\n                        type: 'POST',\n                        error: function() {\n                            loadingBar.stop();\n                        }\n                    }).done(function(response) {\n                        loadingBar.stop();\n\n                        if (response && response.success) {\n                            if (message) {\n                                feedback().success(message);\n                            }\n                            $list.datatable('refresh');\n                        } else {\n                            feedback().error(__('Something went wrong ...') + '<br>' + encode.html(response.error), {encodeHtml: false});\n                        }\n                    });\n                }\n            };\n\n            // request the server to remove the selected test takers\n            var remove = function(selection) {\n                request(removeUrl, selection, __('Test takers have been removed'));\n            };\n\n            $list\n                .on('query.datatable', function() {\n                    loadingBar.start();\n                })\n                .on('load.datatable', function() {\n                    loadingBar.stop();\n                })\n                .datatable({\n                    url: serviceUrl,\n                    status: {\n                        empty: __('No assigned test takers'),\n                        available: __('Assigned test takers'),\n                        loading: __('Loading')\n                    },\n                    tools: [{\n                        id: 'refresh',\n                        icon: 'reset',\n                        title: __('Refresh the page'),\n                        label: __('Refresh'),\n                        action: function() {\n                            $list.datatable('refresh');\n                        }\n                    }, {\n                        id: 'back',\n                        icon: 'preview',\n                        title: __('Return to the session monitoring'),\n                        label: __('Monitoring'),\n                        action: function() {\n                            location.href = monitoringUrl;\n                        }\n                    }, {\n                        id: 'assign',\n                        icon: 'add',\n                        title: __('Assign more test takers to this session'),\n                        label: __('Add test takers'),\n                        action: function() {\n                            location.href = assignUrl;\n                        }\n                    }, {\n                        id: 'remove',\n                        icon: 'remove',\n                        title: __('Remove the selected test takers from the session'),\n                        label: __('Remove'),\n                        massAction: true,\n                        action: function(selection) {\n                            dialog({\n                                message: __('The test takers will be removed from this session. Continue ?'),\n                                autoRender: true,\n                                autoDestroy: true,\n                                onOkBtn: function() {\n                                    remove(selection);\n                                }\n                            });\n                        }\n                    }],\n                    actions: [{\n                        id: 'remove',\n                        icon: 'remove',\n                        title: __('Remove the test taker from the session'),\n                        action: function(id) {\n                            dialog({\n                                autoRender: true,\n                                autoDestroy: true,\n                                message: __('The test taker will be removed from this session. Continue ?'),\n                                onOkBtn: function() {\n                                    remove([id]);\n                                }\n                            });\n                        }\n                    }],\n                    selectable: true,\n                    model: [{\n                        id: 'firstname',\n                        label: __('First name')\n                    }, {\n                        id: 'lastname',\n                        label: __('Last name')\n                    }, {\n                        id: 'identifier',\n                        label: __('Identifier')\n                    }, {\n                        id: 'status',\n                        label: __('Status')\n                    }]\n                }, dataset);\n        }\n    };\n\n    return proctorDeliveryIndexCtlr;\n});\n\n","\ndefine('tpl!taoProctoring/tpl/item-progress', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, functionType=\"function\", escapeExpression=this.escapeExpression, helperMissing=helpers.helperMissing, self=this;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"\\n    \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.position), {hash:{},inverse:self.noop,fn:self.program(2, program2, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.label), {hash:{},inverse:self.noop,fn:self.program(5, program5, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n\";\n  return buffer;\n  }\nfunction program2(depth0,data) {\n  \n  var buffer = \"\", stack1, helper, options;\n  buffer += \"<span class=\\\"state section-progress\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"section\", options) : helperMissing.call(depth0, \"__\", \"section\", options)))\n    + \" \";\n  if (helper = helpers.position) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.position); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1);\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.total), {hash:{},inverse:self.noop,fn:self.program(3, program3, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"</span>\";\n  return buffer;\n  }\nfunction program3(depth0,data) {\n  \n  var buffer = \"\", stack1, helper;\n  buffer += \"/\";\n  if (helper = helpers.total) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.total); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1);\n  return buffer;\n  }\n\nfunction program5(depth0,data) {\n  \n  var buffer = \"\", stack1, helper;\n  buffer += \"<span class=\\\"state section-label\\\">\";\n  if (helper = helpers.label) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.label); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"</span>\";\n  return buffer;\n  }\n\nfunction program7(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"\\n    \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.position), {hash:{},inverse:self.noop,fn:self.program(8, program8, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    \";\n  stack1 = helpers['with'].call(depth0, (depth0 && depth0.time), {hash:{},inverse:self.noop,fn:self.program(10, program10, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n\";\n  return buffer;\n  }\nfunction program8(depth0,data) {\n  \n  var buffer = \"\", stack1, helper, options;\n  buffer += \"<span class=\\\"state item-progress\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"item\", options) : helperMissing.call(depth0, \"__\", \"item\", options)))\n    + \" \";\n  if (helper = helpers.position) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.position); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1);\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.total), {hash:{},inverse:self.noop,fn:self.program(3, program3, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"</span>\";\n  return buffer;\n  }\n\nfunction program10(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"\\n        \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.display), {hash:{},inverse:self.noop,fn:self.program(11, program11, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    \";\n  return buffer;\n  }\nfunction program11(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"\\n    <span class=\\\"item-time\\\">\\n        <span class=\\\"icon icon-time\\\"></span>\\n            \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.elapsedStr), {hash:{},inverse:self.noop,fn:self.program(12, program12, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n            \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.totalStr), {hash:{},inverse:self.noop,fn:self.program(14, program14, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    </span>\\n        \";\n  return buffer;\n  }\nfunction program12(depth0,data) {\n  \n  var buffer = \"\", stack1, helper, options;\n  buffer += \"<span class=\\\"elapsed\\\" title=\\\"\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Elapsed time\", options) : helperMissing.call(depth0, \"__\", \"Elapsed time\", options)))\n    + \"\\\">\";\n  if (helper = helpers.elapsedStr) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.elapsedStr); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"</span>\";\n  return buffer;\n  }\n\nfunction program14(depth0,data) {\n  \n  var buffer = \"\", stack1, helper, options;\n  buffer += \"<span class=\\\"total\\\" title=\\\"\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Total time\", options) : helperMissing.call(depth0, \"__\", \"Total time\", options)))\n    + \"\\\">\";\n  if (helper = helpers.totalStr) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.totalStr); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"</span>\";\n  return buffer;\n  }\n\n  buffer += \"<span class=\\\"progress\\\">\\n\";\n  stack1 = helpers['with'].call(depth0, (depth0 && depth0.section), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n\";\n  stack1 = helpers['with'].call(depth0, (depth0 && depth0.item), {hash:{},inverse:self.noop,fn:self.program(7, program7, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n</span>\";\n  return buffer;\n  });\n});\n\n","\ndefine('tpl!taoProctoring/tpl/delivery-link', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression;\n\n\n  buffer += \"<a class=\\\"elipsis\\\" href=\\\"\";\n  if (helper = helpers.url) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.url); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" title=\\\"\";\n  if (helper = helpers.label) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.label); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\">\";\n  if (helper = helpers.label) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.label); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"</a>\";\n  return buffer;\n  });\n});\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2015 (original work) Open Assessment Technologies SA ;\n */\n/**\n * @author Jean-Sébastien Conan <jean-sebastien.conan@vesperiagroup.com>\n */\ndefine('taoProctoring/controller/Delivery/monitoring',[\n    'jquery',\n    'lodash',\n    'i18n',\n    'helpers',\n    'moment',\n    'layout/loading-bar',\n    'util/encode',\n    'ui/feedback',\n    'ui/dialog',\n    'ui/bulkActionPopup',\n    'taoProctoring/component/breadcrumbs',\n    'taoProctoring/helper/status',\n    'tpl!taoProctoring/tpl/item-progress',\n    'tpl!taoProctoring/tpl/delivery-link',\n    'ui/datatable'\n], function (\n    $,\n    _,\n    __,\n    helpers,\n    moment,\n    loadingBar,\n    encode,\n    feedback,\n    dialog,\n    bulkActionPopup,\n    breadcrumbsFactory,\n    _status,\n    itemProgressTpl,\n    deliveryLinkTpl\n) {\n    'use strict';\n\n    /**\n     * The CSS scope\n     * @type {String}\n     */\n    var cssScope = '.delivery-monitoring';\n\n    // the page is always loading data when starting\n    loadingBar.start();\n\n    /**\n     * Formats a time value to string\n     * @param {Number} time\n     * @returns {String}\n     * @private\n     */\n    var _timerFormat = function(time) {\n        return __('%d min', Math.floor(time / 60));\n    };\n\n    var notYet = function() {\n        dialog({\n            message: __('Not yet implemented!'),\n            autoRender: true,\n            autoDestroy: true,\n            buttons: 'ok'\n        });\n    };\n    \n    /**\n     * Controls the taoProctoring delivery page\n     *\n     * @type {Object}\n     */\n    var proctorDeliveryIndexCtlr = {\n        /**\n         * Entry point of the page\n         */\n        start : function start() {\n            var $container = $(cssScope);\n            var $content = $container.find('.content');\n            var $list = $container.find('.list');\n            var crumbs = $container.data('breadcrumbs');\n            var dataset = $container.data('set');\n            var categories = $container.data('categories');\n            var deliveryId = $container.data('delivery');\n            var testCenterId = $container.data('testcenter');\n            var manageUrl = helpers._url('manage', 'Delivery', 'taoProctoring', {delivery : deliveryId, testCenter : testCenterId});\n            var terminateUrl = helpers._url('terminateExecutions', 'Delivery', 'taoProctoring', {delivery : deliveryId, testCenter : testCenterId});\n            var pauseUrl = helpers._url('pauseExecutions', 'Delivery', 'taoProctoring', {delivery : deliveryId, testCenter : testCenterId});\n            var authoriseUrl = helpers._url('authoriseExecutions', 'Delivery', 'taoProctoring', {delivery : deliveryId, testCenter : testCenterId});\n            var reportUrl = helpers._url('reportExecutions', 'Delivery', 'taoProctoring', {delivery : deliveryId, testCenter : testCenterId});\n            var serviceUrl = helpers._url('deliveryExecutions', 'Delivery', 'taoProctoring', {delivery : deliveryId, testCenter : testCenterId});\n            var serviceAllUrl = helpers._url('allDeliveriesExecutions', 'Delivery', 'taoProctoring', {testCenter : testCenterId});\n            var tools = [];\n            var actions = [];\n            var model = [];\n            var actionButtons;\n            var bc = breadcrumbsFactory($container, crumbs);\n\n            // request the server with a selection of test takers\n            function request(url, selection, reason, message) {\n                if (selection && selection.length) {\n                    loadingBar.start();\n\n                    $.ajax({\n                        url: url,\n                        data: {\n                            execution: selection,\n                            reason: reason\n                        },\n                        dataType : 'json',\n                        type: 'POST',\n                        error: function() {\n                            loadingBar.stop();\n                        }\n                    }).done(function(response) {\n                        loadingBar.stop();\n\n                        if (response && response.success) {\n                            if (message) {\n                                feedback().success(message);\n                            }\n                            $list.datatable('refresh');\n                        } else {\n                            feedback().error(__('Something went wrong ...') + '<br>' + encode.html(response.error), {encodeHtml: false});\n                        }\n                    });\n                }\n            }\n\n            // request the server to authorise the selected delivery executions\n            function authorise(selection) {\n                execBulkAction('authorize', __('Authorize Session'), selection, function(selection, reason){\n                    request(authoriseUrl, selection, reason, __('Sessions authorized'));\n                });\n            }\n\n            // request the server to pause the selected delivery executions\n            function pause(selection) {\n                execBulkAction('pause', __('Pause Session'), selection, function(selection, reason){\n                    request(pauseUrl, selection, reason, __('Sessions paused'));\n                });\n            }\n\n            // request the server to terminate the selected delivery executions\n            function terminate(selection) {\n                execBulkAction('terminate', __('Terminate Session'), selection, function(selection, reason){\n                    request(terminateUrl, selection, reason, __('Sessions terminated'));\n                });\n            }\n            \n            // report irregularities on the selected delivery executions\n            function report(selection) {\n                execBulkAction( 'report', __('Report Irregularity'), selection, function(selection, reason){\n                    request(reportUrl, selection, reason, __('Sessions reported'));\n                });\n            }\n            \n            /**\n             * Verify and reformat test taker data for the execBulkAction's need\n             * @param {Object} testTakerData\n             * @param {String} actionName\n             * @returns {Object}\n             */\n            function verifyTestTaker(testTakerData, actionName){\n                var formatted = {\n                    id : testTakerData.id,\n                    label : testTakerData.firstname+' '+testTakerData.lastname\n                };\n                var status = _status.getStatusByCode(testTakerData.state.status);\n                if(status){\n                    formatted.allowed = (status.can[actionName] === true);\n                    if(!formatted.allowed){\n                        formatted.reason = status.can[actionName];\n                    }\n                }\n                return formatted;\n            }\n            \n            /**\n             * Find the execution row data from its uri\n             * \n             * @param {String} uri\n             * @returns {Object}\n             */\n            function getExecutionData(uri){\n                return _.find(dataset.data, {id : uri});\n            }\n            \n            /**\n             * Exec \n             * @param {String} actionName\n             * @param {String} actionTitle\n             * @param {Array|String} selection\n             * @param {Function} cb\n             * @returns {undefined}\n             */\n            function execBulkAction(actionName, actionTitle, selection, cb){\n\n                var allowedTestTakers = [];\n                var forbiddenTestTakers = [];\n                var _selection = _.isArray(selection) ? selection : [selection];\n                var askForReason = (categories[actionName] && categories[actionName].categoriesDefinitions && categories[actionName].categoriesDefinitions.length);\n                \n                _.each(_selection, function(uri){\n                    var testTaker = getExecutionData(uri);\n                    var checkedTestTaker;\n                    if(testTaker){\n                        checkedTestTaker = verifyTestTaker(testTaker, actionName);\n                        if(checkedTestTaker.allowed){\n                            allowedTestTakers.push(checkedTestTaker);\n                        }else{\n                            forbiddenTestTakers.push(checkedTestTaker);\n                        }\n                    }\n                });\n                var config = _.assign({\n                    renderTo : $content,\n                    actionName : actionTitle,\n                    reason : askForReason,\n                    resourceType : 'test taker',\n                    allowedResources : allowedTestTakers,\n                    deniedResources : forbiddenTestTakers\n                }, categories[actionName]);\n                \n                bulkActionPopup(config).on('ok', function(reason){\n                    //execute callback\n                    if(_.isFunction(cb)){\n                        cb(_selection, reason);\n                    }\n                });\n            }\n\n            // tool: page refresh\n            tools.push({\n                id: 'refresh',\n                icon: 'reset',\n                title: __('Refresh the page'),\n                label: __('Refresh'),\n                action: function() {\n                    $list.datatable('refresh');\n                }\n            });\n\n            // tool: manage test takers (only for unique delivery)\n            if (deliveryId) {\n                tools.push({\n                    id: 'manage',\n                    icon: 'property-advanced',\n                    title: __('Manage sessions'),\n                    label: __('Manage'),\n                    action: function() {\n                        location.href = manageUrl;\n                    }\n                });\n            }\n\n            // tool: authorise the executions\n            tools.push({\n                id: 'authorise',\n                icon: 'play',\n                title: __('Authorize sessions'),\n                label: __('Authorise'),\n                massAction: true,\n                action: authorise\n            });\n\n            // tool: pause the executions\n            tools.push({\n                id: 'pause',\n                icon: 'pause',\n                title: __('Pause sessions'),\n                label: __('Pause'),\n                massAction: true,\n                action: pause\n            });\n\n            // tool: terminate the executions\n            tools.push({\n                id: 'terminate',\n                icon: 'stop',\n                title: __('Terminate sessions'),\n                label: __('Terminate'),\n                massAction: true,\n                action: terminate\n            });\n\n            // tool: report irregularities\n            tools.push({\n                id: 'irregularity',\n                icon: 'delivery-small',\n                title: __('Report irregularities'),\n                label: __('Report'),\n                massAction: true,\n                action: report\n            });\n\n            // action: authorise the execution\n            actions.push({\n                id: 'authorise',\n                icon: 'play',\n                title: __('Authorize session'),\n                hidden: function() {\n                    var status;\n                    if(this.state && this.state.status){\n                        status = _status.getStatusByCode(this.state.status);\n                        return !status || status.can.authorize !== true;\n                    }\n                    return true;\n                },\n                action: authorise\n            });\n\n            // action: pause the execution\n            actions.push({\n                id: 'pause',\n                icon: 'pause',\n                title: __('Pause session'),\n                hidden: function() {\n                    var status;\n                    if(this.state && this.state.status){\n                        status = _status.getStatusByCode(this.state.status);\n                        return !status || status.can.pause !== true;\n                    }\n                    return true;\n                },\n                action: pause\n            });\n\n            // action: terminate the execution\n            actions.push({\n                id: 'terminate',\n                icon: 'stop',\n                title: __('Terminate session'),\n                hidden: function() {\n                    var status;\n                    if(this.state && this.state.status){\n                        status = _status.getStatusByCode(this.state.status);\n                        return !status || status.can.terminate !== true;\n                    }\n                    return true;\n                },\n                action: terminate\n            });\n\n            // action: report irregularities\n            actions.push({\n                id: 'irregularity',\n                icon: 'delivery-small',\n                title: __('Report irregularity'),\n                hidden: function() {\n                    var status;\n                    if(this.state && this.state.status){\n                        status = _status.getStatusByCode(this.state.status);\n                        return !status || status.can.report !== true;\n                    }\n                    return true;\n                },\n                action: report\n            });\n\n            // column: delivery (only for all deliveries view)\n            if (!deliveryId) {\n                model.push({\n                    id: 'delivery',\n                    label: __('Session'),\n                    transform: function(value, row) {\n                        var delivery = row && row.delivery;\n                        if (delivery) {\n                            delivery.url = helpers._url('monitoring', 'Delivery', 'taoProctoring', {delivery : delivery.uri, testCenter : testCenterId});\n                            value = deliveryLinkTpl(delivery);\n                        }\n                        return value;\n\n                    }\n                });\n            }\n\n            // column: test taker first name\n            model.push({\n                id: 'firstname',\n                label: __('First name'),\n                transform: function(value, row) {\n                    return row && row.testTaker && row.testTaker.firstName || '';\n\n                }\n            });\n\n            // column: test taker last name\n            model.push({\n                id: 'lastname',\n                label: __('Last name'),\n                transform: function(value, row) {\n                    return row && row.testTaker && row.testTaker.lastName || '';\n\n                }\n            });\n\n            // column: test taker identifier\n            model.push({\n                id: 'identifier',\n                label: __('Identifier'),\n                transform: function(value, row) {\n                    return row && row.testTaker && row.testTaker.id || '';\n                }\n            });\n\n            // column: start time\n            model.push({\n                id: 'date',\n                label: __('Started at'),\n                transform: function(value) {\n                    return moment(value).toString();\n                }\n            });\n\n            // column: delivery execution status\n            model.push({\n                id: 'status',\n                label: __('Status'),\n                transform: function(value, row) {\n                    if(row && row.state && row.state.status){\n                        var status = _status.getStatusByCode(row.state.status);\n                        if(status){\n                            return status.label;\n                        }\n                    }\n                    return '';\n                }\n            });\n\n            // column: delivery execution progress\n            model.push({\n                id: 'progress',\n                label: __('Progress'),\n                transform: function(value, row) {\n                    var state = row && row.state;\n                    var item = state && state.item;\n                    var time = item && item.time;\n                    if (time && time.elapsed) {\n                        time.elapsedStr = _timerFormat(time.elapsed);\n                        time.totalStr = _timerFormat(time.total);\n                        time.display = !!(time.elapsedStr || time.totalStr);\n                    }\n                    return itemProgressTpl(state);\n                }\n            });\n            \n            // renders the datatable\n            $list\n                .on('query.datatable', function() {\n                    loadingBar.start();\n                })\n                .on('load.datatable', function(e, newDataset) {\n                    //update dateset in memory\n                    dataset = newDataset;\n                    \n                    //udate the buttons, which have been reconstructed\n                    actionButtons = _({\n                        authorize : $list.find('.action-bar').children('.tool-authorise'),\n                        pause : $list.find('.action-bar').children('.tool-pause'),\n                        terminate : $list.find('.action-bar').children('.tool-terminate'),\n                        report : $list.find('.action-bar').children('.tool-irregularity')\n                    });\n                    \n                    loadingBar.stop();\n                })\n                .on('select.datatable', function(e, newDataset) {\n                    //hide all controls then display each required one individually\n                    actionButtons.each(function($btn){\n                        $btn.hide();\n                    });\n                    _($list.datatable('selection')).map(function(uri){\n                        var row = getExecutionData(uri);\n                        return row.state.status;\n                    }).uniq().each(function(statusCode){\n                        var status = _status.getStatusByCode(statusCode);\n                        actionButtons.forIn(function($btn, action){\n                            if(status && status.can[action] === true){\n                                $btn.show();\n                            }\n                        });\n                    });\n                })\n                .datatable({\n                    url: deliveryId ? serviceUrl : serviceAllUrl,\n                    status: {\n                        empty: __('No sessions'),\n                        available: __('Current sessions'),\n                        loading: __('Loading')\n                    },\n                    tools: tools,\n                    actions: actions,\n                    model: model,\n                    selectable: true\n                }, dataset);\n                \n        }\n    };\n\n    return proctorDeliveryIndexCtlr;\n});\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2015 (original work) Open Assessment Technologies SA ;\n */\n/**\n * @author Jean-Sébastien Conan <jean-sebastien.conan@vesperiagroup.com>\n */\ndefine('taoProctoring/controller/Delivery/testTakers',[\n    'jquery',\n    'i18n',\n    'helpers',\n    'layout/loading-bar',\n    'util/encode',\n    'ui/feedback',\n    'taoProctoring/component/breadcrumbs',\n    'ui/datatable'\n], function ($, __, helpers, loadingBar, encode, feedback, breadcrumbsFactory) {\n    'use strict';\n\n    /**\n     * The CSS scope\n     * @type {String}\n     */\n    var cssScope = '.delivery-testtakers';\n\n    // the page is always loading data when starting\n    loadingBar.start();\n\n    /**\n     * Controls the ProctorDelivery test takers assign page\n     *\n     * @type {Object}\n     */\n    var proctorDeliveryAssignCtlr = {\n        /**\n         * Entry point of the page\n         */\n        start : function start() {\n            var $container = $(cssScope);\n            var $list = $container.find('.list');\n            var crumbs = $container.data('breadcrumbs');\n            var dataset = $container.data('set');\n            var deliveryId = $container.data('delivery');\n            var testCenterId = $container.data('testcenter');\n            var serviceUrl = helpers._url('availableTestTakers', 'Delivery', 'taoProctoring', {delivery : deliveryId, testCenter: testCenterId});\n            var assignUrl = helpers._url('assignTestTakers', 'Delivery', 'taoProctoring', {delivery : deliveryId, testCenter: testCenterId});\n            var managerUrl = helpers._url('manage', 'Delivery', 'taoProctoring', {delivery : deliveryId, testCenter: testCenterId});\n\n            var bc = breadcrumbsFactory($container, crumbs);\n\n            // send the selection to the server and redirect to the index page\n            var assign = function(selection) {\n                if (selection && selection.length) {\n                    loadingBar.start();\n\n                    $.ajax({\n                        url: assignUrl,\n                        data: {\n                            testtaker: selection\n                        },\n                        dataType : 'json',\n                        type: 'POST',\n                        error: function() {\n                            loadingBar.stop();\n                        }\n                    }).done(function(response) {\n                        loadingBar.stop();\n\n                        if (response && response.success) {\n                            feedback().success(__('Test takers have been added'));\n                            location.href = managerUrl;\n                        } else {\n                            feedback().error(__('Something went wrong ...') + '<br>' + encode.html(response.error), {encodeHtml: false});\n                        }\n                    });\n                }\n            };\n\n            $list\n                .on('query.datatable', function() {\n                    loadingBar.start();\n                })\n                .on('load.datatable', function(event, response) {\n                    loadingBar.stop();\n                })\n                .datatable({\n                    url: serviceUrl,\n                    status: {\n                        empty: __('No available test takers to assign'),\n                        available: __('Available test takers'),\n                        loading: __('Loading')\n                    },\n                    tools: [{\n                        id: 'back',\n                        icon: 'left',\n                        title: __('Return to the session manager'),\n                        label: __('Back'),\n                        action: function() {\n                            location.href = managerUrl;\n                        }\n                    }, {\n                        id: 'refresh',\n                        icon: 'reset',\n                        title: __('Refresh the page'),\n                        label: __('Refresh'),\n                        action: function() {\n                            $list.datatable('refresh');\n                        }\n                    }, {\n                        id: 'assign',\n                        icon: 'add',\n                        title: __('Assign the selected test takers to the session'),\n                        label: __('Assign the selected test takers'),\n                        massAction: true,\n                        action: function(selection) {\n                            assign(selection);\n                        }\n                    }],\n                    actions: [{\n                        id: 'assign',\n                        icon: 'add',\n                        title: __('Assign the test taker to the session'),\n                        action: function(id) {\n                            assign([id]);\n                        }\n                    }],\n                    selectable: true,\n                    model: [{\n                        id: 'firstname',\n                        label: __('First name')\n                    }, {\n                        id: 'lastname',\n                        label: __('Last name')\n                    }, {\n                        id: 'identifier',\n                        label: __('Identifier')\n                    }]\n                }, dataset);\n        }\n    };\n\n    return proctorDeliveryAssignCtlr;\n});\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2015 (original work) Open Assessment Technologies SA;\n *\n * Keep duration of test-taker activity in localstorage\n */\n\ndefine('taoQtiTest/testRunner/resumingStrategy/keepAfterResume',[], function () {\n    'use strict';\n\n    /**\n     * @param {Object} options\n     * @param {string} options.accuracy - period of user status checking\n     */\n    var sessionStateFactory = function sessionStateFactory(options) {\n        var _storageKey = 'sessionState_active_for',\n            _accuracy,\n            _interval = null;\n\n        var sessionState = {\n\n            reset: function reset() {\n                _reset();\n            },\n\n            restart: function restart() {\n                _reset();\n                _start();\n            },\n\n            getDuration: function getDuration() {\n                return getLocalStorageData();\n            }\n        };\n\n        function _start() {\n            if (null !== _interval) {\n                throw new TypeError('Tracking is already started');\n            }\n            _interval = setInterval(function () {\n                setLocalStorageData(getLocalStorageData() + _accuracy);\n            }, _accuracy);\n        }\n\n        function _stop() {\n            clearInterval(_interval);\n            _interval = null;\n        }\n\n        function _reset() {\n            _stop();\n            clearLocalStorage();\n        }\n\n        function _init() {\n            _accuracy = options && options.accuracy || 1000;\n        }\n\n        _init();\n\n        /**\n         * Store duration in ms to local storage\n         * @param {*} val - data to be stored.\n         */\n        function setLocalStorageData(val) {\n            window.localStorage.setItem(_storageKey, val);\n        }\n\n        /**\n         * Get duration from local storage\n         * @returns {int} in ms\n         */\n        function getLocalStorageData() {\n            var data = window.localStorage.getItem(_storageKey),\n                result = JSON.parse(data) || 0;\n            return result;\n        }\n\n        /**\n         * Clear storage\n         */\n        function clearLocalStorage() {\n            window.localStorage.removeItem(_storageKey);\n        }\n\n        return sessionState;\n    };\n\n    return sessionStateFactory;\n});\n","\ndefine('tpl!taoProctoring/templates/deliveryServer/authorizationSuccess', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression;\n\n\n  buffer += \"<span class=\\\"success-message\\\">\";\n  if (helper = helpers.message) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.message); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"<span class=\\\"icon-result-ok\\\"></span></span>\";\n  return buffer;\n  });\n});\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2015 (original work) Open Assessment Technologies SA ;\n */\n/**\n * @author Jean-Sébastien Conan <jean-sebastien.conan@vesperiagroup.com>\n */\ndefine('taoProctoring/controller/DeliveryServer/awaiting',[\n    'lodash',\n    'jquery',\n    'i18n',\n    'helpers',\n    'moment',\n    'layout/loading-bar',\n    'ui/listbox',\n    'ui/dialog/alert',\n    'core/polling',\n    'taoQtiTest/testRunner/resumingStrategy/keepAfterResume',\n    'tpl!taoProctoring/templates/deliveryServer/authorizationSuccess'\n], function (_, $, __, helpers, moment, loadingBar, listBox, dialogAlert, polling, keepAfterResume, authSuccessTpl){\n    'use strict';\n\n    /**\n     * The polling delay used to refresh the list\n     * @type {Number}\n     */\n    var refreshPolling = 10 * 1000; // once every 10 seconds\n\n    /**\n     * The CSS scope\n     * @type {String}\n     */\n    var cssScope = '.awaiting-authorization';\n\n    /**\n     * Controls the ProctorDelivery index page\n     *\n     * @type {Object}\n     */\n    var awaitingAuthorizationCtlr = {\n        /**\n         * Entry point of the page\n         */\n        start : function start(config){\n\n            var $container = $(cssScope);\n            var isAuthorizedUrl = helpers._url('isAuthorized', 'DeliveryServer', 'taoProctoring', {deliveryExecution : config.deliveryExecution});\n            var runDeliveryUrl = helpers._url('runDeliveryExecution', 'DeliveryServer', 'taoProctoring', {deliveryExecution : config.deliveryExecution});\n            var boxes = [{\n                    id : 'goToDelivery',\n                    label : config.deliveryLabel,\n                    url : runDeliveryUrl,\n                    content : __('Please wait, authorization in process ...'),\n                    text : __('Proceed')\n                }];\n            var list = listBox({\n                title : config.deliveryInit ? __('Start Test') : __('Resume Test'),\n                textEmpty : '',\n                textNumber : '',\n                textLoading : '',\n                renderTo : $container,\n                list : boxes,\n                width : 12\n            });\n            var $content = $container.find('.listbox .content');\n\n            // we need to reset the local timer to avoid loss of time inside the assessment test session\n            keepAfterResume().reset();\n\n            loadingBar.start();\n\n            polling({\n                action : function (){\n                    var async = this.async();\n                    $.get(isAuthorizedUrl, function(result){\n                        var stop = false;\n\n                        if (!result.success) {\n                            stop = true;\n                            if (result.message) {\n                                dialogAlert(result.message, exit);\n                            } else {\n                                exit();\n                            }\n                        } else if (result.authorized) {\n                            stop = true;\n                            authorized();\n                        }\n\n                        if (stop) {\n                            async.reject();\n                        } else {\n                            async.resolve();\n                        }\n                    });\n                },\n                interval : refreshPolling,\n                autoStart : true\n            });\n            \n            /**\n             * Function to be called when the delivery execution has been authorized\n             */\n            function authorized(){\n                loadingBar.stop();\n                //@todo it would be nice to smoothen the transition\n                $container.removeClass('authorization-in-progress');\n                $content.html(authSuccessTpl({message : __('Authorized, you may proceed')}));\n            }\n\n            /**\n             * Goes back to the delivery index\n             */\n            function exit() {\n                location.href = config.returnUrl;\n            }\n        }\n    };\n\n    return awaitingAuthorizationCtlr;\n});\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2015 (original work) Open Assessment Technologies SA ;\n */\n/**\n * @author Jean-Sébastien Conan <jean-sebastien.conan@vesperiagroup.com>\n */\ndefine('taoProctoring/controller/Diagnostic/index',[\n    'jquery',\n    'i18n',\n    'helpers',\n    'moment',\n    'layout/loading-bar',\n    'util/encode',\n    'ui/feedback',\n    'ui/dialog',\n    'taoProctoring/component/breadcrumbs',\n    'ui/datatable'\n], function ($, __, helpers, moment, loadingBar, encode, feedback, dialog, breadcrumbsFactory) {\n    'use strict';\n\n    /**\n     * The CSS scope\n     * @type {String}\n     */\n    var cssScope = '.diagnostic-index';\n\n    // the page is always loading data when starting\n    loadingBar.start();\n\n    /**\n     * Controls the taoProctoring readiness check page\n     *\n     * @type {Object}\n     */\n    var taoProctoringDiagnosticCtlr = {\n        /**\n         * Entry point of the page\n         */\n        start : function start() {\n            var $container = $(cssScope);\n            var $list = $container.find('.list');\n            var crumbs = $container.data('breadcrumbs');\n            var dataset = $container.data('set');\n            var testCenterId = $container.data('testCenter');\n            var removeUrl = helpers._url('remove', 'Diagnostic', 'taoProctoring', {testCenter : testCenterId});\n            var serviceUrl = helpers._url('index', 'Diagnostic', 'taoProctoring', {testCenter : testCenterId});\n\n            var bc = breadcrumbsFactory($container, crumbs);\n\n            // request the server with a selection of readiness check results\n            var request = function(url, selection, message) {\n                if (selection && selection.length) {\n                    loadingBar.start();\n\n                    $.ajax({\n                        url: url,\n                        data: {\n                            report: selection\n                        },\n                        dataType : 'json',\n                        type: 'POST',\n                        error: function() {\n                            loadingBar.stop();\n                        }\n                    }).done(function(response) {\n                        loadingBar.stop();\n\n                        if (response && response.success) {\n                            if (message) {\n                                feedback().success(message);\n                            }\n                            $list.datatable('refresh');\n                        } else {\n                            feedback().error(__('Something went wrong ...') + '<br>' + encode.html(response.error), {encodeHtml: false});\n                        }\n                    });\n                }\n            };\n\n            var notYet = function() {\n                dialog({\n                    message: __('Not yet implemented!'),\n                    autoRender: true,\n                    autoDestroy: true,\n                    buttons: 'ok'\n                });\n            };\n\n            // request the server to remove the selected diagnostic-index\n            var remove = function(selection) {\n                notYet();\n                //request(removeUrl, selection, __('The readiness check result have been removed'));\n            };\n            \n            $list\n                .on('query.datatable', function() {\n                    loadingBar.start();\n                })\n                .on('load.datatable', function() {\n                    loadingBar.stop();\n                })\n                .datatable({\n                    url: serviceUrl,\n                    status: {\n                        empty: __('No readiness checks have been done!'),\n                        available: __('Readiness checks already done'),\n                        loading: __('Loading')\n                    },\n                    tools: [{\n                        id: 'launch',\n                        icon: 'play',\n                        title: __('Launch another readiness check'),\n                        label: __('Launch readiness check'),\n                        action: function() {\n                            notYet();\n                        }\n                    }, {\n                        id: 'remove',\n                        icon: 'remove',\n                        title: __('Remove the selected readiness check results'),\n                        label: __('Remove'),\n                        massAction: true,\n                        action: function(selection) {\n                            dialog({\n                                message: __('The selected readiness check results will be removed. Continue ?'),\n                                autoRender: true,\n                                autoDestroy: true,\n                                onOkBtn: function() {\n                                    remove(selection);\n                                }\n                            });\n                        }\n                    }],\n                    actions: [{\n                        id: 'remove',\n                        icon: 'remove',\n                        title: __('Remove the readiness check result?'),\n                        action: function(id) {\n                            dialog({\n                                autoRender: true,\n                                autoDestroy: true,\n                                message: __('The readiness check result will be removed. Continue ?'),\n                                onOkBtn: function() {\n                                    remove([id]);\n                                }\n                            });\n                        }\n                    }],\n                    selectable: true,\n                    model: [{\n                        id: 'workstation',\n                        label: __('Workstation')\n                    }, {\n                        id: 'os',\n                        label: __('OS')\n                    }, {\n                        id: 'browser',\n                        label: __('Browser')\n                    }, {\n                        id: 'performance',\n                        label: __('Performance')\n                    }, {\n                        id: 'bandwidth',\n                        label: __('Bandwidth'),\n                        transform: function(value) {\n                            var bandwidth = value;\n\n                            if (value > 100) {\n                                bandwidth = '> 100';\n                            }\n\n                            return bandwidth + ' Mbs';\n                        }\n                    }, {\n                        id: 'date',\n                        label: __('Date'),\n                        transform: function(value) {\n                            return moment(value).toString();\n                        }\n                    }]\n                }, dataset);\n        }\n    };\n\n    return taoProctoringDiagnosticCtlr;\n});\n\n","\ndefine('tpl!taoProctoring/templates/reporting/datepicker', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, helperMissing=helpers.helperMissing, escapeExpression=this.escapeExpression, functionType=\"function\";\n\n\n  buffer += \"<form class=\\\"datepicker\\\">\\n    <label>\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"From\", options) : helperMissing.call(depth0, \"__\", \"From\", options)))\n    + \"</label><input type=\\\"text\\\" name=\\\"periodStart\\\" value=\\\"\";\n  if (helper = helpers.start) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.start); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\"/><label>\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"to\", options) : helperMissing.call(depth0, \"__\", \"to\", options)))\n    + \"</label><input type=\\\"text\\\" name=\\\"periodEnd\\\" value=\\\"\";\n  if (helper = helpers.end) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.end); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\"/>\\n</form>\";\n  return buffer;\n  });\n});\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2015 (original work) Open Assessment Technologies SA ;\n */\n/**\n * @author Jean-Sébastien Conan <jean-sebastien.conan@vesperiagroup.com>\n */\ndefine('taoProctoring/controller/Reporting/index',[\n    'jquery',\n    'i18n',\n    'helpers',\n    'layout/loading-bar',\n    'util/encode',\n    'moment',\n    'tpl!taoProctoring/templates/reporting/datepicker',\n    'ui/feedback',\n    'ui/dialog',\n    'taoProctoring/component/breadcrumbs',\n    'ui/datatable',\n    'jqueryui',\n    'jquery.timePicker'\n], function ($, __, helpers, loadingBar, encode, moment, datepickerTpl, feedback, dialog, breadcrumbsFactory) {\n    'use strict';\n\n    /**\n     * The CSS scope\n     * @type {String}\n     */\n    var cssScope = '.reporting-index';\n\n    // the page is always loading data when starting\n    loadingBar.start();\n\n    /**\n     * Controls the taoProctoring reporting-index page\n     *\n     * @type {Object}\n     */\n    var taoProctoringReportCtlr = {\n        /**\n         * Entry point of the page\n         */\n        start : function start() {\n            var $container = $(cssScope);\n            var $list = $container.find('.list');\n            var crumbs = $container.data('breadcrumbs');\n            var dataset = $container.data('set');\n            var testCenterId = $container.data('testcenter');\n\t\t\tvar downloadUrl = helpers._url('download', 'Reporting', 'taoProctoring', {testCenter : testCenterId});\n            var serviceUrl = helpers._url('reports', 'Reporting', 'taoProctoring', {testCenter : testCenterId});\n            var bc = breadcrumbsFactory($container, crumbs);\n\n            // request the server with a selection of reports\n            var request = function(url, selection, message) {\n                if (selection && selection.length) {\n                    loadingBar.start();\n\n                    $.ajax({\n                        url: url,\n                        data: {\n                            report: selection\n                        },\n                        dataType : 'json',\n                        type: 'POST',\n                        error: function() {\n                            loadingBar.stop();\n                        }\n                    }).done(function(response) {\n                        loadingBar.stop();\n\n                        if (response && response.success) {\n                            if (message) {\n                                feedback().success(message);\n                            }\n                            $list.datatable('refresh');\n                        } else {\n                            feedback().error(__('Something went wrong ...') + '<br>' + encode.html(response.error), {encodeHtml: false});\n                        }\n                    });\n                }\n            };\n\n            var notYet = function() {\n                dialog({\n                    message: __('Not yet implemented!'),\n                    autoRender: true,\n                    autoDestroy: true,\n                    buttons: 'ok'\n                });\n            };\n            \n            var today = moment().format('YYYY-MM-DD');\n            \n            $list\n                .on('query.datatable', function() {\n                    loadingBar.start();\n                })\n                .on('load.datatable', function() {\n                    loadingBar.stop();\n                })\n                .datatable({\n                    url: serviceUrl,\n                    status: {\n                        empty: __('No reports to display!'),\n                        available: __('Available reports'),\n                        loading: __('Loading')\n                    },\n                    tools: [{\n                        id: 'download',\n                        icon: 'download',\n                        title: __('Download the selected reports to a CSV file'),\n                        label: __('Download CSV'),\n                        action: function() {\n                            notYet();\n                        }\n                    }],\n                    selectable: true,\n                    model: [{\n                        id: 'delivery',\n                        label: __('Test')\n                    }, {\n                        id: 'testtaker',\n                        label: __('Test Taker')\n                    }, {\n                        id: 'proctor',\n                        label: __('Proctor')\n                    }, {\n                        id: 'status',\n                        label: __('Status')\n                    }, {\n                        id: 'start',\n                        label: __('Start'),\n                        transform: function(value) {\n                            return moment(value).toString();\n                        }\n                    }, {\n                        id: 'end',\n                        label: __('End'),\n                        transform: function(value) {\n                            return moment(value).toString();\n                        }\n                    }, {\n                        id: 'pause',\n                        label: __('Pause #')\n                    }, {\n                        id: 'resume',\n                        label: __('Resume #')\n                    }, {\n                        id: 'irregularities',\n                        label: __('Irregularities')\n                    }],\n                    params:{\n                        periodStart : today,\n                        periodEnd : today\n                    }\n                }, dataset);\n            \n            //init date range picker\n            dateRangePicker(today, $container, $list);\n        }\n    };\n    \n    /**\n     * Create a data range picker for reporting index\n     * \n     * @param {JQuery} $container\n     * @param {JQuery} $list\n     */\n    function dateRangePicker(date, $container, $list){\n        \n        var $panel = $container.find('.panel');\n        var periodStart = date;\n        var periodEnd = date;\n        $panel.append(datepickerTpl({\n            start : periodStart,\n            end : periodEnd\n        }));\n        \n        var $periodStart = $panel.find('input[name=periodStart]');\n        var $periodEnd = $panel.find('input[name=periodEnd]');\n        $periodStart.datepicker({\n            dateFormat: 'yy-mm-dd',\n            autoSize: true\n        }).change(function(){\n            periodStart = $periodStart.val();\n            $periodEnd.datepicker('option', 'minDate', periodStart);\n            refresh();\n        });\n        $periodEnd.datepicker({\n            dateFormat: 'yy-mm-dd',\n            autoSize: true\n        }).change(function(){\n            periodEnd = $periodEnd.val();\n            $periodStart.datepicker('option', 'maxDate', periodEnd);\n            refresh();\n        });\n        \n        /**\n         * Refresh the data table with new date range \n         * @returns {undefined}\n         */\n        function refresh(){\n            $list.datatable('options', {\n                params:\n                    {\n                        periodStart : periodStart,\n                        periodEnd : periodEnd\n                    }\n            }).datatable('refresh');\n        }\n    }\n    \n    return taoProctoringReportCtlr;\n});\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2015 (original work) Open Assessment Technologies SA ;\n */\n/**\n * @author Jean-Sébastien Conan <jean-sebastien.conan@vesperiagroup.com>\n */\ndefine('taoProctoring/controller/TestCenter/index',[\n    'jquery',\n    'i18n',\n    'helpers',\n    'layout/loading-bar',\n    'ui/listbox',\n    'taoProctoring/component/breadcrumbs'\n], function ($, __, helpers, loadingBar, listBox, breadcrumbsFactory) {\n    'use strict';\n\n    /**\n     * The polling delay used to refresh the list\n     * @type {Number}\n     */\n    var refreshPolling = 60 * 1000; // once per minute\n\n    /**\n     * The CSS scope\n     * @type {String}\n     */\n    var cssScope = '.testcenters-index';\n\n    // the page is always loading data when starting\n    loadingBar.start();\n\n    /**\n     * Controls the taoProctoring index page\n     *\n     * @type {Object}\n     */\n    var taoProctoringIndexCtlr = {\n        /**\n         * Entry point of the page\n         */\n        start : function start() {\n            var $container = $(cssScope);\n            var boxes = $container.data('list');\n            var crumbs = $container.data('breadcrumbs');\n            var list = listBox({\n                title: __(\"My Test sites\"),\n                textEmpty: __(\"No test site available\"),\n                textNumber: __(\"Available\"),\n                textLoading: __(\"Loading\"),\n                renderTo: $container.find('.content'),\n                replace: true\n            });\n            var bc = breadcrumbsFactory($container, crumbs);\n            var serviceUrl = helpers._url('index', 'TestCenter', 'taoProctoring');\n            var pollTo = null;\n\n            // update the index from a JSON array\n            var update = function(boxes) {\n                if (pollTo) {\n                    clearTimeout(pollTo);\n                    pollTo = null;\n                }\n\n                list.update(boxes);\n                loadingBar.stop();\n\n                // poll the server at regular interval to refresh the index\n                if (refreshPolling) {\n                    pollTo = setTimeout(refresh, refreshPolling);\n                }\n            };\n\n            // refresh the index\n            var refresh = function() {\n                loadingBar.start();\n                list.setLoading(true);\n\n                $.ajax({\n                    url: serviceUrl,\n                    cache: false,\n                    dataType : 'json',\n                    type: 'GET'\n                }).done(function(response) {\n                    boxes = response && response.list;\n                    update(boxes);\n                });\n            };\n\n            if (!boxes) {\n                refresh();\n            } else {\n                update(boxes);\n            }\n        }\n    };\n\n    return taoProctoringIndexCtlr;\n});\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2015 (original work) Open Assessment Technologies SA ;\n */\n/**\n * @author Jean-Sébastien Conan <jean-sebastien.conan@vesperiagroup.com>\n */\ndefine('taoProctoring/controller/TestCenter/testCenter',[\n    'jquery',\n    'i18n',\n    'helpers',\n    'layout/loading-bar',\n    'ui/listbox',\n    'taoProctoring/component/breadcrumbs'\n], function ($, __, helpers, loadingBar, listBox, breadcrumbsFactory) {\n    'use strict';\n\n    /**\n     * The CSS scope\n     * @type {String}\n     */\n    var cssScope = '.testcenters-testcenter';\n\n    // the page is always loading data when starting\n    loadingBar.start();\n\n    /**\n     * Controls the taoProctoring test site page\n     *\n     * @type {Object}\n     */\n    var taoProctoringTestSiteCtlr = {\n        /**\n         * Entry point of the page\n         */\n        start : function start() {\n            var $container = $(cssScope);\n            var boxes = $container.data('list');\n            var crumbs = $container.data('breadcrumbs');\n            var id = $container.data('id');\n            var title = $container.data('title');\n            var list = listBox({\n                title: title,\n                textEmpty: false,\n                textNumber: false,\n                textLoading: __(\"Loading\"),\n                renderTo: $container.find('.content'),\n                replace: true,\n                width: 4\n            });\n            var bc = breadcrumbsFactory($container, crumbs);\n            var serviceUrl = helpers._url('testCenter', 'TestCenter', 'taoProctoring');\n\n            // update the index from a JSON array\n            var update = function(boxes) {\n                list.update(boxes);\n                loadingBar.stop();\n            };\n\n            // refresh the index\n            var refresh = function() {\n                loadingBar.start();\n                list.setLoading(true);\n\n                $.ajax({\n                    url: serviceUrl,\n                    cache: false,\n                    dataType : 'json',\n                    type: 'GET'\n                }).done(function(response) {\n                    boxes = response && response.list;\n                    update(boxes);\n                });\n            };\n\n            if (!boxes) {\n                refresh();\n            } else {\n                update(boxes);\n            }\n        }\n    };\n\n    return taoProctoringTestSiteCtlr;\n});\n\n"]}