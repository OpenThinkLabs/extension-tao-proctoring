{"version":3,"sources":["routes.js","../../controller/app.js","app.js","../helper/status.js","../component/proxy.js","../templates/delivery/index!tpl","../templates/delivery/listBoxActions!tpl","../templates/delivery/listBoxStats!tpl","Delivery/index.js","../component/breadcrumbs.js","Delivery/manage.js","../component/extraTime/encoder.js","../component/extraTime/extraTime!tpl","../component/extraTime/extraTime.js","../templates/delivery/monitoring!tpl","../templates/delivery/deliveryLink!tpl","../templates/delivery/statusFilter!tpl","Delivery/monitoring.js","Delivery/testTakers.js","../../taoQtiTest/testRunner/resumingStrategy/keepAfterResume.js","../templates/deliveryServer/authorizationSuccess!tpl","../templates/deliveryServer/authorizationListBoxActions!tpl","DeliveryServer/awaiting.js","Irregularity/index.js","../component/dateRange/form!tpl","../component/dateRange.js","../component/history/historyTable.js","../templates/reporting/index!tpl","Reporting/history.js","Tools/pauseActiveExecutions.js"],"names":["define","Reporting","actions","index","Irregularity","DeliverySelection","Monitor","Tools","pauseActiveExecutions","$","historyRouterFactory","loggerFactory","eventifier","statifier","urlUtil","feedback","historyRouter","appLogger","appController","start","options","currentRoute","apply","forwardTo","window","location","forward","selector","target","document","off","on","e","$elt","href","preventDefault","this","attr","redirect","getRouter","getLogger","onError","err","message","error","url","setState","trigger","_","request","containerFactory","breadcrumbsFactory","urlHelper","getRoutes","route","routes","parsed","parse","forEach","knownRoutes","knownRoute","params","path","push","param","query","decodeURIComponent","build","breadcrumbsUrl","indexUrl","monitorUrl","historyUrl","defaults","toolbox","breadcrumbs","renderTo","getElement","replace","cls","then","data","update","__","getStatus","statusName","_status","getStatusByCode","statusCode","find","code","verifyTestTaker","testTakerData","actionName","formatted","id","label","firstname","lastname","status","state","allowed","can","reason","getStatuses","map","el","_awaiting","_authorized","_inprogress","_paused","_completed","_terminated","_canceled","inprogress","authorize","pause","terminate","report","print","time","authorized","awaiting","canceled","completed","paused","terminated","STATUS_AUTHORIZED","STATUS_INPROGRESS","STATUS_PAUSED","STATUS_COMPLETED","STATUS_TERMINATED","proxyFactory","ajaxProxy","registerProvider","hb","template","Handlebars","depth0","helpers","partials","program1","stack1","helper","buffer","title","call","hash","functionType","escapeExpression","compilerInfo","merge","self","inverse","noop","fn","program","helperMissing","periodStart","periodEnd","showProperties","locked","inProgress","Promise","loadingBar","listBoxFactory","encode","bulkActionPopup","cascadingComboBox","indexTpl","actionsTpl","statsTpl","handleOnDisconnect","reload","getSessionsNames","sessions","session","testTaker","firstName","lastName","validateParams","isPlainObject","isUndefined","delivery","isEmpty","execution","cssScope","serviceUrl","pauseUrl","sessionsUrl","deliveries","categories","proxyDeliveries","proxySessions","container","changeScope","write","listBox","textEmpty","textNumber","textLoading","list","width","countRenderer","count","destroy","all","init","read","proxy","validate","getDeliveryLabel","formatPauseWarning","response","deliveryExecutions","messageContext","unprocessed","responseData","uri","length","join","html","refresh","setLoading","transform","result","props","properties","tplData","stats","awaitingApproval","content","trim","stop","deliveryId","selection","resolve","reject","resourceType","categoriesSelector","categoriesDefinitions","allowedResources","action","pluck","success","warning","encodeHtml","stopPropagation","inProgressExecs","filter","info","$container","crumbs","dialog","proctorDeliveryIndexCtlr","$list","dataset","testCenterId","assignUrl","_url","testCenter","removeUrl","monitoringUrl","ajax","testtaker","dataType","type","done","datatable","remove","empty","available","loading","tools","icon","massAction","autoRender","autoDestroy","onOkBtn","selectable","model","format","timeEncoder","encodeExtraTime","extraTime","consumedTime","pattern","unit","encoded","Math","min","each","program2","deniedResources","program7","remainingStr","program3","extraTimeStr","program5","program8","program10","component","hider","extraTimeTpl","extraTimeFactory","config","initConfig","_defaults","timeUnit","resource","remaining","parseFloat","setTemplate","checkInputError","value","$time","val","Number","isNaN","show","$error","$ok","focus","removeAttr","hide","submit","$cmp","modal","cancel","select","reduce","max","addClass","event","keyCode","$btn","closest","control","removeClass","statuses","module","extraTimePopup","monitoringTpl","deliveryLinkTpl","statusFilterTpl","terminateUrl","authorizeUrl","extraTimeUrl","reportUrl","executionsUrl","deliveryUrl","extraTimeUnit","extraFields","timeHandlingButton","printReportButton","actionButtons","actionList","$content","pageParams","context","defaultTag","defaultAvailableLabel","highlightRows","serviceParams","sessionsHistoryUrl","proxyExecutions","getExecutionData","start_time","execBulkAction","sel","open","JSON","stringify","terminateAndIrregularity","buttons","close","showHistory","monitoringRoute","urlParams","printReport","printResults","timeHandling","_selection","isArray","listSessions","canDo","what","verifyDelivery","deliveryName","isObject","text","test_taker_first_name","test_taker_last_name","timer","consumedExtraTime","remaining_time","allowedDeliveries","forbiddenDeliveries","checkedDelivery","actionTitle","cb","askForReason","reasonRequired","isFunction","buildStatusFilter","setTagUsage","applyTags","$filter","appendTo","children","getTagsUsage","setInitialFilters","now","Date","nowStr","getFullYear","getMonth","slice","getDate","statusFilterHandler","$el","select2","dropdownAutoWidth","placeholder","minimumResultsForSearch","Infinity","allowClear","set","extrafields","css","sortable","row","extraField","filterable","customFilter","callback","datepicker","dateFormat","onSelect","selectedDate","first","inline","onClose","disabled","refinedValue","parseInt","isFinite","hidden","online","progress","newDataset","v","uniq","forIn","split","filterStrategy","filterSelector","sortorder","sortby","proctorDeliveryAssignCtlr","managerUrl","assign","sessionStateFactory","_start","_interval","TypeError","setInterval","setLocalStorageData","getLocalStorageData","_accuracy","_stop","clearInterval","_reset","clearLocalStorage","_init","accuracy","localStorage","setItem","_storageKey","getItem","removeItem","sessionState","reset","restart","getDuration","cancelable","dialogAlert","polling","keepAfterResume","dialogConfirm","authSuccessTpl","listBoxActionsTpl","refreshPolling","awaitingAuthorizationCtlr","exit","returnUrl","isAuthorizedUrl","deliveryExecution","runDeliveryUrl","boxes","deliveryLabel","deliveryInit","cancelUrl","hasClass","async","get","interval","autoStart","IrregularityCtlr","$form","from","to","exportUrl","fileDownload","successCallback","failCallback","jqXHR","parseJSON","Error","end","formTpl","dateRangeFactory","dateRange","getStart","getEnd","$periodStart","$periodEnd","$filterBtn","autoSize","change","renderDetails","details","historyTableFactory","historyTable","$element","is","service","sortBy","sortOrder","concat","buttonFactory","monitoring","proxyService","detailedHistory","tool","detailed","render","history","go","doPause","loaded","msg"],"mappings":"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AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AClLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACzGA,AD0GA;ACzGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACjLA,ADkLA;ACjLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AChCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC1BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACrBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC7CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC1UA,AD2UA;AC1UA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACtCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC9LA,AD+LA;AC9LA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACxDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACxIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC7LA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACzBA,AD0BA;ACzBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACzBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC9BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACp9BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC5JA,AD6JA;AC5JA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACvGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChBA,ADiBA;AChBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC9BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC3JA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACzEA,AD0EA;ACzEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC1BA,AD2BA;AC1BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACnIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC1JA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC1BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC1KA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"taoProctoring/controller/routes.js","sourcesContent":["define('taoProctoring/controller/routes',{\n    'Reporting' : {\n        'actions' : {\n            'index' : 'controller/Reporting/history'\n        }\n    },\n    'Irregularity' : {\n        'actions' : {\n            'index' : 'controller/Irregularity/index'\n        }\n    },\n    'DeliverySelection' : {\n        'actions' : {\n            'index' : 'controller/Delivery/index'\n        }\n    },\n    'Monitor' : {\n        'actions' : {\n            'index' : 'controller/Delivery/monitoring'\n        }\n    },\n    'Tools' : {\n        'actions' : {\n            'pauseActiveExecutions' : 'controller/Tools/pauseActiveExecutions'\n        }\n    }\n});\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2017 (original work) Open Assessment Technologies SA ;\n */\n/**\n * @author Jean-Sébastien Conan <jean-sebastien@taotesting.com>\n */\ndefine('controller/app',[\n    'jquery',\n    'core/historyRouter',\n    'core/logger',\n    'core/eventifier',\n    'core/statifier',\n    'util/url',\n    'ui/feedback'\n], function ($, historyRouterFactory, loggerFactory, eventifier, statifier, urlUtil, feedback) {\n    'use strict';\n\n    /**\n     * Shared router that will manage the page for each controller\n     * @type {historyRouter}\n     */\n    var historyRouter;\n\n    /**\n     * Creates a logger for the app\n     * @type {logger}\n     */\n    var appLogger = loggerFactory('controller/app');\n\n    /**\n     * Defines an application controller that will manage the routes through the history.\n     * It will start by dispatching the current location, in order to keep history consistency.\n     * To properly use this application controller you need to take care of it in each controller\n     * that is intended to be routed through the history. See samples below.\n     *\n     * @example\n     *  // Defines a controller that is routable through the history\n     *  return {\n     *      // Will be called each time the history routes the action to this controller\n     *      start: function start() {\n     *          // Take care of the application controller by applying a hook on each routable links\n     *          return appController.apply('.link');\n     *\n     *          // You can also be notified of a change in the route,\n     *          // and release some resources as this controller will be destroyed.\n     *          // Pay attention to the event namespace, it must be unique.\n     *          appController.on('change.myController', function() {\n     *              // Release the event, as this controller will be destroyed\n     *              appController.off('change.myController');\n     *\n     *              // Release resources\n     *              ...\n     *          });\n     *\n     *          // Do the stuff of the controller\n     *          ...\n     *\n     *          // If you need to change the current route you can rely on the router brought by the appController\n     *          appController.getRouter().redirect(url);\n     *  };\n     *\n     * @typedef {appController}\n     */\n    var appController = eventifier(statifier({\n        /**\n         * App controller entry point: set up the router.\n         * @param {Object} options\n         * @param {String} [options.forwardTo] - an optional route of a client controller to forward\n         */\n        start: function start(options){\n            var currentRoute;\n\n            // all links that are tagged with the \"router\" class are dispatched using the history router\n            appController.apply();\n\n            // dispatch the current route\n            if (options && options.forwardTo) {\n                currentRoute = options.forwardTo;\n            } else {\n                currentRoute = window.location + '';\n            }\n\n            historyRouter.forward(currentRoute);\n        },\n\n        /**\n         * Catch all links below the target, when they have the provided selector,\n         * then dispatch them using the history router.\n         * @param {String} [selector] - The CSS signature of links to catch (default: \".router\")\n         * @param {String|HTMLElement|jQuery} [target] - The container from which catch links (default: document)\n         * @returns {appController}\n         */\n        apply: function apply(selector, target) {\n            selector = selector || '.router';\n            target = target || document;\n\n            $(target).off('click.appController').on('click.appController', selector, function (e) {\n                var $elt, href;\n\n                // prevent the browser to actually change the page from this link\n                e.preventDefault();\n\n                // try to get the target of the link\n                $elt = $(this);\n                href = $elt.attr('href');\n                if (!href) {\n                    href = $('[href]:first-child', $elt).attr('href');\n                }\n\n                // use the history router to change the current view\n                // the called controller will have in charge to get the data and update the view accordingly\n                if (href) {\n                    historyRouter.redirect(href);\n                }\n            });\n\n            return this;\n        },\n\n        /**\n         * Exposes the router so other controllers can dispatch a route\n         *\n         * @returns {router} the router\n         */\n        getRouter: function getRouter() {\n            return historyRouter;\n        },\n\n        /**\n         * Exposes the logger so other controllers can log application level events\n         *\n         * @returns {logger} the router\n         */\n        getLogger: function getLogger() {\n            return appLogger;\n        },\n\n        /**\n         * Catches errors\n         * @param {Object} err\n         * @returns {appController}\n         */\n        onError: function onError(err) {\n            var message = err && err.message || err;\n            appLogger.error(err);\n            feedback().error(message);\n            return this;\n        }\n    }));\n\n    // setup the history router\n    historyRouter = historyRouterFactory()\n        .on('dispatching', function (url) {\n            appController.setState('dispatching');\n            appController.trigger('change', url);\n        })\n        .on('dispatched', function (url) {\n            appController.setState('dispatching', false);\n            appController.trigger('started', url);\n        });\n\n    return appController;\n});\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2017 (original work) Open Assessment Technologies SA ;\n */\n/**\n * @author Jean-Sébastien Conan <jean-sebastien@taotesting.com>\n */\ndefine('taoProctoring/controller/app',[\n    'lodash',\n    'controller/app',\n    'core/dataProvider/request',\n    'ui/container',\n    'ui/breadcrumbs',\n    'util/url'\n], function (_, appController, request, containerFactory, breadcrumbsFactory, urlHelper) {\n    'use strict';\n\n    var breadcrumbsUrl = urlHelper.route('load', 'Breadcrumbs', 'tao');\n    var indexUrl = urlHelper.route('index', 'DeliverySelection', 'taoProctoring');\n    var monitorUrl = urlHelper.route('index', 'Monitor', 'taoProctoring');\n    var historyUrl = urlHelper.route('index', 'Reporting', 'taoProctoring');\n    var knownRoutes = [{\n        url: indexUrl,\n        params: []\n    }, {\n        url: monitorUrl,\n        params: ['delivery']\n    }, {\n        url: historyUrl,\n        params: ['delivery', 'session']\n    }];\n\n    /**\n     * Gets the list of routes that lead to the provided route\n     * @param {String} route\n     * @returns {String[]}\n     */\n    function getRoutes(route) {\n        var routes = [];\n        var parsed = urlHelper.parse(route);\n\n        _.forEach(knownRoutes, function (knownRoute) {\n            var url = urlHelper.parse(knownRoute.url);\n            var params = {};\n\n            if (parsed.path === url.path) {\n                routes.push(route);\n                return false;\n            }\n\n            _.forEach(knownRoute.params, function (param) {\n                if (parsed.query[param]) {\n                    params[param] = decodeURIComponent(parsed.query[param]);\n                }\n            });\n\n            routes.push(urlHelper.build(knownRoute.url, params));\n        });\n        return routes;\n    }\n\n    /**\n     * The app controller takes care of the application navigation and routing.\n     */\n    return _.defaults({\n        /**\n         * App controller entry point: set up the router.\n         */\n        start: function start() {\n            var toolbox = containerFactory('.header');\n            var breadcrumbs = breadcrumbsFactory({\n                renderTo: toolbox.getElement(),\n                replace: true,\n                cls: 'action-bar horizontal-action-bar'\n            });\n\n            appController\n                .on('change.breadcrumbs', function (route) {\n                    var routes = getRoutes(route);\n                    request(breadcrumbsUrl, {route: routes}, 'POST')\n                        .then(function (data) {\n                            breadcrumbs.update(data);\n                        })\n                        .catch(function(err) {\n                            appController.onError(err);\n                        });\n                })\n                .apply('a', toolbox.getElement())\n                .start();\n        }\n    }, appController);\n});\n\n","/*\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2015 (original work) Open Assessment Technologies SA ;\n *\n */\ndefine('taoProctoring/helper/status',['lodash', 'i18n'], function(_, __){\n    'use strict';\n    var _awaiting = 'http://www.tao.lu/Ontologies/TAODelivery.rdf#DeliveryExecutionStatusAwaiting',\n        _authorized = 'http://www.tao.lu/Ontologies/TAODelivery.rdf#DeliveryExecutionStatusAuthorized',\n        _inprogress = 'http://www.tao.lu/Ontologies/TAODelivery.rdf#DeliveryExecutionStatusActive',\n        _paused = 'http://www.tao.lu/Ontologies/TAODelivery.rdf#DeliveryExecutionStatusPaused',\n        _completed = 'http://www.tao.lu/Ontologies/TAODelivery.rdf#DeliveryExecutionStatusFinished',\n        _terminated = 'http://www.tao.lu/Ontologies/TAODelivery.rdf#DeliveryExecutionStatusTerminated',\n        _canceled = 'http://www.tao.lu/Ontologies/TAODelivery.rdf#DeliveryExecutionStatusCanceled';\n\n    var _status = {\n        inprogress : {\n            code : _inprogress,\n            label : __('In Progress'),\n            can : {\n                authorize : __('already authorized'),\n                pause : true,\n                terminate : true,\n                report : true,\n                print : __('not finished'),\n                time : true\n            }\n        },\n        authorized : {\n            code : _authorized,\n            label : __('Authorized but not started'),\n            can : {\n                authorize : __('already authorized'),\n                terminate : true,\n                report : true,\n                pause : __('not started'), //not in progress\n                print : __('not finished'),\n                time : true\n            }\n        },\n        awaiting : {\n            code : _awaiting,\n            label : __('Awaiting'),\n            can : {\n                authorize : true,\n                pause : __('not in progress'),\n                terminate : true,\n                report : true,\n                print : __('not finished'),\n                time : true\n            }\n        },\n        canceled : {\n            code : _canceled,\n            label : __('Canceled'),\n            can : {\n                authorize : __('is canceled'),\n                pause : __('is canceled'),\n                terminate : __('is canceled'),\n                report : true,\n                print: __('is canceled'),\n                time : true\n            }\n        },\n        completed : {\n            code : _completed,\n            label : __('Completed'),\n            can : {\n                authorize : __('is completed'),\n                pause : __('is completed'),\n                terminate : __('is completed'),\n                report : true,\n                print: true,\n                time : true\n            }\n        },\n        paused : {\n            code : _paused,\n            label : __('Paused'),\n            can : {\n                authorize : __('is paused'),\n                pause : __('is already paused'),\n                terminate : true,\n                report : true,\n                print : __('not finished'),\n                time : true\n            }\n        },\n        terminated : {\n            code : _terminated,\n            label : __('Terminated'),\n            can : {\n                authorize : __('is terminated'),\n                pause : __('is terminated'),\n                terminate : __('is terminated'),\n                report : true,\n                print: true,\n                time : true\n            }\n        }\n    };\n\n    /**\n     * Get the status model from its name\n     * @param {string} statusName\n     * @returns {object}\n     */\n    function getStatus(statusName){\n        return _status[statusName];\n    }\n\n    /**\n     * Get the status model from its code\n     * @param {string} statusCode\n     * @returns {object}\n     */\n    function getStatusByCode(statusCode){\n        return _.find(_status, {code : statusCode});\n    }\n\n    /**\n     * Verify and reformat test taker data for the execBulkAction's need\n     * @param {Object} testTakerData\n     * @param {String} actionName\n     * @returns {Object}\n     */\n    function verifyTestTaker(testTakerData, actionName){\n        var formatted = {\n            id : testTakerData.id,\n            label : testTakerData.firstname + ' ' + testTakerData.lastname\n        };\n        var status = _status.getStatusByCode(testTakerData.state.status);\n        if(status){\n            formatted.allowed = (status.can[actionName] === true);\n            if(!formatted.allowed){\n                formatted.reason = status.can[actionName];\n            }\n        }\n        return formatted;\n    }\n\n    /**\n     * Get status model mappings formatted\n     * @returns {Array}\n     */\n    function getStatuses() {\n        return _.map(_status, function (el) {\n            return {code: el.code, label: el.label};\n        });\n    }\n\n    return {\n        getStatuses : getStatuses,\n        getStatus : getStatus,\n        getStatusByCode : getStatusByCode,\n        verifyTestTaker : verifyTestTaker,\n        STATUS_AUTHORIZED : _authorized,\n        STATUS_INPROGRESS : _inprogress,\n        STATUS_PAUSED : _paused,\n        STATUS_COMPLETED : _completed,\n        STATUS_TERMINATED : _terminated\n    };\n});\n\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2017 (original work) Open Assessment Technologies SA ;\n */\n/**\n * @author Jean-Sébastien Conan <jean-sebastien@taotesting.com>\n */\ndefine('taoProctoring/component/proxy',[\n    'core/dataProvider/proxy',\n    'core/dataProvider/proxy/ajax'\n], function (proxyFactory,\n             ajaxProxy) {\n    'use strict';\n\n    // TODO: use a better implementation to load and register the providers\n    return proxyFactory\n        .registerProvider('ajax', ajaxProxy);\n});\n\n","\ndefine('tpl!taoProctoring/templates/delivery/index', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, functionType=\"function\", escapeExpression=this.escapeExpression, self=this;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", stack1, helper;\n  buffer += \"<h1>\";\n  if (helper = helpers.title) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.title); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"</h1>\";\n  return buffer;\n  }\n\n  buffer += \"<div class=\\\"content\\\">\\n    \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.title), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    <div class=\\\"panel\\\"></div>\\n    <div class=\\\"list clearfix\\\"></div>\\n</div>\\n\";\n  return buffer;\n  });\n});\n\n","\ndefine('tpl!taoProctoring/templates/delivery/listBoxActions', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, functionType=\"function\", escapeExpression=this.escapeExpression, helperMissing=helpers.helperMissing;\n\n\n  buffer += \"<span class=\\\"listbox-actions\\\">\\n    <span class=\\\"action pause\\\" data-delivery=\\\"\";\n  if (helper = helpers.id) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.id); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\">\\n        <span class=\\\"icon-pause\\\"></span>\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Pause\", options) : helperMissing.call(depth0, \"__\", \"Pause\", options)))\n    + \"\\n    </span>\\n    <span class=\\\"action play\\\">\\n        <span class=\\\"icon-play\\\"></span>\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Monitor\", options) : helperMissing.call(depth0, \"__\", \"Monitor\", options)))\n    + \"\\n    </span>\\n</span>\";\n  return buffer;\n  });\n});\n\n","\ndefine('tpl!taoProctoring/templates/delivery/listBoxStats', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, helperMissing=helpers.helperMissing, escapeExpression=this.escapeExpression, functionType=\"function\", self=this;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", stack1, helper, options;\n  buffer += \"\\n<ul class=\\\"plain listbox-properties\\\">\\n    <li>\\n        <label>\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Start\", options) : helperMissing.call(depth0, \"__\", \"Start\", options)))\n    + \"</label>: \";\n  if (helper = helpers.periodStart) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.periodStart); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\n    </li>\\n    <li>\\n        <label>\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"End\", options) : helperMissing.call(depth0, \"__\", \"End\", options)))\n    + \"</label>: \";\n  if (helper = helpers.periodEnd) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.periodEnd); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\n    </li>\\n</ul>\\n\";\n  return buffer;\n  }\n\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.showProperties), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n<p class=\\\"listbox-stats\\\">\\n    <span class=\\\"icon-lock\\\"></span><span class=\\\"number\\\">\";\n  if (helper = helpers.locked) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.locked); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"</span>\\n    <span class=\\\"icon-play\\\"></span><span class=\\\"number\\\">\";\n  if (helper = helpers.inProgress) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.inProgress); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"</span>\\n    <span class=\\\"icon-pause\\\"></span><span class=\\\"number\\\">\";\n  if (helper = helpers.paused) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.paused); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"</span>\\n</p>\";\n  return buffer;\n  });\n});\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2015 (original work) Open Assessment Technologies SA ;\n */\n/**\n * @author Jean-Sébastien Conan <jean-sebastien.conan@vesperiagroup.com>\n */\ndefine('taoProctoring/controller/Delivery/index',[\n    'jquery',\n    'lodash',\n    'i18n',\n    'core/promise',\n    'controller/app',\n    'util/url',\n    'layout/loading-bar',\n    'ui/listbox',\n    'util/encode',\n    'ui/feedback',\n    'ui/bulkActionPopup',\n    'ui/cascadingComboBox',\n    'ui/container',\n    'taoProctoring/helper/status',\n    'taoProctoring/component/proxy',\n    'tpl!taoProctoring/templates/delivery/index',\n    'tpl!taoProctoring/templates/delivery/listBoxActions',\n    'tpl!taoProctoring/templates/delivery/listBoxStats'\n], function (\n    $,\n    _,\n    __,\n    Promise,\n    appController,\n    urlHelper,\n    loadingBar,\n    listBoxFactory,\n    encode,\n    feedback,\n    bulkActionPopup,\n    cascadingComboBox,\n    containerFactory,\n    _status,\n    proxyFactory,\n    indexTpl,\n    actionsTpl,\n    statsTpl\n) {\n    'use strict';\n\n    /**\n     * The CSS scope\n     * @type {String}\n     */\n    var cssScope = '.delivery-index';\n\n    var serviceUrl = urlHelper.route('deliveries', 'DeliverySelection', 'taoProctoring');\n    var pauseUrl = urlHelper.route('pauseExecutions', 'Monitor', 'taoProctoring');\n    var sessionsUrl = urlHelper.route('deliveryExecutions', 'Monitor', 'taoProctoring');\n\n    /**\n     * Filters the disconnection errors\n     * @param {Error} err\n     */\n    function handleOnDisconnect(err) {\n        if (err.code === 403) {\n            //we just leave if any 403 occurs\n            window.location.reload(true);\n        }\n    }\n\n    /**\n     * Gets a list of named sessions\n     * @param {Array} sessions\n     * @returns {Array}\n     */\n    function getSessionsNames(sessions) {\n        return _.map(sessions, function (session) {\n            var testTaker = session.testTaker;\n            return {\n                id: session.id,\n                label: testTaker.firstName + ' ' + testTaker.lastName\n            };\n        });\n    }\n\n    /**\n     * Validates the params to be sent along the provider's requests\n     * @param params\n     * @returns {boolean}\n     */\n    function validateParams(params) {\n        return _.isPlainObject(params) &&\n            (_.isUndefined(params.delivery) || !_.isEmpty(params.delivery)) &&\n            (_.isUndefined(params.execution) || !_.isEmpty(params.execution)) &&\n            (_.isUndefined(params.reason) || !_.isEmpty(params.reason));\n    }\n\n    // the page is always loading data when starting\n    loadingBar.start();\n\n    /**\n     * Controls the ProctorDelivery index page\n     *\n     * @type {Object}\n     */\n    return {\n        /**\n         * Entry point of the page\n         */\n        start: function start() {\n            var title = __(\"Sessions\");\n            var deliveries, categories, proxyDeliveries, proxySessions;\n            var container = containerFactory('.container').changeScope(cssScope).write(indexTpl({title: title}));\n            var listBox = listBoxFactory({\n                title: title,\n                textEmpty: __(\"No sessions available\"),\n                textNumber: __(\"Available\"),\n                textLoading: __(\"Loading\"),\n                renderTo: container.find('.content'),\n                replace: true,\n                list: [],\n                width: 12,\n\n                // discard the \"all sessions\" box from available count\n                countRenderer: function (count) {\n                    return count - 1;\n                }\n            });\n\n            appController.on('change.deliveryIndex', function() {\n                appController.off('.deliveryIndex');\n                listBox.destroy();\n                container.destroy();\n            });\n\n            Promise.all([\n                proxyFactory('ajax').init({\n                    actions: {\n                        read: serviceUrl\n                    }\n                }).then(function(proxy) {\n                    proxyDeliveries = proxy;\n                }),\n                proxyFactory('ajax').init({\n                    actions: {\n                        read: {\n                            url: sessionsUrl,\n                            validate: validateParams\n                        },\n                        pause: {\n                            url: pauseUrl,\n                            validate: validateParams\n                        }\n                    }\n                }).then(function(proxy) {\n                    proxySessions = proxy;\n                })\n            ]).then(function() {\n                // get the label of a delivery from its ID\n                function getDeliveryLabel(id) {\n                    return deliveries[id] && deliveries[id].label;\n                }\n\n                //\n                function formatPauseWarning(response, deliveryExecutions) {\n                    var messageContext, unprocessed;\n                    var responseData;\n\n                    messageContext = '';\n                    if (response) {\n                        responseData = response.data;\n                        unprocessed = {};\n                        if (responseData) {\n                            _.forEach(responseData.unprocessed, function (id) {\n                                var execution = deliveryExecutions[id];\n                                var uri = execution && execution.delivery && execution.delivery.uri;\n                                if (uri) {\n                                    unprocessed[uri] = (unprocessed[uri] || 0) + 1;\n                                }\n                            });\n                        }\n\n                        unprocessed = _.map(unprocessed, function (count, uri) {\n                            if (count > 1) {\n                                return __('%d sessions of the delivery %s have not been paused', count, getDeliveryLabel(uri));\n                            }\n                            return __('A session of the delivery %s have not been paused', getDeliveryLabel(uri));\n                        });\n\n                        if (unprocessed.length) {\n                            messageContext += '<br>' + unprocessed.join('<br>');\n                        }\n                        if (response.error) {\n                            messageContext += '<br>' + encode.html(response.error);\n                        }\n                    }\n\n                    return messageContext;\n                }\n\n                // refresh the index\n                function refresh() {\n                    loadingBar.start();\n                    listBox.setLoading(true);\n\n                    return proxyDeliveries.read().then(function (data) {\n                        categories = data.categories;\n\n                        deliveries = _.transform(data.list, function (result, delivery) {\n                            var props = delivery.properties;\n                            var tplData = {\n                                locked: delivery.stats.awaitingApproval,\n                                inProgress: delivery.stats.inProgress,\n                                paused: delivery.stats.paused\n                            };\n\n                            if (props && props.periodStart && props.periodEnd) {\n                                tplData.showProperties = true;\n                                tplData.periodStart = props.periodStart;\n                                tplData.periodEnd = props.periodEnd;\n\n                                //add a special class for boxes that have more information to display\n                                delivery.cls = 'has-properties-displayed';\n                            }\n                            delivery.html = actionsTpl({\n                                id: delivery.id\n                            });\n                            delivery.content = statsTpl(tplData);\n                            delivery.cls = ((delivery.cls || '') + ' router').trim();\n\n                            result[delivery.id] = delivery;\n                        }, {});\n\n                        listBox.update(data.list);\n                        loadingBar.stop();\n\n                    }).catch(function (err) {\n                        handleOnDisconnect(err);\n                        appController.onError(err);\n                    });\n                }\n\n                // request a pause fo the selected delivery executions\n                function pause(deliveryId, selection, deliveryExecutions) {\n                    return new Promise(function(resolve, reject) {\n                        bulkActionPopup({\n                            renderTo: container.getElement(),\n                            actionName: __('Pause Session'),\n                            reason: true,\n                            resourceType: 'test taker',\n                            categoriesSelector: cascadingComboBox({\n                                categoriesDefinitions: categories.pause.categoriesDefinitions,\n                                categories: categories.pause.categories\n                            }),\n                            allowedResources: getSessionsNames(selection)\n                        })\n                            .on('cancel', resolve)\n                            .on('ok', function (reason) {\n                                proxySessions.action('pause', {\n                                    delivery: deliveryId,\n                                    execution: _.pluck(selection, 'id'),\n                                    reason: reason\n                                }).then(function() {\n                                    feedback().success('Selected deliveries successfully paused');\n                                    refresh().then(resolve).catch(reject);\n                                }).catch(function(err) {\n                                    if (err.response) {\n                                        feedback().warning(__('Something went wrong ...') + '<br>' + formatPauseWarning(err.response, deliveryExecutions), {encodeHtml: false});\n                                        resolve();\n                                    } else {\n                                        reject(err);\n                                    }\n                                });\n                            });\n                    });\n                }\n\n                listBox.getElement().on('click', '.pause', function (e) {\n                    var deliveryId = $(this).data('delivery');\n\n                    loadingBar.start();\n\n                    //prevent clicking the parent link that goes to the monitoring screen\n                    e.stopPropagation();\n                    e.preventDefault();\n\n                    //get list of all test taker for the selected delivery\n                    proxySessions.read({delivery: deliveryId}).then(function(sessions) {\n                        var deliveryExecutions = {};\n                        var inProgressExecs;\n                        inProgressExecs = _.filter(sessions, function (session) {\n                            deliveryExecutions[session.id] = session;\n                            return (session.state && session.state.status === _status.getStatus('inprogress').code);\n                        });\n\n                        if (inProgressExecs.length) {\n                            return pause(deliveryId, inProgressExecs, deliveryExecutions);\n                        } else {\n                            feedback().info(__('There is no delivery in progress'));\n                        }\n                    }).catch(function (err) {\n                        handleOnDisconnect(err);\n                        appController.onError(err);\n                    }).then(function() {\n                        loadingBar.stop();\n                    });\n                });\n\n                refresh();\n\n            }).catch(function(err) {\n                handleOnDisconnect(err);\n                appController.onError(err);\n                loadingBar.stop();\n            });\n        }\n    };\n});\n\n","/*\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2015 (original work) Open Assessment Technologies SA ;\n *\n */\ndefine('taoProctoring/component/breadcrumbs',['ui/breadcrumbs'], function(breadcrumbs){\n    'use strict';\n\n    /**\n     * Wrap the generic breadcrumbs component into a very specialized\n     *\n     * @param {JQyery} $container\n     * @param {Array} [crumbs]\n     * @returns {unresolved}\n     */\n    return function breadcrumbFactory($container, crumbs){\n        return breadcrumbs({\n            breadcrumbs : crumbs,\n            renderTo: $container.find('.header'),\n            replace: true,\n            cls : 'action-bar horizontal-action-bar'\n        });\n    };\n});\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2015 (original work) Open Assessment Technologies SA ;\n */\n/**\n * @author Jean-Sébastien Conan <jean-sebastien.conan@vesperiagroup.com>\n */\ndefine('taoProctoring/controller/Delivery/manage',[\n    'jquery',\n    'i18n',\n    'helpers',\n    'layout/loading-bar',\n    'util/encode',\n    'ui/feedback',\n    'ui/dialog',\n    'taoProctoring/component/breadcrumbs',\n    'ui/datatable'\n], function ($, __, helpers, loadingBar, encode, feedback, dialog, breadcrumbsFactory) {\n    'use strict';\n\n    /**\n     * The CSS scope\n     * @type {String}\n     */\n    var cssScope = '.delivery-manager';\n\n    // the page is always loading data when starting\n    loadingBar.start();\n\n    /**\n     * Controls the taoProctoring delivery page\n     *\n     * @type {Object}\n     */\n    var proctorDeliveryIndexCtlr = {\n        /**\n         * Entry point of the page\n         */\n        start : function start() {\n            var $container = $(cssScope);\n            var $list = $container.find('.list');\n            var crumbs = $container.data('breadcrumbs');\n            var dataset = $container.data('set');\n            var deliveryId = $container.data('delivery');\n            var testCenterId = $container.data('testcenter');\n            var assignUrl = helpers._url('testTakers', 'Delivery', 'taoProctoring', {delivery : deliveryId, testCenter : testCenterId});\n            var removeUrl = helpers._url('removeTestTakers', 'Delivery', 'taoProctoring', {delivery : deliveryId, testCenter : testCenterId});\n            var serviceUrl = helpers._url('deliveryTestTakers', 'Delivery', 'taoProctoring', {delivery : deliveryId, testCenter : testCenterId});\n            var monitoringUrl = helpers._url('monitoring', 'Delivery', 'taoProctoring', {delivery : deliveryId, testCenter: testCenterId});\n\n            var bc = breadcrumbsFactory($container, crumbs);\n\n            // request the server with a selection of test takers\n            var request = function(url, selection, message) {\n                if (selection && selection.length) {\n                    loadingBar.start();\n\n                    $.ajax({\n                        url: url,\n                        data: {\n                            testtaker: selection\n                        },\n                        dataType : 'json',\n                        type: 'POST',\n                        error: function() {\n                            loadingBar.stop();\n                        }\n                    }).done(function(response) {\n                        loadingBar.stop();\n\n                        if (response && response.success) {\n                            if (message) {\n                                feedback().success(message);\n                            }\n                            $list.datatable('refresh');\n                        } else {\n                            feedback().error(__('Something went wrong ...') + '<br>' + encode.html(response.error), {encodeHtml: false});\n                        }\n                    });\n                }\n            };\n\n            // request the server to remove the selected test takers\n            var remove = function(selection) {\n                request(removeUrl, selection, __('Test takers have been removed'));\n            };\n\n            $list\n                .on('query.datatable', function() {\n                    loadingBar.start();\n                })\n                .on('load.datatable', function() {\n                    loadingBar.stop();\n                })\n                .datatable({\n                    url: serviceUrl,\n                    status: {\n                        empty: __('No assigned test takers'),\n                        available: __('Assigned test takers'),\n                        loading: __('Loading')\n                    },\n                    tools: [{\n                        id: 'refresh',\n                        icon: 'reset',\n                        title: __('Refresh the page'),\n                        label: __('Refresh'),\n                        action: function() {\n                            $list.datatable('refresh');\n                        }\n                    }, {\n                        id: 'back',\n                        icon: 'preview',\n                        title: __('Return to the session monitoring'),\n                        label: __('Monitoring'),\n                        action: function() {\n                            window.location.href = monitoringUrl;\n                        }\n                    }, {\n                        id: 'assign',\n                        icon: 'add',\n                        title: __('Assign more test takers to this session'),\n                        label: __('Add test takers'),\n                        action: function() {\n                            window.location.href = assignUrl;\n                        }\n                    }, {\n                        id: 'remove',\n                        icon: 'remove',\n                        title: __('Remove the selected test takers from the session'),\n                        label: __('Remove'),\n                        massAction: true,\n                        action: function(selection) {\n                            dialog({\n                                message: __('The test takers will be removed from this session. Continue ?'),\n                                autoRender: true,\n                                autoDestroy: true,\n                                onOkBtn: function() {\n                                    remove(selection);\n                                }\n                            });\n                        }\n                    }],\n                    actions: [{\n                        id: 'remove',\n                        icon: 'remove',\n                        title: __('Remove the test taker from the session'),\n                        action: function(id) {\n                            dialog({\n                                autoRender: true,\n                                autoDestroy: true,\n                                message: __('The test taker will be removed from this session. Continue ?'),\n                                onOkBtn: function() {\n                                    remove([id]);\n                                }\n                            });\n                        }\n                    }],\n                    selectable: true,\n                    model: [{\n                        id: 'firstname',\n                        label: __('First name')\n                    }, {\n                        id: 'lastname',\n                        label: __('Last name')\n                    }, {\n                        id: 'identifier',\n                        label: __('Identifier')\n                    }, {\n                        id: 'status',\n                        label: __('Status')\n                    }]\n                }, dataset);\n        }\n    };\n\n    return proctorDeliveryIndexCtlr;\n});\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2016 (original work) Open Assessment Technologies SA ;\n */\n/**\n * @author Jean-Sébastien Conan <jean-sebastien.conan@vesperiagroup.com>\n */\ndefine('taoProctoring/component/extraTime/encoder',[\n    'core/format',\n    'core/encoder/time'\n], function (format, timeEncoder) {\n    'use strict';\n\n    /**\n     * Encodes the extra time in a human readable way\n     * @param {Number} extraTime - The extra time to encode\n     * @param {Number} consumedTime - The already consumed time\n     * @param {String} [pattern] - The display pattern used when no time is consumed (default: %s)\n     * @param {Number} [unit] - The time unit\n     * @returns {String}\n     */\n    function encodeExtraTime(extraTime, consumedTime, pattern, unit) {\n        var encoded = '';\n\n        pattern = pattern || '%s';\n        unit = unit || 1;\n\n        if (extraTime) {\n            if (consumedTime) {\n                encoded = timeEncoder.encode(Math.min(consumedTime, extraTime)) + '/' + timeEncoder.encode(extraTime);\n            } else {\n                encoded = format(pattern, extraTime / unit);\n            }\n\n            encoded = ' +' + encoded;\n        }\n\n        return encoded;\n    }\n\n    return encodeExtraTime;\n});\n\n","\ndefine('tpl!taoProctoring/component/extraTime/extraTime', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, functionType=\"function\", escapeExpression=this.escapeExpression, self=this, helperMissing=helpers.helperMissing;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", stack1, helper, options;\n  buffer += \"\\n    <div class=\\\"multiple\\\">\\n        <p>\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"The action will be applied to the following session\", options) : helperMissing.call(depth0, \"__\", \"The action will be applied to the following session\", options)))\n    + \":</p>\\n        <ul class=\\\"plain applicables\\\">\\n            \";\n  stack1 = helpers.each.call(depth0, (depth0 && depth0.allowedResources), {hash:{},inverse:self.noop,fn:self.program(2, program2, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n        </ul>\\n    </div>\\n\\n    \";\n  stack1 = helpers['if'].call(depth0, ((stack1 = (depth0 && depth0.deniedResources)),stack1 == null || stack1 === false ? stack1 : stack1.length), {hash:{},inverse:self.noop,fn:self.program(7, program7, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n\\n    \";\n  return buffer;\n  }\nfunction program2(depth0,data) {\n  \n  var buffer = \"\", stack1, helper;\n  buffer += \"\\n            <li data-resource=\\\"\";\n  if (helper = helpers.id) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.id); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\">\\n                <span class=\\\"resource-label\\\">\";\n  if (helper = helpers.label) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.label); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"</span>\\n                \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.remainingStr), {hash:{},inverse:self.noop,fn:self.program(3, program3, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n                \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.extraTimeStr), {hash:{},inverse:self.noop,fn:self.program(5, program5, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n            </li>\\n            \";\n  return buffer;\n  }\nfunction program3(depth0,data) {\n  \n  var buffer = \"\", stack1, helper;\n  buffer += \"<span class=\\\"remaining\\\">\";\n  if (helper = helpers.remainingStr) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.remainingStr); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"</span>\";\n  return buffer;\n  }\n\nfunction program5(depth0,data) {\n  \n  var buffer = \"\", stack1, helper;\n  buffer += \"<span class=\\\"time\\\">(\";\n  if (helper = helpers.extraTimeStr) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.extraTimeStr); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \")</span>\";\n  return buffer;\n  }\n\nfunction program7(depth0,data) {\n  \n  var buffer = \"\", stack1, helper, options;\n  buffer += \"\\n    <p>\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"However, the action will not be applied to the following sessions\", options) : helperMissing.call(depth0, \"__\", \"However, the action will not be applied to the following sessions\", options)))\n    + \":</p>\\n    <ul class=\\\"plain no-applicables\\\">\\n        \";\n  stack1 = helpers.each.call(depth0, (depth0 && depth0.deniedResources), {hash:{},inverse:self.noop,fn:self.program(8, program8, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    </ul>\\n    \";\n  return buffer;\n  }\nfunction program8(depth0,data) {\n  \n  var buffer = \"\", stack1, helper;\n  buffer += \"\\n        <li data-resource=\\\"\";\n  if (helper = helpers.id) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.id); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\">\\n            <span class=\\\"resource-label\\\">\";\n  if (helper = helpers.label) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.label); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"</span>\\n            <span class=\\\"reason\\\">(\";\n  if (helper = helpers.reason) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.reason); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \")</span>\\n        </li>\\n        \";\n  return buffer;\n  }\n\nfunction program10(depth0,data) {\n  \n  var buffer = \"\", helper, options;\n  buffer += \"\\n    <p>\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"The action cannot be applied, no eligible sessions found\", options) : helperMissing.call(depth0, \"__\", \"The action cannot be applied, no eligible sessions found\", options)))\n    + \"</p>\\n    \";\n  return buffer;\n  }\n\n  buffer += \"<div class=\\\"bulk-action-popup\\\">\\n    <h2 class=\\\"title\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Action\", options) : helperMissing.call(depth0, \"__\", \"Action\", options)))\n    + \": \";\n  if (helper = helpers.actionName) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.actionName); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"</h2>\\n\\n    \";\n  stack1 = helpers['if'].call(depth0, ((stack1 = (depth0 && depth0.allowedResources)),stack1 == null || stack1 === false ? stack1 : stack1.length), {hash:{},inverse:self.program(10, program10, data),fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n\\n    <div class=\\\"form\\\">\\n        <p>\\n            <label for=\\\"input-extra-time\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Extra time\", options) : helperMissing.call(depth0, \"__\", \"Extra time\", options)))\n    + \":</label>\\n            <input type=\\\"text\\\" id=\\\"input-extra-time\\\" data-control=\\\"time\\\" value=\\\"\";\n  if (helper = helpers.time) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.time); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" maxlength=\\\"4\\\" size=\\\"4\\\" />\\n            <label for=\\\"input-extra-time\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"minutes\", options) : helperMissing.call(depth0, \"__\", \"minutes\", options)))\n    + \"</label>\\n        </p>\\n    </div>\\n    <p>\\n        <strong>\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Note\", options) : helperMissing.call(depth0, \"__\", \"Note\", options)))\n    + \":</strong>\\n        <em>\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"the already granted time will be replaced by the new value\", options) : helperMissing.call(depth0, \"__\", \"the already granted time will be replaced by the new value\", options)))\n    + \"</em>\\n    </p>\\n\\n    <div class=\\\"actions\\\">\\n        <div class=\\\"feedback-error small hidden\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"The extra time must be a number\", options) : helperMissing.call(depth0, \"__\", \"The extra time must be a number\", options)))\n    + \"</div>\\n        <button class=\\\"btn btn-info small action done\\\" data-control=\\\"done\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"OK\", options) : helperMissing.call(depth0, \"__\", \"OK\", options)))\n    + \"</button>\\n        <a href=\\\"#\\\" class=\\\"btn action cancel\\\" title=\\\"\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"cancel the action\", options) : helperMissing.call(depth0, \"__\", \"cancel the action\", options)))\n    + \"\\\" data-control=\\\"cancel\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"cancel\", options) : helperMissing.call(depth0, \"__\", \"cancel\", options)))\n    + \"</a>\\n    </div>\\n\\n</div>\\n\";\n  return buffer;\n  });\n});\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2016 (original work) Open Assessment Technologies SA ;\n */\n/**\n * @author Jean-Sébastien Conan <jean-sebastien.conan@vesperiagroup.com>\n */\ndefine('taoProctoring/component/extraTime/extraTime',[\n    'jquery',\n    'lodash',\n    'i18n',\n    'core/encoder/time',\n    'ui/component',\n    'ui/hider',\n    'taoProctoring/component/extraTime/encoder',\n    'tpl!taoProctoring/component/extraTime/extraTime',\n    'ui/modal'\n], function ($, _, __, timeEncoder, component, hider, encodeExtraTime, extraTimeTpl) {\n    'use strict';\n\n    /**\n     * Some default config\n     * @type {Object}\n     * @private\n     */\n    var _defaults = {\n        unit: 60,           // default time unit is minutes\n        deniedResources: []\n    };\n\n    /**\n     * Creates a form that manage the extra time allowed to test takers\n     *\n     * @param {Object} config\n     * @param {String} config.actionName - the action name (use in the title text)\n     * @param {Array} config.allowedResources - list of allowed resources to be displayed\n     * @param {Array} [config.deniedResources] - list of denied resources to be displayed\n     * @param {Number} [config.unit] - the time is stored in seconds, but can be handled in other time units, by default this is minutes (60)\n     * @fires cancel when the component is closed without validation\n     * @fires ok when the ok button is clicked\n     */\n    function extraTimeFactory(config) {\n        var initConfig = _.defaults(config || {}, _defaults);\n        var timeUnit = initConfig.unit || _defaults.unit;\n\n        _.forEach(initConfig.allowedResources, function(resource) {\n            var remaining = parseFloat(resource.remaining) || 0;\n            var extraTime = parseFloat(resource.extraTime);\n            var consumedTime = parseFloat(resource.consumedTime);\n\n            if (remaining) {\n                resource.remainingStr = timeEncoder.encode(remaining);\n            }\n\n            resource.extraTimeStr = encodeExtraTime(extraTime, consumedTime, __('%s minutes more'), timeUnit);\n        });\n\n        return component()\n            .setTemplate(extraTimeTpl)\n            .on('render', function () {\n                var self = this;\n                var $cmp = this.getElement();\n                var $time = $cmp.find('[data-control=\"time\"]');\n                var $error = $cmp.find('.feedback-error');\n                var $ok = $cmp.find('[data-control=\"done\"]');\n\n                /**\n                 * Validate the input time\n                 * @returns {Boolean}\n                 */\n                function checkInputError() {\n                    var value = $time.val().trim();\n\n                    // use Number() instead of parseInt/parseFloat to prevent number with text like \"10$$\" to be\n                    // converted to number, as we need to avoid that case\n                    var time = Number(value);\n\n                    // here we also check with the parseFloat to detect non decimal notation,\n                    // otherwise numbers like 0x10 will be accepted, but misunderstood when applied\n                    var error = isNaN(time) || time !== parseFloat(value);\n\n                    if (error) {\n                        hider.show($error);\n                        $ok.attr('disabled', true);\n                        focus();\n                    } else {\n                        $ok.removeAttr('disabled');\n                        hider.hide($error);\n                    }\n\n                    return error;\n                }\n\n                /**\n                 * Submit the data\n                 */\n                function submit() {\n                    if (!checkInputError()) {\n                        /**\n                         * The user has input a time and submitted the data\n                         * @event ok\n                         * @param {Number} time\n                         */\n                        self.trigger('ok', parseFloat($time.val()) * timeUnit);\n                        $cmp.modal('close');\n                    }\n                }\n\n                /**\n                 * Cancel the dialog\n                 */\n                function cancel() {\n                    /**\n                     * The dialog is just canceled\n                     * @event cancel\n                     */\n                    self.trigger('cancel');\n                    $cmp.modal('close');\n                }\n\n                /**\n                 * Set the focus on the input\n                 */\n                function focus() {\n                    $time.focus().select();\n                }\n\n                // we need to find the common extra time for all selected test takers\n                $time.val(_.reduce(initConfig.allowedResources, function(time, testTaker) {\n                    return Math.max(time, testTaker && testTaker.extraTime || 0);\n                }, 0) / timeUnit);\n\n                $cmp\n                    .addClass('modal')\n                    .on('closed.modal', function () {\n                        self.destroy();\n                    })\n                    .on('change', $time, function() {\n                        checkInputError();\n                    })\n                    .on('keyup', function(event) {\n                        if (13 === event.keyCode) {\n                            submit();\n                        } else {\n                            checkInputError();\n                        }\n                    })\n                    .on('click', '.action', function (event) {\n                        var $btn = $(event.target).closest('.action');\n                        var control = $btn.data('control');\n\n                        event.preventDefault();\n\n                        if ('done' === control) {\n                            submit();\n                        } else {\n                            cancel();\n                        }\n                    })\n                    .modal({\n                        width: 800\n                    });\n\n                focus();\n            })\n            .on('destroy', function () {\n                this.getElement()\n                    .removeClass('modal')\n                    .modal('destroy');\n            })\n            .init(initConfig);\n    }\n\n    return extraTimeFactory;\n});\n\n","\ndefine('tpl!taoProctoring/templates/delivery/monitoring', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, functionType=\"function\", escapeExpression=this.escapeExpression, self=this;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", stack1, helper;\n  buffer += \"<h1>\";\n  if (helper = helpers.title) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.title); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"</h1>\";\n  return buffer;\n  }\n\n  buffer += \"<div class=\\\"content\\\">\\n    \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.title), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    <div class=\\\"panel\\\"></div>\\n    <div class=\\\"list clearfix\\\"></div>\\n</div>\\n\";\n  return buffer;\n  });\n});\n\n","\ndefine('tpl!taoProctoring/templates/delivery/deliveryLink', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression;\n\n\n  buffer += \"<a class=\\\"elipsis\\\" href=\\\"\";\n  if (helper = helpers.url) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.url); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" title=\\\"\";\n  if (helper = helpers.label) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.label); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\\">\";\n  if (helper = helpers.label) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.label); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"</a>\";\n  return buffer;\n  });\n});\n\n","\ndefine('tpl!taoProctoring/templates/delivery/statusFilter', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, functionType=\"function\", escapeExpression=this.escapeExpression, self=this;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", stack1, helper;\n  buffer += \"\\n    <option value=\\\"\";\n  if (helper = helpers.code) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.code); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\">\";\n  if (helper = helpers.label) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.label); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"</option>\\n    \";\n  return buffer;\n  }\n\n  buffer += \"<select name=\\\"filter[status]\\\" class=\\\"filter status select2\\\">\\n    <option value=\\\"\\\" selected></option>\\n    \";\n  stack1 = helpers.each.call(depth0, (depth0 && depth0.statuses), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n</select>\";\n  return buffer;\n  });\n});\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2015 (original work) Open Assessment Technologies SA ;\n */\n/**\n * @author Jean-Sébastien Conan <jean-sebastien.conan@vesperiagroup.com>\n */\ndefine('taoProctoring/controller/Delivery/monitoring',[\n    'jquery',\n    'lodash',\n    'i18n',\n    'module',\n    'controller/app',\n    'util/url',\n    'layout/loading-bar',\n    'core/encoder/time',\n    'util/encode',\n    'ui/feedback',\n    'ui/dialog',\n    'ui/bulkActionPopup',\n    'ui/cascadingComboBox',\n    'ui/container',\n    'taoProctoring/component/proxy',\n    'taoProctoring/component/extraTime/extraTime',\n    'taoProctoring/component/extraTime/encoder',\n    'taoProctoring/helper/status',\n    'tpl!taoProctoring/templates/delivery/monitoring',\n    'tpl!taoProctoring/templates/delivery/deliveryLink',\n    'tpl!taoProctoring/templates/delivery/statusFilter',\n    'ui/datatable',\n    'jqueryui',\n    'select2'\n], function (\n    $,\n    _,\n    __,\n    module,\n    appController,\n    urlHelper,\n    loadingBar,\n    timeEncoder,\n    encode,\n    feedback,\n    dialog,\n    bulkActionPopup,\n    cascadingComboBox,\n    containerFactory,\n    proxyFactory,\n    extraTimePopup,\n    encodeExtraTime,\n    _status,\n    monitoringTpl,\n    deliveryLinkTpl,\n    statusFilterTpl\n) {\n    'use strict';\n\n    /**\n     * The CSS scope\n     * @type {String}\n     */\n    var cssScope = '.delivery-monitoring';\n\n    var terminateUrl = urlHelper.route('terminateExecutions', 'Monitor', 'taoProctoring');\n    var pauseUrl = urlHelper.route('pauseExecutions', 'Monitor', 'taoProctoring');\n    var authorizeUrl = urlHelper.route('authoriseExecutions', 'Monitor', 'taoProctoring');\n    var extraTimeUrl = urlHelper.route('extraTime', 'Monitor', 'taoProctoring');\n    var reportUrl = urlHelper.route('reportExecutions', 'Monitor', 'taoProctoring');\n    var serviceUrl = urlHelper.route('monitor', 'Monitor', 'taoProctoring');\n    var executionsUrl = urlHelper.route('deliveryExecutions', 'Monitor', 'taoProctoring');\n    var historyUrl = urlHelper.route('index', 'Reporting', 'taoProctoring');\n    var deliveryUrl = urlHelper.route('monitoring', 'Delivery', 'taoProctoring');\n\n    /**\n     * The extra time unit: by default in minutes\n     * @type {Number}\n     */\n    var extraTimeUnit = 60;\n\n    /**\n     * Filters the disconnection errors\n     * @param {Error} err\n     */\n    function handleOnDisconnect(err) {\n        if (err.code === 403) {\n            //we just leave if any 403 occurs\n            window.location.reload(true);\n        }\n    }\n\n    /**\n     * Validates the params to be sent along the provider's requests\n     * @param params\n     * @returns {boolean}\n     */\n    function validateParams(params) {\n        return _.isPlainObject(params) && (_.isUndefined(params.delivery) || !_.isEmpty(params.delivery)) && !_.isEmpty(params.execution);\n    }\n\n    // the page is always loading data when starting\n    loadingBar.start();\n\n    /**\n     * Controls the taoProctoring delivery page\n     *\n     * @type {Object}\n     */\n    return {\n        /**\n         * Entry point of the page\n         */\n        start : function start() {\n            var container = containerFactory().changeScope(cssScope).write(monitoringTpl());\n            var $content = container.find('.content');\n            var $list = container.find('.list');\n            var pageParams = module.config();\n            var deliveryId = pageParams.delivery;\n            var context = pageParams.context;\n            var defaultTag = pageParams.defaultTag;\n            var defaultAvailableLabel = __('Current sessions');\n            var dataset;\n            var extraFields;\n            var categories;\n            var timeHandlingButton;\n            var printReportButton;\n            var tools = [];\n            var model = [];\n            var actionButtons;\n            var highlightRows = [];\n            var actionList;\n            var serviceParams = {};\n            var sessionsHistoryUrl = historyUrl;\n\n            appController.on('change.deliveryMonitoring', function() {\n                appController.off('.deliveryMonitoring');\n                container.destroy();\n            });\n\n            proxyFactory('ajax').init({\n                actions: {\n                    read: serviceUrl,\n                    authorize: {\n                        url: authorizeUrl,\n                        validate: validateParams\n                    },\n                    pause: {\n                        url: pauseUrl,\n                        validate: validateParams\n                    },\n                    terminate: {\n                        url: terminateUrl,\n                        validate: validateParams\n                    },\n                    report: {\n                        url: reportUrl,\n                        validate: validateParams\n                    },\n                    extraTime: {\n                        url: extraTimeUrl,\n                        validate: validateParams\n                    }\n                }\n            }).then(function(proxyExecutions) {\n                // request the server with a selection of test takers\n                function request(action, selection, data, message) {\n                    var params;\n                    if (selection && selection.length) {\n                        loadingBar.start();\n\n                        params = _.merge({\n                            execution: selection\n                        }, data);\n\n                        if (deliveryId) {\n                            params.delivery = deliveryId;\n                        }\n\n                        proxyExecutions.action(action, params)\n                            .then(function() {\n                                if (message) {\n                                    feedback().success(message);\n                                }\n                                $list.datatable('refresh');\n                            })\n                            .catch(function(err) {\n                                var messageContext = '', unprocessed;\n                                var responseData;\n                                if (err.response) {\n                                    responseData = err.response.data;\n                                    unprocessed = _.map(responseData.unprocessed, function (id) {\n                                        var execution = getExecutionData(id);\n                                        if (execution) {\n                                            return __('Session %s - %s has not been processed', execution.delivery, execution.start_time);\n                                        }\n                                    });\n\n                                    if (unprocessed.length) {\n                                        messageContext += '<br>' + unprocessed.join('<br>');\n                                    }\n                                    if (responseData.error) {\n                                        messageContext += '<br>' + encode.html(responseData.error);\n                                    }\n                                } else {\n                                    handleOnDisconnect(err);\n                                }\n                                feedback().error(__('Something went wrong ...') + '<br>' + messageContext, {encodeHtml: false});\n                            })\n                            .then(function() {\n                                loadingBar.stop();\n                            });\n                    }\n                }\n\n                // request the server to authorize the selected delivery executions\n                function authorize(selection) {\n                    execBulkAction('authorize', __('Authorize Session'), selection, function(sel, reason){\n                        request('authorize', sel, {reason: reason}, __('Sessions authorized'));\n                    });\n                }\n\n                // request the server to pause the selected delivery executions\n                function pause(selection) {\n                    execBulkAction('pause', __('Pause Session'), selection, function(sel, reason){\n                        request('pause', sel, {reason: reason}, __('Sessions paused'));\n                    });\n                }\n\n                // request the server to terminate the selected delivery executions\n                function terminate(selection) {\n                    execBulkAction('terminate', __('Terminate Session'), selection, function(sel, reason){\n                        request('terminate', sel, {reason: reason}, __('Sessions terminated'));\n                    });\n                }\n\n                // report irregularities on the selected delivery executions\n                function report(selection) {\n                    execBulkAction( 'report', __('Report Irregularity'), selection, function(sel, reason){\n                        request('report', sel, {reason: reason}, __('Sessions reported'));\n                    });\n                }\n\n                function print(selection, type) {\n                    execBulkAction('print', __('Print Score'), selection, function(sel){\n                        window.open(urlHelper.route(type,  'Reporting', 'taoProctoring', {'id' : sel}), 'printReport' + JSON.stringify(sel));\n                    });\n                }\n\n                function terminateAndIrregularity(selection) {\n                    dialog({\n                        message: __('Please, make your selection'),\n                        autoRender: true,\n                        autoDestroy: true,\n                        buttons: [{\n                            id: 'terminate',\n                            type: 'error',\n                            label: __('Terminate session'),\n                            icon: 'stop',\n                            close: true,\n                            action: function() {terminate(selection);}\n                        },{\n                            id: 'irregularity',\n                            type: 'info',\n                            label: __('Report irregularity'),\n                            icon: 'delivery-small',\n                            close: true,\n                            action: function(){report(selection);}\n                        }]\n                    });\n                }\n\n                // display the session history\n                function showHistory(selection) {\n                    var monitoringRoute = window.location + '';\n                    var urlParams = {\n                        session: selection\n                    };\n                    if (deliveryId) {\n                        urlParams.delivery = deliveryId;\n                    }\n                    appController.getRouter().redirect(urlHelper.build(sessionsHistoryUrl, urlParams)).then(function() {\n                        appController.trigger('set-referrer', monitoringRoute);\n                    });\n                }\n\n                // print the score reports\n                function printReport(selection) {\n                    print(selection, 'printReport');\n                }\n\n                // print the results of the session\n                function printResults(selection) {\n                    print(selection, 'printRubric');\n                }\n\n                // display the time handling popup\n                function timeHandling(selection) {\n                    var _selection = _.isArray(selection) ? selection : [selection];\n                    var config = _.merge(listSessions('time', _selection), {\n                        renderTo : $content,\n                        actionName : __('Grant Extra Time'),\n                        unit: extraTimeUnit // input extra time in minutes\n                    });\n\n                    extraTimePopup(config).on('ok', function(time){\n                        request('extraTime', _selection, {time: time}, __('Extra time granted'));\n                    });\n                }\n\n                /**\n                 * Check if an action is available with respect to the provided state\n                 * @param {String} what\n                 * @param {Object} state\n                 * @returns {Boolean}\n                 */\n                function canDo(what, state) {\n                    var status;\n                    if (state && state.status) {\n                        status = _status.getStatusByCode(state.status);\n                        return status && status.can[what] === true;\n                    }\n                    return false;\n                }\n\n                /**\n                 * Verify and reformat test taker data for the execBulkAction's need\n                 * @param {Object} testTakerData\n                 * @param {String} actionName\n                 * @returns {Object}\n                 */\n                function verifyDelivery(testTakerData, actionName){\n                    var deliveryName, formatted, status;\n\n                    if (_.isObject(testTakerData.delivery)) {\n                        deliveryName = testTakerData.delivery.label;\n                    } else {\n                        deliveryName = $(testTakerData.delivery).text();\n                    }\n                    formatted = {\n                        id : testTakerData.id,\n                        label: deliveryName + ' [' + testTakerData.start_time + '] ' + testTakerData.test_taker_first_name + ' ' + testTakerData.test_taker_last_name\n                    };\n                    status = _status.getStatusByCode(testTakerData.state.status);\n\n                    if(status){\n                        formatted.allowed = (status.can[actionName] === true);\n                        if(!formatted.allowed){\n                            formatted.reason = status.can[actionName];\n                        }\n                    }\n                    if (testTakerData.timer) {\n                        formatted.extraTime = testTakerData.timer.extraTime;\n                        formatted.consumedTime = testTakerData.timer.consumedExtraTime;\n                        formatted.remaining_time = testTakerData.timer.remaining_time;\n                    }\n                    return formatted;\n                }\n\n                /**\n                 * Find the execution row data from its uri\n                 *\n                 * @param {String} uri\n                 * @returns {Object}\n                 */\n                function getExecutionData(uri){\n                    return _.find(dataset.data, {id : uri});\n                }\n\n                /**\n                 * Gets the list of allowed and forbidden test sessions from the provided selection\n                 * @param {String} actionName\n                 * @param {Array} selection\n                 * @returns {Object} Returns the config object that contains the lists of allowed and forbidden test sessions\n                 */\n                function listSessions(actionName, selection) {\n                    var allowedDeliveries = [];\n                    var forbiddenDeliveries = [];\n\n                    _.each(selection, function (uri) {\n                        var testTakerData = getExecutionData(uri);\n                        var checkedDelivery;\n                        if(testTakerData){\n                            checkedDelivery = verifyDelivery(testTakerData, actionName);\n                            if(checkedDelivery.allowed){\n                                allowedDeliveries.push(checkedDelivery);\n                            }else{\n                                forbiddenDeliveries.push(checkedDelivery);\n                            }\n                        }\n                    });\n\n                    return {\n                        resourceType : 'session',\n                        allowedResources: allowedDeliveries,\n                        deniedResources: forbiddenDeliveries\n                    };\n                }\n\n                /**\n                 * Exec\n                 * @param {String} actionName\n                 * @param {String} actionTitle\n                 * @param {Array|String} selection\n                 * @param {Function} cb\n                 * @returns {undefined}\n                 */\n                function execBulkAction(actionName, actionTitle, selection, cb){\n                    var _selection = _.isArray(selection) ? selection : [selection];\n                    var askForReason = (categories[actionName] && categories[actionName].categoriesDefinitions && categories[actionName].categoriesDefinitions.length);\n                    var config = _.merge(listSessions(actionName, _selection), {\n                        renderTo : $content,\n                        actionName : actionTitle,\n                        reason : askForReason,\n                        reasonRequired: true,\n                        categoriesSelector: cascadingComboBox(categories[actionName] || {})\n                    });\n\n                    if (!config.allowedResources.length) {\n                        if (_selection.length > 1) {\n                            feedback().warning(__('No report available for these test sessions'));\n                        } else {\n                            feedback().warning(__('No report available for this test session'));\n                        }\n                    } else {\n                        bulkActionPopup(config).on('ok', function(reason){\n                            //execute callback\n                            if(_.isFunction(cb)){\n                                cb(_selection, reason);\n                            }\n                        });\n                    }\n                }\n\n                /**\n                 * Return html for filter\n                 * @returns {String}\n                 */\n                function buildStatusFilter(){\n                    return statusFilterTpl({statuses: _status.getStatuses()});\n                }\n\n                /**\n                 * Prepare data to be sent on server + internal state saving\n                 * @param {Boolean} applyTags\n                 */\n                function setTagUsage(applyTags) {\n                    var $filter;\n                    if (defaultTag) {\n\n                        if (!$list.find('.tag').length) {\n                            $filter = $('<span class=\"filter\"><input type=\"hidden\" name=\"tag\" class=\"tag\" value=\"' + applyTags + '\"/></span>');\n                            $filter.appendTo($list);\n                        }\n\n                        $list.find('.tag').val(applyTags);\n                        $list.data('applytags', applyTags);\n\n                        if (applyTags) {\n                            $list.find('.action-bar').children('.tool-tag').hide();\n                        } else {\n                            $list.find('.action-bar').children('.tool-notag').hide();\n                        }\n                    }\n                }\n\n                function getTagsUsage() {\n                    return $list.data('applytags');\n                }\n\n                /**\n                 * Set initial datatable filters\n                 */\n                function setInitialFilters()\n                {\n                    var now = new Date();\n                    var nowStr =\n                        now.getFullYear() + '/' +\n                        (\"0\" + (now.getMonth() + 1)).slice(-2) + '/' +\n                        (\"0\" + (now.getDate())).slice(-2);\n\n                    $('#start_time_filter').val(nowStr + ' - ' + nowStr);\n\n                    if (defaultTag) {\n                        setTagUsage(true);\n                    }\n\n                    $list.datatable('filter');\n                }\n\n                /**\n                 * Additional action perfomed with filter element\n                 * @param {jQueryElement} $el\n                 */\n                function statusFilterHandler($el) {\n                    $el.select2({\n                        dropdownAutoWidth: true,\n                        placeholder: __('Filter'),\n                        minimumResultsForSearch: Infinity,\n                        allowClear: true\n                    });\n                }\n\n                if (deliveryId) {\n                    serviceParams.delivery = deliveryId;\n                }\n                if (context) {\n                    serviceParams.context = context;\n                }\n\n                return proxyExecutions.read(serviceParams).then(function(data) {\n                    dataset = data.set;\n                    extraFields = data.extrafields;\n                    categories = data.categories;\n                    deliveryId = data.delivery || deliveryId;\n                    context = data.context || context;\n                    timeHandlingButton = data.timeHandling;\n                    printReportButton = data.printReportButton;\n                    sessionsHistoryUrl = data.historyUrl || historyUrl;\n\n                    if (deliveryId) {\n                        serviceParams.delivery = deliveryId;\n                    }\n                    if (context) {\n                        serviceParams.context = context;\n                    }\n\n                    // tool: page refresh\n                    tools.push({\n                        id: 'refresh',\n                        icon: 'reset',\n                        title: __('Refresh the page'),\n                        label: __('Refresh'),\n                        action: function() {\n                            $list.datatable('refresh');\n                        }\n                    });\n\n                    if (defaultTag) {\n                        tools.push({\n                            id: 'notag',\n                            icon: 'filter',\n                            css: 'btn-warning',\n                            label: __('Remove default tag filtering'),\n                            title: __('Remove default tag filtering'),\n                            action: function () {\n                                setTagUsage(false);\n                                $list.datatable('filter');\n                            }\n                        });\n                        tools.push({\n                            id: 'tag',\n                            icon: 'filter',\n                            title: __('Apply default tag'),\n                            label: __('Apply default tag'),\n                            action: function () {\n                                setTagUsage(true);\n                                $list.datatable('filter');\n                            }\n                        });\n                    }\n\n                    // tool: authorize the executions\n                    tools.push({\n                        id: 'authorize',\n                        icon: 'play',\n                        title: __('Authorize sessions'),\n                        label: __('Authorize'),\n                        massAction: true,\n                        action: authorize\n                    });\n\n                    // tool: pause the executions\n                    tools.push({\n                        id: 'pause',\n                        icon: 'pause',\n                        title: __('Pause sessions'),\n                        label: __('Pause'),\n                        massAction: true,\n                        action: pause\n                    });\n\n                    // tool: terminate the executions\n                    tools.push({\n                        id: 'terminate',\n                        icon: 'stop',\n                        title: __('Terminate sessions'),\n                        label: __('Terminate'),\n                        massAction: true,\n                        action: terminate\n                    });\n\n                    // tool: report irregularities\n                    tools.push({\n                        id: 'irregularity',\n                        icon: 'delivery-small',\n                        title: __('Report irregularities'),\n                        label: __('Report'),\n                        massAction: true,\n                        action: report\n                    });\n\n                    // tool: display sessions history\n                    tools.push({\n                        id: 'history',\n                        icon: 'history',\n                        title: __('Show the detailed session history'),\n                        label: __('History'),\n                        massAction: true,\n                        action: showHistory\n                    });\n\n                    // tools: print score report\n                    tools.push({\n                        id : 'printRubric',\n                        title : __('Print the score report'),\n                        icon : 'print',\n                        label : __('Print Score'),\n                        massAction: true,\n                        action : printResults\n                    });\n\n                    // tools: print results\n                    if (printReportButton) {\n                        tools.push({\n                            id : 'printReport',\n                            title : __('Print the assessment results'),\n                            icon : 'result',\n                            label : __('Print Results'),\n                            massAction: true,\n                            action : printReport\n                        });\n                    }\n\n                    // tools: handles the session time\n                    if (timeHandlingButton) {\n                        tools.push({\n                            id : 'timeHandling',\n                            title : __('Session time handling'),\n                            icon : 'time',\n                            label : __('Time'),\n                            massAction: true,\n                            action : timeHandling\n                        });\n                    }\n\n                    // column: delivery (only for all deliveries view)\n                    model.push({\n                        id: 'delivery',\n                        label: __('Session'),\n                        sortable : true,\n                        transform: function(value, row) {\n                            var delivery = row && row.delivery;\n                            if (delivery) {\n                                delivery.url = urlHelper.build(deliveryUrl, {delivery : delivery.uri});\n                                value = deliveryLinkTpl(delivery);\n                            }\n                            return value;\n                        }\n                    });\n\n                    // column: test taker first name\n                    model.push({\n                        id: 'test_taker_first_name',\n                        label: __('First name'),\n                        sortable : true,\n                        transform: function(value, row) {\n                            return row && row.testTaker && row.testTaker.test_taker_first_name || '';\n\n                        }\n                    });\n\n                    // column: test taker last name\n                    model.push({\n                        id: 'test_taker_last_name',\n                        label: __('Last name'),\n                        sortable : true,\n                        transform: function(value, row) {\n                            return row && row.testTaker && row.testTaker.test_taker_last_name || '';\n\n                        }\n                    });\n\n                    //extra fields\n                    _.each(extraFields, function(extraField){\n                        model.push({\n                            id : extraField.id,\n                            label: extraField.label,\n                            sortable : true,\n                            transform: function(value, row) {\n                                return row && row.extraFields && row.extraFields[extraField.id] || '';\n                            }\n                        });\n                    });\n\n                    // column: start time\n                    model.push({\n                        id: 'start_time',\n                        sortable : true,\n                        label: __('Started at'),\n                        filterable : true,\n                        customFilter : {\n                            template : '<input type=\"text\" id=\"start_time_filter\" name=\"filter[start_time]\"/>' +\n                            '<button class=\"icon-find js-start_time_filter_button\" type=\"button\"></button>',\n                            callback : function ($el) {\n                                $el.datepicker({\n                                    dateFormat: \"yy/mm/dd\",\n                                    onSelect: function( selectedDate ) {\n                                        if(!$(this).data().datepicker.first){\n                                            $(this).data().datepicker.inline = true;\n                                            $(this).data().datepicker.first = selectedDate;\n                                        } else {\n                                            if(selectedDate > $(this).data().datepicker.first){\n                                                $(this).val($(this).data().datepicker.first+\" - \"+selectedDate);\n                                            } else {\n                                                $(this).val(selectedDate+\" - \"+$(this).data().datepicker.first);\n                                            }\n                                            $(this).data().datepicker.inline = false;\n                                            $('.js-start_time_filter_button').trigger('click');\n                                        }\n                                    },\n                                    onClose:function(){\n                                        delete $(this).data().datepicker.first;\n                                        $(this).data().datepicker.inline = false;\n                                    }\n                                });\n                            }\n                        },\n                    });\n\n                    // column: delivery execution status\n                    model.push({\n                        id: 'status',\n                        label: __('Status'),\n                        sortable : true,\n                        filterable : true,\n                        customFilter : {\n                            template : buildStatusFilter(),\n                            callback : statusFilterHandler\n                        },\n\n                        transform: function(value, row) {\n                            var result = '',\n                                status;\n\n                            if (row && row.state && row.state.status) {\n                                status = _status.getStatusByCode(row.state.status);\n                                if (status) {\n                                    result = status.label;\n                                    if (row.state.status === 'INPROGRESS') {\n                                        result = status.label;\n                                    }\n                                    if (result === 'Awaiting') {\n                                        highlightRows.push(row.id);\n                                    }\n                                }\n                            }\n                            return result;\n                        }\n                    });\n\n                    // action: authorize the execution\n                    model.push({\n                        id: 'authorizeCl',\n                        label: __('Authorize'),\n                        type: 'actions',\n                        actions: [{\n                            id: 'authorize',\n                            icon: 'play',\n                            title: __('Authorize session'),\n                            disabled: function() {\n                                return !canDo('authorize', this.state);\n                            },\n                            action: authorize\n                        }]\n                    });\n\n                    // action: pause the execution\n                    model.push({\n                        id: 'pauseCl',\n                        label: __('Pause'),\n                        type: 'actions',\n                        actions: [{\n                            id: 'pause',\n                            icon: 'pause',\n                            title: __('Pause session'),\n                            disabled: function() {\n                                return !canDo('pause', this.state);\n                            },\n                            action: pause\n                        }]\n                    });\n\n                    // column: remaining time\n                    model.push({\n                        id: 'remaining_time',\n                        sortable : true,\n                        label: __('Remaining'),\n                        transform: function(value, row) {\n                            var timer = _.isObject(row.timer) ? row.timer : {};\n                            var refinedValue = timer.remaining_time;\n                            var remaining = parseInt(refinedValue, 10);\n\n                            if (remaining || _.isFinite(remaining) ) {\n                                if (remaining) {\n                                    refinedValue = timeEncoder.encode(remaining);\n                                } else {\n                                    refinedValue = '';\n                                }\n                                refinedValue += encodeExtraTime(timer.extraTime, timer.consumedExtraTime, __('%s min'), extraTimeUnit);\n                            }\n\n                            return refinedValue;\n                        }\n                    });\n                    if (timeHandlingButton) {\n                        model.push({\n                            id: 'extraTime',\n                            label: __('Extra Time'),\n                            type: 'actions',\n                            actions: [{\n                                id : 'timeHandling',\n                                title : __('Session time handling'),\n                                icon : 'time',\n                                action : timeHandling,\n                                hidden: function() {\n                                    return !canDo('time', this.state);\n                                }\n                            }]\n                        });\n                    }\n\n                    // column: connectivity status of execution progress\n                    model.push({\n                        id: 'last_connect',\n                        sortable: true,\n                        label: __('Connectivity'),\n                        transform: function(value, row) {\n                            if (row.state.status === _status.STATUS_INPROGRESS) {\n                                return row.online ? __('online') : __('offline');\n                            }\n                            return '';\n                        }\n                    });\n\n                    // column: delivery execution progress\n                    model.push({\n                        id: 'progress',\n                        label: __('Progress'),\n                        transform: function(value, row) {\n                            return row && row.state && row.state.progress || '' ;\n                        }\n                    });\n\n                    // column: proctoring actions\n                    actionList = [{\n                        id: 'terminateAndIrregularity',\n                        icon: 'delivery-small',\n                        title: __('Terminate and irregularity'),\n                        action: terminateAndIrregularity\n                    }, {\n                        id: 'history',\n                        icon: 'history',\n                        title: __('Show the detailed session history'),\n                        action: showHistory\n                    }, {\n                        id : 'printRubric',\n                        title : __('Print the Score Report'),\n                        icon : 'print',\n                        action : printResults\n                    }];\n                    if (printReportButton) {\n                        actionList.push({\n                            id : 'printReport',\n                            title : __('Print the assessment results'),\n                            icon : 'result',\n                            action : printReport\n                        });\n                    }\n\n                    model.push({\n                        id: 'administrationCl',\n                        label: __('Administration'),\n                        type: 'actions',\n                        actions: actionList\n                    });\n\n                    // renders the datatable\n                    $list\n                        .on('query.datatable', function() {\n                            loadingBar.start();\n                            highlightRows = [];\n                        })\n                        .on('load.datatable', function(e, newDataset) {\n                            var applyTags;\n\n                            //update dateset in memory\n                            dataset = newDataset;\n\n                            //update the buttons, which have been reconstructed\n                            actionButtons = _({\n                                authorize : $list.find('.action-bar').children('.tool-authorise'),\n                                pause : $list.find('.action-bar').children('.tool-pause'),\n                                terminate : $list.find('.action-bar').children('.tool-terminate'),\n                                report : $list.find('.action-bar').children('.tool-irregularity')\n                            });\n\n                            if (defaultTag) {\n                                applyTags = $list.data('applytags');\n                                applyTags = !_.isUndefined(applyTags) ? applyTags : true;\n                                setTagUsage(applyTags);\n                            }\n\n                            // highlight rows\n                            if (highlightRows.length) {\n                                _.forEach(highlightRows, function (v) {\n                                    $list.datatable('highlightRow', v);\n                                });\n                            }\n\n                            loadingBar.stop();\n                        })\n                        .on('select.datatable', function() {\n                            //hide all controls then display each required one individually\n                            actionButtons.each(function($btn){\n                                $btn.hide();\n                            });\n                            _($list.datatable('selection')).map(function(uri){\n                                var row = getExecutionData(uri);\n                                return row.state.status;\n                            }).uniq().each(function(statusCode){\n                                var status = _status.getStatusByCode(statusCode);\n                                actionButtons.forIn(function($btn, action){\n                                    if(status && status.can[action] === true){\n                                        $btn.show();\n                                    }\n                                });\n                            });\n                        })\n                        .datatable({\n                            url: urlHelper.build(executionsUrl, serviceParams),\n                            status: {\n                                empty: __('No sessions'),\n                                available: function () {\n                                    return getTagsUsage() ? __(\"Groups: %s. %s\", defaultTag.split(',').join(', '), defaultAvailableLabel) : defaultAvailableLabel;\n                                },\n                                loading: __('Loading')\n                            },\n                            filterStrategy: 'multiple',\n                            filterSelector: 'select, input:not(.select2-input, .select2-focusser)',\n                            filter: true,\n                            tools: tools,\n                            model: model,\n                            selectable: true,\n                            sortorder: 'desc',\n                            sortby : 'start_time'\n                        }, dataset);\n\n                    setInitialFilters();\n                });\n            }).catch(function(err) {\n                handleOnDisconnect(err);\n                appController.onError(err);\n                loadingBar.stop();\n            });\n        }\n    };\n});\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2015 (original work) Open Assessment Technologies SA ;\n */\n/**\n * @author Jean-Sébastien Conan <jean-sebastien.conan@vesperiagroup.com>\n */\ndefine('taoProctoring/controller/Delivery/testTakers',[\n    'jquery',\n    'i18n',\n    'helpers',\n    'layout/loading-bar',\n    'util/encode',\n    'ui/feedback',\n    'taoProctoring/component/breadcrumbs',\n    'ui/datatable'\n], function ($, __, helpers, loadingBar, encode, feedback, breadcrumbsFactory) {\n    'use strict';\n\n    /**\n     * The CSS scope\n     * @type {String}\n     */\n    var cssScope = '.delivery-testtakers';\n\n    // the page is always loading data when starting\n    loadingBar.start();\n\n    /**\n     * Controls the ProctorDelivery test takers assign page\n     *\n     * @type {Object}\n     */\n    var proctorDeliveryAssignCtlr = {\n        /**\n         * Entry point of the page\n         */\n        start : function start() {\n            var $container = $(cssScope);\n            var $list = $container.find('.list');\n            var crumbs = $container.data('breadcrumbs');\n            var dataset = $container.data('set');\n            var deliveryId = $container.data('delivery');\n            var testCenterId = $container.data('testcenter');\n            var serviceUrl = helpers._url('availableTestTakers', 'Delivery', 'taoProctoring', {delivery : deliveryId, testCenter: testCenterId});\n            var assignUrl = helpers._url('assignTestTakers', 'Delivery', 'taoProctoring', {delivery : deliveryId, testCenter: testCenterId});\n            var managerUrl = helpers._url('manage', 'Delivery', 'taoProctoring', {delivery : deliveryId, testCenter: testCenterId});\n\n            var bc = breadcrumbsFactory($container, crumbs);\n\n            // send the selection to the server and redirect to the index page\n            var assign = function(selection) {\n                if (selection && selection.length) {\n                    loadingBar.start();\n\n                    $.ajax({\n                        url: assignUrl,\n                        data: {\n                            testtaker: selection\n                        },\n                        dataType : 'json',\n                        type: 'POST',\n                        error: function() {\n                            loadingBar.stop();\n                        }\n                    }).done(function(response) {\n                        loadingBar.stop();\n\n                        if (response && response.success) {\n                            feedback().success(__('Test takers have been added'));\n                            window.location.href = managerUrl;\n                        } else {\n                            feedback().error(__('Something went wrong ...') + '<br>' + encode.html(response.error), {encodeHtml: false});\n                        }\n                    });\n                }\n            };\n\n            $list\n                .on('query.datatable', function() {\n                    loadingBar.start();\n                })\n                .on('load.datatable', function(event, response) {\n                    loadingBar.stop();\n                })\n                .datatable({\n                    url: serviceUrl,\n                    status: {\n                        empty: __('No available test takers to assign'),\n                        available: __('Available test takers'),\n                        loading: __('Loading')\n                    },\n                    tools: [{\n                        id: 'back',\n                        icon: 'left',\n                        title: __('Return to the session manager'),\n                        label: __('Back'),\n                        action: function() {\n                            window.location.href = managerUrl;\n                        }\n                    }, {\n                        id: 'refresh',\n                        icon: 'reset',\n                        title: __('Refresh the page'),\n                        label: __('Refresh'),\n                        action: function() {\n                            $list.datatable('refresh');\n                        }\n                    }, {\n                        id: 'assign',\n                        icon: 'add',\n                        title: __('Assign the selected test takers to the session'),\n                        label: __('Assign the selected test takers'),\n                        massAction: true,\n                        action: function(selection) {\n                            assign(selection);\n                        }\n                    }],\n                    actions: [{\n                        id: 'assign',\n                        icon: 'add',\n                        title: __('Assign the test taker to the session'),\n                        action: function(id) {\n                            assign([id]);\n                        }\n                    }],\n                    selectable: true,\n                    model: [{\n                        id: 'firstname',\n                        label: __('First name')\n                    }, {\n                        id: 'lastname',\n                        label: __('Last name')\n                    }, {\n                        id: 'identifier',\n                        label: __('Identifier')\n                    }]\n                }, dataset);\n        }\n    };\n\n    return proctorDeliveryAssignCtlr;\n});\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2015 (original work) Open Assessment Technologies SA;\n *\n * Keep duration of test-taker activity in localstorage\n */\n\ndefine('taoQtiTest/testRunner/resumingStrategy/keepAfterResume',[], function () {\n    'use strict';\n\n    /**\n     * @param {Object} options\n     * @param {string} options.accuracy - period of user status checking\n     */\n    var sessionStateFactory = function sessionStateFactory(options) {\n        var _storageKey = 'sessionState_active_for',\n            _accuracy,\n            _interval = null;\n\n        var sessionState = {\n\n            reset: function reset() {\n                _reset();\n            },\n\n            restart: function restart() {\n                _reset();\n                _start();\n            },\n\n            getDuration: function getDuration() {\n                return getLocalStorageData();\n            }\n        };\n\n        function _start() {\n            if (null !== _interval) {\n                throw new TypeError('Tracking is already started');\n            }\n            _interval = setInterval(function () {\n                setLocalStorageData(getLocalStorageData() + _accuracy);\n            }, _accuracy);\n        }\n\n        function _stop() {\n            clearInterval(_interval);\n            _interval = null;\n        }\n\n        function _reset() {\n            _stop();\n            clearLocalStorage();\n        }\n\n        function _init() {\n            _accuracy = options && options.accuracy || 1000;\n        }\n\n        _init();\n\n        /**\n         * Store duration in ms to local storage\n         * @param {*} val - data to be stored.\n         */\n        function setLocalStorageData(val) {\n            window.localStorage.setItem(_storageKey, val);\n        }\n\n        /**\n         * Get duration from local storage\n         * @returns {int} in ms\n         */\n        function getLocalStorageData() {\n            var data = window.localStorage.getItem(_storageKey),\n                result = JSON.parse(data) || 0;\n            return result;\n        }\n\n        /**\n         * Clear storage\n         */\n        function clearLocalStorage() {\n            window.localStorage.removeItem(_storageKey);\n        }\n\n        return sessionState;\n    };\n\n    return sessionStateFactory;\n});\n","\ndefine('tpl!taoProctoring/templates/deliveryServer/authorizationSuccess', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression;\n\n\n  buffer += \"<span class=\\\"success-message\\\">\";\n  if (helper = helpers.message) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.message); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"<span class=\\\"icon-result-ok\\\"></span></span>\";\n  return buffer;\n  });\n});\n\n","\ndefine('tpl!taoProctoring/templates/deliveryServer/authorizationListBoxActions', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, helperMissing=helpers.helperMissing, escapeExpression=this.escapeExpression, self=this, functionType=\"function\";\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", helper, options;\n  buffer += \"\\n    <span class=\\\"action cancel js-cancel\\\">\\n        <span class=\\\"icon-stop\\\"></span>\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Cancel\", options) : helperMissing.call(depth0, \"__\", \"Cancel\", options)))\n    + \"\\n    </span>\\n    \";\n  return buffer;\n  }\n\n  buffer += \"<span class=\\\"listbox-actions\\\">\\n    \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.cancelable), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    <span class=\\\"action play js-proceed\\\" data-delivery=\\\"\";\n  if (helper = helpers.id) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.id); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\">\\n        <span class=\\\"icon-play\\\"></span>\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Proceed\", options) : helperMissing.call(depth0, \"__\", \"Proceed\", options)))\n    + \"\\n    </span>\\n</span>\";\n  return buffer;\n  });\n});\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2015 (original work) Open Assessment Technologies SA ;\n */\n/**\n * @author Jean-Sébastien Conan <jean-sebastien.conan@vesperiagroup.com>\n */\ndefine('taoProctoring/controller/DeliveryServer/awaiting',[\n    'lodash',\n    'jquery',\n    'i18n',\n    'helpers',\n    'layout/loading-bar',\n    'ui/listbox',\n    'ui/dialog/alert',\n    'core/polling',\n    'taoQtiTest/testRunner/resumingStrategy/keepAfterResume',\n    'util/url',\n    'ui/dialog/confirm',\n    'tpl!taoProctoring/templates/deliveryServer/authorizationSuccess',\n    'tpl!taoProctoring/templates/deliveryServer/authorizationListBoxActions'\n], function (_, $, __, helpers, loadingBar, listBox, dialogAlert, polling, keepAfterResume, url, dialogConfirm, authSuccessTpl, listBoxActionsTpl){\n    'use strict';\n\n    /**\n     * The polling delay used to refresh the list\n     * @type {Number}\n     */\n    var refreshPolling = 10 * 1000; // once every 10 seconds\n\n    /**\n     * The CSS scope\n     * @type {String}\n     */\n    var cssScope = '.awaiting-authorization';\n\n    /**\n     * Controls the ProctorDelivery index page\n     *\n     * @type {Object}\n     */\n    var awaitingAuthorizationCtlr = {\n        /**\n         * Entry point of the page\n         */\n        start : function start(config){\n\n            var $container = $(cssScope);\n            var isAuthorizedUrl = helpers._url('isAuthorized', 'DeliveryServer', 'taoProctoring', {deliveryExecution : config.deliveryExecution});\n            var runDeliveryUrl = config.runDeliveryUrl;\n            var boxes = [{\n                id : 'goToDelivery',\n                label : config.deliveryLabel,\n                url : runDeliveryUrl,\n                content : __('Please wait, authorization in process ...'),\n                html : listBoxActionsTpl({id : config.deliveryExecution, cancelable: config.cancelable})\n            }];\n            var list = listBox({\n                title : config.deliveryInit ? __('Start Test') : __('Resume Test'),\n                textEmpty : '',\n                textNumber : '',\n                textLoading : '',\n                renderTo : $container,\n                list : boxes,\n                width : 12\n            });\n            var $content = $container.find('.listbox .content');\n\n            // we need to reset the local timer to avoid loss of time inside the assessment test session\n            keepAfterResume().reset();\n\n            loadingBar.start(false);\n\n            $container.on('click', '.js-cancel', function (e) {\n                //prevent clicking the parent link that goes to the monitoring screen\n                e.stopPropagation();\n                e.preventDefault();\n\n                dialogConfirm(\n                    __('Are you sure you want to end the test?'),\n                    function () {\n                        window.location.href = config.cancelUrl;\n                    }\n                );\n            });\n            $container.on('click', '.js-proceed', function (e) {\n                if ($container.hasClass('authorization-in-progress')) {\n                    e.stopPropagation();\n                    e.preventDefault();\n                }\n            });\n\n            polling({\n                action : function (){\n                    var async = this.async();\n                    $.get(isAuthorizedUrl, function(result){\n                        var stop = false;\n\n                        if (!result.success) {\n                            stop = true;\n                            if (result.message) {\n                                dialogAlert(result.message, exit);\n                            } else {\n                                exit();\n                            }\n                        } else if (result.authorized) {\n                            stop = true;\n                            authorized();\n                        }\n\n                        if (stop) {\n                            async.reject();\n                        } else {\n                            async.resolve();\n                        }\n                    });\n                },\n                interval : refreshPolling,\n                autoStart : true\n            });\n\n            /**\n             * Function to be called when the delivery execution has been authorized\n             */\n            function authorized(){\n                loadingBar.stop();\n                $container.addClass('authorization-granted').removeClass('authorization-in-progress');\n                $content.html(authSuccessTpl({message : __('Authorized, you may proceed')}));\n            }\n\n            /**\n             * Goes back to the delivery index\n             */\n            function exit() {\n                window.location.href = config.returnUrl;\n            }\n        }\n    };\n\n    return awaitingAuthorizationCtlr;\n});\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2016 (original work) Open Assessment Technologies SA ;\n */\n\ndefine('taoProctoring/controller/Irregularity/index',[\n    'lodash',\n    'jquery',\n    'i18n',\n    'ui/feedback',\n    'layout/loading-bar',\n    'helpers',\n    'jquery.fileDownload'\n], function (_, $, __, feedback, loadingBar, helpers){\n    'use strict';\n\n    /**\n     * Controls the ProctorDelivery index page\n     *\n     * @type {Object}\n     */\n    var IrregularityCtlr = {\n        /**\n         * Entry point of the page\n         */\n        start : function start(){\n            var $form = $('#export-form');\n\n            $form.on('submit', function (e) {\n\n                e.stopPropagation();\n                e.preventDefault();\n                loadingBar.start();\n\n                var self = $(this),\n                    uri = $('[name=\"uri\"]', self).val(),\n                    from = $('[name=\"from\"]', self).val(),\n                    to = $('[name=\"to\"]', self).val(),\n                    params = {'uri': uri, 'from': from, 'to': to},\n                    exportUrl = helpers._url('exportIrregularities', 'Irregularity', 'taoProctoring', params);\n\n                $.fileDownload(exportUrl, {\n                    successCallback : function () {\n                        loadingBar.stop();\n                    },\n                    failCallback : function (jqXHR) {\n                        loadingBar.stop();\n                        var response = $.parseJSON($(jqXHR).text());\n                        if (response) {\n                            feedback().error(new Error(response.message));\n                        }\n                    }\n                });\n\n            });\n        }\n    };\n\n    return IrregularityCtlr;\n});\n\n","\ndefine('tpl!taoProctoring/component/dateRange/form', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, helperMissing=helpers.helperMissing, escapeExpression=this.escapeExpression, functionType=\"function\";\n\n\n  buffer += \"<form class=\\\"daterange\\\">\\n    <label>\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"From\", options) : helperMissing.call(depth0, \"__\", \"From\", options)))\n    + \"</label><input type=\\\"text\\\" name=\\\"periodStart\\\" value=\\\"\";\n  if (helper = helpers.start) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.start); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\"/>\\n    <label>\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"to\", options) : helperMissing.call(depth0, \"__\", \"to\", options)))\n    + \"</label><input type=\\\"text\\\" name=\\\"periodEnd\\\" value=\\\"\";\n  if (helper = helpers.end) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.end); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\"/>\\n    <button class=\\\"small info\\\" data-control=\\\"filter\\\"><span class=\\\"icon icon-filter\\\"></span>\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Filter\", options) : helperMissing.call(depth0, \"__\", \"Filter\", options)))\n    + \"</button>\\n</form>\";\n  return buffer;\n  });\n});\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2016 (original work) Open Assessment Technologies SA ;\n */\n/**\n * @author Jean-Sébastien Conan <jean-sebastien.conan@vesperiagroup.com>\n */\ndefine('taoProctoring/component/dateRange',[\n    'jquery',\n    'lodash',\n    'ui/component',\n    'tpl!taoProctoring/component/dateRange/form',\n    'jquery.timePicker'\n], function ($, _, component, formTpl) {\n    'use strict';\n\n    /**\n     * Some default config\n     * @type {Object}\n     * @private\n     */\n    var _defaults = {\n        dateFormat: 'yy-mm-dd'\n    };\n\n    /**\n     * Creates a dates range with date pickers\n     *\n     * @param {Object} config\n     * @param {String} [config.start] - The initial start date (default: none)\n     * @param {String} [config.end] - The initial end date (default: none)\n     * @param {String} [config.dateFormat] - The date picker format (default: 'yy-mm-dd')\n     * @fires change when any date is changed\n     * @fires submit when the submit button is clicked\n     */\n    function dateRangeFactory(config){\n        var initConfig = _.defaults(config || {}, _defaults);\n        var periodStart = initConfig.start || '';\n        var periodEnd = initConfig.end || '';\n\n        var dateRange = {\n            /**\n             * Gets the start date of the range\n             * @returns {String}\n             */\n            getStart: function getStart() {\n                return periodStart;\n            },\n\n            /**\n             * Gets the end date of the range\n             * @returns {String}\n             */\n            getEnd: function getEnd() {\n                return periodEnd;\n            }\n        };\n\n        initConfig.start = periodStart;\n        initConfig.end = periodEnd;\n\n        return component(dateRange)\n            .setTemplate(formTpl)\n            .on('render', function() {\n                var self = this;\n                var $form = this.getElement();\n                var $periodStart = $form.find('input[name=periodStart]');\n                var $periodEnd = $form.find('input[name=periodEnd]');\n                var $filterBtn = $form.find('[data-control=\"filter\"]');\n\n                $periodStart.datepicker({\n                    dateFormat: initConfig.dateFormat,\n                    autoSize: true\n                }).change(function(){\n                    periodStart = $periodStart.val();\n                    $periodEnd.datepicker('option', 'minDate', periodStart);\n\n                    /**\n                     * @event change\n                     * @param {String} property\n                     * @param {String} value\n                     */\n                    self.trigger('change', 'start', periodStart);\n                });\n\n                $periodEnd.datepicker({\n                    dateFormat: initConfig.dateFormat,\n                    autoSize: true\n                }).change(function(){\n                    periodEnd = $periodEnd.val();\n                    $periodStart.datepicker('option', 'maxDate', periodEnd);\n\n                    /**\n                     * @event change\n                     * @param {String} property\n                     * @param {String} value\n                     */\n                    self.trigger('change', 'end', periodEnd);\n                });\n\n                $filterBtn.on('click', function(event) {\n                    event.preventDefault();\n\n                    periodStart = $periodStart.val();\n                    periodEnd = $periodEnd.val();\n\n                    /**\n                     * @event submit\n                     */\n                    self.trigger('submit');\n                });\n            })\n            .init(initConfig);\n    }\n\n    return dateRangeFactory;\n});\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2016 (original work) Open Assessment Technologies SA ;\n */\n/**\n * @author Jean-Sébastien Conan <jean-sebastien.conan@vesperiagroup.com>\n */\ndefine('taoProctoring/component/history/historyTable',[\n    'jquery',\n    'lodash',\n    'i18n',\n    'ui/component',\n    'ui/datatable'\n], function ($, _, __, component) {\n    'use strict';\n\n    /**\n     * Some default config\n     * @type {Object}\n     * @private\n     */\n    var _defaults = {\n        sortBy: 'timestamp',\n        sortOrder: 'desc'\n    };\n\n    /**\n     * Renders the event details\n     * @param {String|Array} details\n     * @returns {String}\n     */\n    function renderDetails(details) {\n        if (_.isArray(details)) {\n            details = details.join('<br />');\n        }\n        return details;\n    }\n\n    /**\n     * Renders a history table\n     * @param {Object} config\n     * @param {String} config.service - The URL of the service providing the data\n     * @param {Object} [config.params] - A list of additional parameters to provide to the service\n     * @param {String} [config.sortBy] - The default sorted column\n     * @param {String} [config.sortOrder] - The default sort direction\n     * @param {Array} [config.tools] - A list of optional tools, using the datable format\n     * @param {Object} [data] - The first data set\n     * @returns {*}\n     */\n    function historyTableFactory(config, data) {\n        var initConfig = _.defaults(config || {}, _defaults);\n\n        // define some additional behavior\n        var historyTable = {\n            /**\n             * Refresh the table\n             * @param {Object} [params]\n             */\n            refresh: function refresh(params) {\n                var $element;\n\n                if (this.is('rendered')) {\n                    $element = this.getElement();\n                    if (params) {\n                        $element.datatable('options', {\n                            params: params\n                        });\n                    }\n                    $element.datatable('refresh');\n                } else {\n                    if (params) {\n                        initConfig.params = _.merge(initConfig.params, params);\n                    }\n                }\n            }\n        };\n\n        return component(historyTable)\n            .on('render', function() {\n                var self = this;\n                var tools = [{\n                    id: 'refresh',\n                    icon: 'reset',\n                    title: __('Refresh the page'),\n                    label: __('Refresh'),\n                    action: function() {\n                        self.refresh();\n                    }\n                }];\n                this.getElement()\n                    .on('query.datatable', function() {\n                        self.trigger('loading');\n                    })\n                    .on('load.datatable', function() {\n                        self.trigger('loaded');\n                    })\n                    .datatable({\n                        url: initConfig.service,\n                        params: initConfig.params,\n                        sortby: initConfig.sortBy,\n                        sortorder: initConfig.sortOrder,\n                        status: {\n                            empty: __('No history to display!'),\n                            available: __('Available history'),\n                            loading: __('Loading')\n                        },\n                        selectable: !!(initConfig.tools && _.find(initConfig.tools, {massAction: true})),\n                        tools: tools.concat(initConfig.tools || []),\n                        model: [{\n                            id: 'date',\n                            label: __('Date'),\n                            sortable: true\n                        }, {\n                            id: 'role',\n                            label: __('Role'),\n                            sortable: true\n                        }, {\n                            id: 'actor',\n                            label: __('Actor'),\n                            sortable: true\n                        }, {\n                            id: 'event',\n                            label: __('Event'),\n                            sortable: true\n                        }, {\n                            id: 'details',\n                            label: __('Details'),\n                            transform: renderDetails\n                        }, {\n                            id: 'context',\n                            label: __('Context'),\n                            transform: renderDetails\n                        }]\n                    }, data);\n            })\n            .init(initConfig);\n    }\n\n    return historyTableFactory;\n});\n\n","\ndefine('tpl!taoProctoring/templates/reporting/index', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, functionType=\"function\", escapeExpression=this.escapeExpression, self=this;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", stack1, helper;\n  buffer += \"<h1>\";\n  if (helper = helpers.title) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.title); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"</h1>\";\n  return buffer;\n  }\n\n  buffer += \"<div class=\\\"content\\\">\\n    \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.title), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    <div class=\\\"panel\\\"></div>\\n    <div class=\\\"list clearfix\\\"></div>\\n</div>\\n\";\n  return buffer;\n  });\n});\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2016 (original work) Open Assessment Technologies SA ;\n */\n/**\n * @author Jean-Sébastien Conan <jean-sebastien.conan@vesperiagroup.com>\n */\ndefine('taoProctoring/controller/Reporting/history',[\n    'i18n',\n    'util/url',\n    'controller/app',\n    'layout/loading-bar',\n    'ui/container',\n    'ui/button',\n    'util/encode',\n    'taoProctoring/component/proxy',\n    'taoProctoring/component/dateRange',\n    'taoProctoring/component/history/historyTable',\n    'tpl!taoProctoring/templates/reporting/index',\n    'ui/datatable'\n], function (\n    __,\n    urlHelper,\n    appController,\n    loadingBar,\n    containerFactory,\n    buttonFactory,\n    encode,\n    proxyFactory,\n    dateRangeFactory,\n    historyTableFactory,\n    indexTpl\n) {\n    'use strict';\n\n    /**\n     * The CSS scope\n     * @type {String}\n     */\n    var cssScope = '.session-history';\n\n    var serviceUrl = urlHelper.route('sessionHistory', 'Reporting', 'taoProctoring');\n    var sessionsUrl = urlHelper.route('history', 'Reporting', 'taoProctoring');\n\n    /**\n     * Filters the disconnection errors\n     * @param {Error} err\n     */\n    function handleOnDisconnect(err) {\n        if (err.code === 403) {\n            //we just leave if any 403 occurs\n            window.location.reload(true);\n        }\n    }\n\n    // the page is always loading data when starting\n    loadingBar.start();\n\n    /**\n     * Controls the taoProctoring session history page\n     *\n     * @type {Object}\n     */\n    return {\n        /**\n         * Entry point of the page\n         */\n        start : function start() {\n            var container = containerFactory().changeScope(cssScope).write(indexTpl());\n            var currentRoute = urlHelper.parse(window.location.href);\n            var deliveryId = currentRoute.query.delivery && decodeURIComponent(currentRoute.query.delivery);\n            var sessions = decodeURIComponent(currentRoute.query.session).split(',');\n            var monitoringUrl = currentRoute.query.monitoring && decodeURIComponent(currentRoute.query.monitoring);\n\n            appController\n                .on('set-referrer.history', function(route) {\n                    monitoringUrl = route;\n                })\n                .on('change.history', function() {\n                    appController.off('.history');\n                    container.destroy();\n                });\n\n            proxyFactory('ajax').init({\n                actions: {\n                    read: serviceUrl\n                }\n            }).then(function(proxyService) {\n                return proxyService.read({delivery : deliveryId, session: sessions}).then(function(data) {\n                    var detailedHistory = data.detailedHistory;\n                    var historyTable = historyTableFactory({\n                        tools: [{\n                            id: 'show-detailed-report',\n                            icon: 'insert-horizontal-line',\n                            title: __('Show detailed session history messages'),\n                            label: __('Show detailed report'),\n                            action: function() {\n                                var tool = historyTable.config.tools.find(function (val) {\n                                    return val.id === 'show-detailed-report';\n                                });\n\n                                historyTable.config.params.detailed = detailedHistory = !detailedHistory;\n                                tool.label = detailedHistory ? __('Show brief report') : __('Show detailed report');\n                                historyTable.refresh();\n                            }\n                        }],\n                        params: {detailed: detailedHistory, delivery : deliveryId, session: sessions},\n                        service: sessionsUrl,\n                        sortBy: data.sortBy,\n                        sortOrder: data.sortOrder\n                    }, data.set)\n                        .on('loading', function() {\n                            loadingBar.start();\n                        })\n                        .on('loaded', function() {\n                            loadingBar.stop();\n                        })\n                        .render(container.find('.list'));\n\n                    if (data.monitoringUrl) {\n                        monitoringUrl = data.monitoringUrl;\n                    }\n\n                    dateRangeFactory({\n                        start : data.periodStart,\n                        end : data.periodEnd,\n                        renderTo: container.find('.panel')\n                    }).on('change submit', function() {\n                        historyTable.refresh({\n                            periodStart : this.getStart(),\n                            periodEnd : this.getEnd()\n                        });\n                    });\n\n                    buttonFactory({\n                        id: 'back',\n                        type: 'info',\n                        label: __('Back to sessions'),\n                        cls: 'back-button',\n                        renderTo: container.find('.panel')\n                    }).on('click', function () {\n                        if (monitoringUrl) {\n                            appController.getRouter().redirect(monitoringUrl);\n                        } else {\n                            history.go(-1);\n                        }\n                    });\n                });\n            }).catch(function(err) {\n                handleOnDisconnect(err);\n                appController.onError(err);\n                loadingBar.stop();\n            });\n        }\n    };\n});\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2017 (original work) Open Assessment Technologies SA ;\n */\n\n/**\n * @author Aleh Hutnikau, <hutnikau@1pt.com>\n */\ndefine('taoProctoring/controller/Tools/pauseActiveExecutions',[\n    'jquery',\n    'i18n',\n    'helpers',\n    'util/url',\n    'ui/feedback',\n    'ui/cascadingComboBox',\n    'ui/bulkActionPopup'\n], function($, __, helpers, url, feedback, cascadingComboBox, bulkActionPopup){\n    'use strict';\n    var $container = $('.js-pause-active-executions-container');\n    var categories = $container.data('reasoncategories');\n    var msg = __(\"Warning, you are about to pause all in progress tests. All test takers will be paused on or before the next heartbeat. Please provide a reason for this action.\")\n\n    function doPause(reason) {\n        $.ajax({\n            type: \"POST\",\n            data: {\n                reason : reason\n            },\n            url: url.route('pauseActiveExecutions', 'Tools', 'taoProctoring'),\n            dataType: 'json',\n            success: function(data) {\n                helpers.loaded();\n                if (data.success) {\n                    feedback().success(data.message);\n                } else {\n                    feedback().error(data.message);\n                }\n            }\n        });\n    }\n\n    return {\n        start : function(){\n            $('.js-pause').on('click', function() {\n                var config;\n\n                config = {\n                    renderTo : $container,\n                    actionName : msg,\n                    reason : true,\n                    allowedResources: [],\n                    reasonRequired: true,\n                    categoriesSelector: cascadingComboBox(categories['pause'])\n                };\n\n                bulkActionPopup(config).on('ok', function(reason){\n                    doPause(reason);\n                });\n            });\n        }\n    };\n});\n\n"]}