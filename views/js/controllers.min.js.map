{"version":3,"sources":["routes.js","../helper/status.js","../component/breadcrumbs.js","../templates/delivery/listBoxActions!tpl","../templates/delivery/listBoxStats!tpl","Delivery/index.js","Delivery/manage.js","../templates/delivery/itemProgress!tpl","../templates/delivery/deliveryLink!tpl","Delivery/monitoring.js","Delivery/testTakers.js","../../taoQtiTest/testRunner/resumingStrategy/keepAfterResume.js","../templates/deliveryServer/authorizationSuccess!tpl","DeliveryServer/awaiting.js","Diagnostic/index.js","../component/proctorForm/form!tpl","../component/proctorForm.js","../templates/proctorManager/counters!tpl","../templates/proctorManager/status!tpl","ProctorManager/index.js","../templates/reporting/datepicker!tpl","../templates/reporting/irregularities!tpl","Reporting/index.js","../templates/testSiteAdmin/adminLink!tpl","TestCenter/index.js","TestCenter/testCenter.js","../component/eligibilityEditor/layout!tpl","../../taoProctoringCss/eligibilityEditor!css","../component/eligibilityEditor.js","TestCenterManager/editCenter.js"],"names":["define","TestCenter","actions","index","testCenter","TestCenterManager","editCenter","ProctorManager","Diagnostic","Reporting","Delivery","manage","monitoring","monitoringAll","testTakers","_","__","getStatus","statusName","_status","getStatusByCode","statusCode","find","code","verifyTestTaker","testTakerData","actionName","formatted","id","label","firstname","lastname","status","state","allowed","can","reason","init","authorize","pause","terminate","report","awaiting","authorized","inprogress","paused","completed","terminated","breadcrumbs","$container","crumbs","data","renderTo","replace","cls","hb","template","Handlebars","depth0","helpers","partials","this","compilerInfo","merge","stack1","helper","options","buffer","functionType","escapeExpression","helperMissing","call","hash","program1","periodStart","periodEnd","self","showProperties","inverse","noop","fn","program","locked","inProgress","$","loadingBar","listBox","encode","feedback","bulkActionPopup","cascadingComboBox","breadcrumbsFactory","actionsTpl","statsTpl","refreshPolling","cssScope","start","taoProctoringCtlr","format","boxes","each","box","props","properties","tplData","stats","awaitingApproval","html","content","update","pollTo","clearTimeout","list","stop","setTimeout","refresh","setLoading","ajax","url","serviceUrl","cache","dataType","type","done","deliveryId","selection","map","testTaker","firstName","lastName","resourceType","categoriesSelector","categoriesDefinitions","categories","allowedResources","on","_url","delivery","testCenterId","execution","pluck","error","response","success","warning","encodeHtml","title","textEmpty","textNumber","textLoading","width","countRenderer","count","e","pauseUrl","stopPropagation","preventDefault","get","res","isPlainObject","isArray","inProgressExecs","filter","length","info","dialog","proctorDeliveryIndexCtlr","$list","dataset","assignUrl","removeUrl","monitoringUrl","request","message","testtaker","datatable","remove","empty","available","loading","tools","icon","action","location","href","massAction","autoRender","autoDestroy","onOkBtn","selectable","model","position","program2","program5","total","program3","program7","program8","time","program10","display","program11","elapsedStr","program12","totalStr","program14","section","item","itemProgressTpl","deliveryLinkTpl","authorise","execBulkAction","authoriseUrl","terminateUrl","reportUrl","getExecutionData","uri","actionTitle","cb","allowedTestTakers","forbiddenTestTakers","_selection","askForReason","checkedTestTaker","push","config","$content","deniedResources","isFunction","actionButtons","extraFields","manageUrl","serviceAllUrl","hidden","transform","value","row","extraField","description","newDataset","children","$btn","hide","uniq","forIn","show","proctorDeliveryAssignCtlr","managerUrl","assign","event","sessionStateFactory","_start","_interval","TypeError","setInterval","setLocalStorageData","getLocalStorageData","_accuracy","_stop","clearInterval","_reset","clearLocalStorage","_init","accuracy","val","window","localStorage","setItem","_storageKey","getItem","result","JSON","parse","removeItem","sessionState","reset","restart","getDuration","dialogAlert","polling","keepAfterResume","authSuccessTpl","awaitingAuthorizationCtlr","removeClass","exit","returnUrl","isAuthorizedUrl","deliveryExecution","runDeliveryUrl","deliveryLabel","text","deliveryInit","async","reject","resolve","interval","autoStart","taoProctoringDiagnosticCtlr","notYet","buttons","bandwidth","form","users","component","formTpl","renderFormFromData","formData","checkLogin","loginId","proctorLoginCheckUrl","_ns","proctorFormUrl","getElement","off","$element","$form","fields","serializeArray","testCenterList","testCenters","getSelection","field","name","post","created","destroy","partially","dialogConfirm","datalist","proctorForm","counterTpl","statusTpl","proctorsDataUrl","authorizeUrl","unauthorizeUrl","_modes","EMPTY","LIST","FORM","proctors","$containerList","revoke","processMode","pageMode","params","$noSelection","toggleClass","$containerForm","$panelSelection","labelText","lines","forEach","line","append","end","timestamp","comment","program4","moment","datepickerTpl","irregularitiesTpl","dateRangePicker","date","$panel","$periodStart","$periodEnd","$filterBtn","datepicker","dateFormat","autoSize","change","taoProctoringReportCtlr","printReportButton","printResults","rowId","open","stringify","printRubric","today","datatableTools","datatableActions","printRubrick","printReport","log","cat","category","subCategory","adminLinkTpl","taoProctoringIndexCtlr","admin","adminUrl","taoProctoringTestSiteCtlr","deliveryName","editingMode","deliveryTreeId","subjectTreeId","eventifier","GenerisTreeSelectClass","layoutTpl","buildTestTakerTree","instance","selector","tree","actionId","saveUrl","saveData","checkedNodes","serverParameters","openParentNodes","rootNode","paginate","onChangeCallback","delay","eligibility","getChecked","trigger","buildDeliveryTree","deliveries","initModal","modalConfig","defaults","_modalDefaults","addClass","modal","eligibilities","$deliverySelector","uniqueId","creationMode","eligibilityEditor","formatEligibilities","editCenterCtlr","_getDelivery","_request","errorCallback","eligEditor","$eligibilityEditor","addUrl","editUrl","failed","join"],"mappings":"AAAA,AAAAA,OAAA,mCACAC,YACAC,SACAC,MAAA,8BACAC,WAAA,qCAGAC,mBACAH,SACAI,WAAA,4CAGAC,gBACAL,SACAC,MAAA,oCAGAK,YACAN,SACAC,MAAA,gCAGAM,WACAP,SACAC,MAAA,+BAGAO,UACAR,SACAC,MAAA,4BACAQ,OAAA,6BACAC,WAAA,iCACAC,cAAA,iCACAC,WAAA,qCCfAd,OAAA,+BAAA,SAAA,QAAA,SAAAe,EAAAC;AACA,ADlBA,YCiGA,SAAAC,WAAAC,YACA,MAAAC,SAAAD,YAQA,QAAAE,iBAAAC,YACA,MAAAN,GAAAO,KAAAH,SAAAI,KAAAF,aASA,QAAAG,iBAAAC,cAAAC,YACA,GAAAC,YACAC,GAAAH,cAAAG,GACAC,MAAAJ,cAAAK,UAAA,IAAAL,cAAAM,UAEAC,OAAAb,QAAAC,gBAAAK,cAAAQ,MAAAD,OAOA,OANAA,UACAL,UAAAO,QAAAF,OAAAG,IAAAT,eAAA,EACAC,UAAAO,UACAP,UAAAS,OAAAJ,OAAAG,IAAAT,cAGAC,UA7GA,GAAAR,UACAkB,MACAd,KAAA,OACAM,MAAAb,GAAA,QACAmB,KACAG,UAAAtB,GAAA,gBACAuB,MAAAvB,GAAA,mBACAwB,WAAA,EACAC,QAAA,IAGAC,UACAnB,KAAA,WACAM,MAAAb,GAAA;AACAmB,ADhCA,KCiCAG,WAAA,EACAC,MAAAvB,GAAA,mBACAwB,WAAA,EACAC,QAAA,IAGAE,YACApB,KAAA,aACAM,MAAAb,GAAA,8BACAmB,KACAG,UAAAtB,GAAA,sBACAuB,MAAAvB,GAAA,eACAwB,WAAA,EACAC,QAAA,IAGAG,YACArB,KAAA,aACAM,MAAAb,GAAA,eACAmB,KACAG,UAAAtB,GAAA,sBACAuB,OAAA,EACAC,WAAA,EACAC,QAAA,IAGAI,QACAtB,KAAA,SACAM,MAAAb,GAAA,UACAmB,KACAG,UAAAtB,GAAA,aACAuB,MAAAvB,GAAA,qBACAwB,WAAA,EACAC,QAAA,IAGAK,WACAvB,KAAA,YACAM,MAAAb,GAAA,aACAmB,KACAG,UAAAtB,GAAA,gBACAuB,MAAAvB,GAAA,gBACAwB,UAAAxB,GAAA,gBACAyB,OAAAzB,GAAA,kBAGA+B,YACAxB,KAAA;AACAM,ADhFA,MCgFAb,GAAA,cACAmB,KACAG,UAAAtB,GAAA,iBACAuB,MAAAvB,GAAA,iBACAwB,UAAAxB,GAAA,iBACAyB,OAAAzB,GAAA,mBA4CA,QACAC,UAAAA,UACAG,gBAAAA,gBACAI,gBAAAA,mBCrHAxB,OAAA,uCAAA,kBAAA,SAAAgD,aASA,MAAA,UAAAC,WAAAC,QACA,MAAAF,cACAA,YAAAE,QAAAD,WAAAE,KAAA,eACAC,SAAAH,WAAA3B,KAAA,WACA+B,SAAA,EACAC,IAAA,wCC/BAtD,OAAA,uDAAA,cAAA,SAAAuD,IACA,MAAAA,IAAAC,SAAA,SAAAC,WAAAC,OAAAC,QAAAC,SAAAT;AACAU,AHCA,KGDAC,cAAA,EAAA,YACAH,QAAAE,KAAAE,MAAAJ,QAAAF,WAAAE,SAAAR,KAAAA,QACA,IAAAa,QAAAC,OAAAC,QAAAC,OAAA,GAAAC,aAAA,WAAAC,iBAAAR,KAAAQ,iBAAAC,cAAAX,QAAAW,aAYA,OATAH,SAAA,kFACAF,OAAAN,QAAA/B,IAAAoC,OAAAC,OAAAM,KAAAb,QAAAc,QAAArB,KAAAA,QACAc,OAAAP,QAAAA,OAAA9B,GAAAoC,aAAAC,UAAAG,aAAAH,OAAAM,KAAAb,QAAAc,QAAArB,KAAAA,OAAAc,QACAE,QAAAE,iBAAAL,QACA,+CACAK,kBAAAJ,OAAAN,QAAA3C,IAAA0C,QAAAA,OAAA1C,GAAAkD,SAAAM,QAAArB,KAAAA,MAAAc,OAAAA,OAAAM,KAAAb,OAAA,QAAAQ,SAAAI,cAAAC,KAAAb,OAAA,KAAA,QAAAQ,WACA,yFACAG,kBAAAJ,OAAAN,QAAA3C,IAAA0C,QAAAA,OAAA1C;AAAAkD,AHVA,SGUAM,QAAArB,KAAAA,MAAAc,OAAAA,OAAAM,KAAAb,OAAA,UAAAQ,SAAAI,cAAAC,KAAAb,OAAA,KAAA,UAAAQ,WACA,6BCfAlE,OAAA,qDAAA,cAAA,SAAAuD,IACA,MAAAA,IAAAC,SAAA,SAAAC,WAAAC,OAAAC,QAAAC,SAAAT,MAKA,QAAAsB,UAAAf,OAAAP,MAEA,GAAAa,QAAAC,OAAAC,QAAAC,OAAA,EAcA,OAbAA,SAAA,qEACAE,kBAAAJ,OAAAN,QAAA3C,IAAA0C,QAAAA,OAAA1C,GAAAkD,SAAAM,QAAArB,KAAAA,MAAAc,OAAAA,OAAAM,KAAAb,OAAA,QAAAQ,SAAAI,cAAAC,KAAAb,OAAA,KAAA,QAAAQ,WACA,cACAD,OAAAN,QAAAe,aAAAV,OAAAC,OAAAM,KAAAb;AAAAc,AJPA,QIOArB,KAAAA,QACAc,OAAAP,QAAAA,OAAAgB,YAAAV,aAAAC,UAAAG,aAAAH,OAAAM,KAAAb,QAAAc,QAAArB,KAAAA,OAAAc,QACAE,QAAAE,iBAAAL,QACA,yCACAK,kBAAAJ,OAAAN,QAAA3C,IAAA0C,QAAAA,OAAA1C,GAAAkD,SAAAM,QAAArB,KAAAA,MAAAc,OAAAA,OAAAM,KAAAb,OAAA,MAAAQ,SAAAI,cAAAC,KAAAb,OAAA,KAAA,MAAAQ,WACA,cACAD,OAAAN,QAAAgB,WAAAX,OAAAC,OAAAM,KAAAb,QAAAc,QAAArB,KAAAA,QACAc,OAAAP,QAAAA,OAAAiB,UAAAX,aAAAC,UAAAG,aAAAH,OAAAM,KAAAb,QAAAc,QAAArB,KAAAA,OAAAc,QACAE,QAAAE,iBAAAL,QACA,uBAnBAH,KAAAC,cAAA,EAAA;AACAH,AJGA,QIHAE,KAAAE,MAAAJ,QAAAF,WAAAE,SAAAR,KAAAA,QACA,IAAAa,QAAAC,OAAAE,OAAA,GAAAG,cAAAX,QAAAW,cAAAD,iBAAAR,KAAAQ,iBAAAD,aAAA,WAAAQ,KAAAf,IAoCA,OAfAG,QAAAL,QAAA,MAAAY,KAAAb,OAAAA,QAAAA,OAAAmB,gBAAAL,QAAAM,QAAAF,KAAAG,KAAAC,GAAAJ,KAAAK,QAAA,EAAAR,SAAAtB,MAAAA,KAAAA,QACAa,QAAA,IAAAA,UAAAG,QAAAH,QACAG,QAAA,yFACAF,OAAAN,QAAAuB,QAAAlB,OAAAC,OAAAM,KAAAb,QAAAc,QAAArB,KAAAA,QACAc,OAAAP,QAAAA,OAAAwB,OAAAlB,aAAAC,UAAAG,aAAAH,OAAAM,KAAAb,QAAAc,QAAArB,KAAAA,OAAAc,QACAE,QAAAE,iBAAAL,QACA;AJxBA,CIyBAC,OAAAN,QAAAwB,YAAAnB,OAAAC,OAAAM,KAAAb,QAAAc,QAAArB,KAAAA,QACAc,OAAAP,QAAAA,OAAAyB,WAAAnB,aAAAC,UAAAG,aAAAH,OAAAM,KAAAb,QAAAc,QAAArB,KAAAA,OAAAc,QACAE,QAAAE,iBAAAL,QACA,sEACAC,OAAAN,QAAAd,QAAAmB,OAAAC,OAAAM,KAAAb,QAAAc,QAAArB,KAAAA,QACAc,OAAAP,QAAAA,OAAAb,OAAAmB,aAAAC,UAAAG,aAAAH,OAAAM,KAAAb,QAAAc,QAAArB,KAAAA,OAAAc,QACAE,QAAAE,iBAAAL,QACA,oBCpBAhE,OAAA,2CACA,SACA,SACA,OACA,UACA,qBACA,aACA,cACA,cACA,qBACA,uBACA,8BACA,sCACA,sDACA,qDACA,SAAAe,EAAAqE,EAAApE,GAAA2C,QAAA0B,WAAAC,QAAAC,OAAAC,SAAAC,gBAAAC,kBAAAvE,QAAAwE,mBAAAC,WAAAC;AACA,AL3BA,YKiCA,IAAAC,gBAAA,IAMAC,SAAA,iBAGAV,YAAAW,OAOA,IAAAC,oBAIAD,MAAA,WAyBA,QAAAE,QAAAC,OAyBA,MAvBApF,GAAAqF,KAAAD,MAAA,SAAAE,KAEA,GAAAC,OAAAD,IAAAE,WACAC,SACAtB,OAAAmB,IAAAI,MAAAC,iBACAvB,WAAAkB,IAAAI,MAAAtB,WACAtC,OAAAwD,IAAAI,MAAA5D,OAGAyD,QAAAA,MAAA5B,aAAA4B,MAAA3B,YACA6B,QAAA3B,gBAAA,EACA2B,QAAA9B,YAAA4B,MAAA5B,YACA8B,QAAA7B,UAAA2B,MAAA3B,UAGA0B,IAAA/C,IAAA,4BAEA+C,IAAAM,KAAAf,YACAhE,GAAAyE,IAAAzE,KAEAyE,IAAAO,QAAAf,SAAAW,WAGAL,MAIA,QAAAU,QAAAV,OAEAW,SACAC,aAAAD,QACAA,OAAA,MAGAE,KAAAH,OAAAX,OAAAC,QACAd,WAAA4B,OAGAnB,iBACAgB,OAAAI,WAAAC,QAAArB;ALtHA,CK2HA,QAAAqB,WACA9B,WAAAW,QACAgB,KAAAI,YAAA,GAEAhC,EAAAiC,MACAC,IAAAC,WACAC,OAAA,EACAC,SAAA,OACAC,KAAA,QACAC,KAAA,SAAAxB,OACAU,OAAAV,SAYA,QAAA5D,OAAAqF,WAAAC,WAEA,GAAA3F,SAAAnB,EAAA+G,IAAAD,UAAA,SAAA1E,MACA,OACAvB,GAAAuB,KAAAvB,GACAC,MAAAsB,KAAA4E,UAAAC,UAAA,IAAA7E,KAAA4E,UAAAE,WAIAxC,kBACArC,SAAAH,WACAvB,WAAAV,GAAA,iBACAoB,QAAA,EACA8F,aAAA,aACAC,mBAAAzC,mBACA0C,sBAAAC,WAAA9F,MAAA6F,sBACAC,WAAAA,WAAA9F,MAAA8F,aAEAC,iBAAApG,UACAqG,GAAA,KAAA,SAAAnG,QAEAgD,EAAAiC,MACAC,IAAA3D,QAAA6E,KAAA,kBAAA,WAAA;AACArF,ALvKA,MKwKAsF,SAAAb,WACAxH,WAAAsI,aACAC,UAAA5H,EAAA6H,MAAAf,UAAA,MACAzF,OAAAA,QAEAqF,SAAA,OACAC,KAAA,OACAmB,MAAA,WACAxD,WAAA4B,UAEAU,KAAA,SAAAmB,UACAzD,WAAA4B,OACA6B,UAAAA,SAAAC,SACAvD,WAAAuD,QAAA,2CACA5B,WAEA3B,WAAAwD,QAAAhI,GAAA,4BAAA,OAAAuE,OAAAoB,KAAAmC,SAAAD,QAAAI,YAAA,QApIA,GAAAhG,YAAAmC,EAAAW,UACAI,MAAAlD,WAAAE,KAAA,QACAD,OAAAD,WAAAE,KAAA,eACAkF,WAAApF,WAAAE,KAAA,cACAuF,aAAAzF,WAAAE,KAAA,cACA6D,KAAA1B,SACA4D,MAAAlI,GAAA,YACAmI,UAAAnI,GAAA,yBACAoI,WAAApI,GAAA;AACAqI,AL5DA,YK4DArI,GAAA,WACAoC,SAAAH,WAAA3B,KAAA,YACA+B,SAAA,EACA2D,KAAAd,OAAAC,OACAmD,MAAA,GAGAC,cAAA,SAAAC,OACA,MAAAA,OAAA,KAIAjC,YADA5B,mBAAA1C,WAAAC,QACAS,QAAA6E,KAAA,aAAA,WAAA,iBAAApI,WAAAsI,gBACA5B,OAAA,IAoHA7D,YAAAsF,GAAA,QAAA,SAAA,SAAAkB,GAEA,GAAA7B,YAAAxC,EAAAvB,MAAAV,KAAA,YACAuG,SAAA,QAAA9B,WACAjE,QAAA6E,KAAA,0BAAA,WAAA,iBAAApI,WAAAsI,eACA/E,QAAA6E,KAAA,qBAAA,WAAA,iBAAAC,SAAAb,WAAAxH,WAAAsI,cAGAe,GAAAE,kBACAF,EAAAG,iBAGAxE,EAAAyE,IAAAH,SAAA,SAAAI;AACA,ALzMA,GKyMA/I,EAAAgJ,cAAAD,MAAA/I,EAAAiJ,QAAAF,IAAA3G,MAAA,CACA,GAAA8G,iBAAAlJ,EAAAmJ,OAAAJ,IAAA3G,KAAA,SAAAA,MACA,MAAAA,MAAAlB,OAAAkB,KAAAlB,MAAAD,SAAAb,QAAAF,UAAA,cAAAM,MAEA0I,iBAAAE,OACA5H,MAAAqF,WAAAqC,iBAEAzE,WAAA4E,KAAApJ,GAAA,0CAMAmF,MAGAd,WAAA4B,OAFAE,WAOA,OAAAlB,qBCvNAjG,OAAA,4CACA,SACA,OACA,UACA,qBACA,cACA,cACA,YACA,sCACA,gBACA,SAAAoF,EAAApE,GAAA2C,QAAA0B,WAAAE,OAAAC,SAAA6E,OAAA1E,oBACA,YAMA,IAAAI,UAAA;AAGAV,AN1BA,WM0BAW,OAOA,IAAAsE,2BAIAtE,MAAA,WACA,GAAA/C,YAAAmC,EAAAW,UACAwE,MAAAtH,WAAA3B,KAAA,SACA4B,OAAAD,WAAAE,KAAA,eACAqH,QAAAvH,WAAAE,KAAA,OACAyE,WAAA3E,WAAAE,KAAA,YACAuF,aAAAzF,WAAAE,KAAA,cACAsH,UAAA9G,QAAA6E,KAAA,aAAA,WAAA,iBAAAC,SAAAb,WAAAxH,WAAAsI,eACAgC,UAAA/G,QAAA6E,KAAA,mBAAA,WAAA,iBAAAC,SAAAb,WAAAxH,WAAAsI,eACAnB,WAAA5D,QAAA6E,KAAA,qBAAA,WAAA,iBAAAC,SAAAb,WAAAxH,WAAAsI,eACAiC,cAAAhH,QAAA6E,KAAA,aAAA,WAAA;AAAAC,AN9CA,SM8CAb,WAAAxH,WAAAsI,eAKAkC,SAHAjF,mBAAA1C,WAAAC,QAGA,SAAAoE,IAAAO,UAAAgD,SACAhD,WAAAA,UAAAsC,SACA9E,WAAAW,QAEAZ,EAAAiC,MACAC,IAAAA,IACAnE,MACA2H,UAAAjD,WAEAJ,SAAA,OACAC,KAAA,OACAmB,MAAA,WACAxD,WAAA4B,UAEAU,KAAA,SAAAmB,UACAzD,WAAA4B,OAEA6B,UAAAA,SAAAC,SACA8B,SACArF,WAAAuD,QAAA8B,SAEAN,MAAAQ,UAAA,YAEAvF,WAAAqD,MAAA7H,GAAA,4BAAA,OAAAuE,OAAAoB,KAAAmC,SAAAD,QAAAI,YAAA,SAOA+B,OAAA,SAAAnD,WACA+C,QAAAF,UAAA7C,UAAA7G,GAAA,kCAGAuJ,OACAhC,GAAA,kBAAA,WACAlD,WAAAW;ANtFA,GMwFAuC,GAAA,iBAAA,WACAlD,WAAA4B,SAEA8D,WACAzD,IAAAC,WACAvF,QACAiJ,MAAAjK,GAAA,2BACAkK,UAAAlK,GAAA,wBACAmK,QAAAnK,GAAA,YAEAoK,QACAxJ,GAAA,UACAyJ,KAAA,QACAnC,MAAAlI,GAAA,oBACAa,MAAAb,GAAA,WACAsK,OAAA,WACAf,MAAAQ,UAAA,cAGAnJ,GAAA,OACAyJ,KAAA,UACAnC,MAAAlI,GAAA,oCACAa,MAAAb,GAAA,cACAsK,OAAA,WACAC,SAAAC,KAAAb,iBAGA/I,GAAA,SACAyJ,KAAA,MACAnC,MAAAlI,GAAA,2CACAa,MAAAb,GAAA,mBACAsK,OAAA,WACAC,SAAAC,KAAAf,aAGA7I,GAAA,SACAyJ,KAAA,SACAnC,MAAAlI,GAAA;AACAa,AN7HA,MM6HAb,GAAA,UACAyK,YAAA,EACAH,OAAA,SAAAzD,WACAwC,QACAQ,QAAA7J,GAAA,iEACA0K,YAAA,EACAC,aAAA,EACAC,QAAA,WACAZ,OAAAnD,iBAKA3H,UACA0B,GAAA,SACAyJ,KAAA,SACAnC,MAAAlI,GAAA,0CACAsK,OAAA,SAAA1J,IACAyI,QACAqB,YAAA,EACAC,aAAA,EACAd,QAAA7J,GAAA,gEACA4K,QAAA,WACAZ,QAAApJ,WAKAiK,YAAA,EACAC,QACAlK,GAAA,YACAC,MAAAb,GAAA,gBAEAY,GAAA,WACAC,MAAAb,GAAA,eAEAY,GAAA,aACAC,MAAAb,GAAA,gBAEAY,GAAA,SACAC,MAAAb,GAAA,aAEAwJ,UAIA,OAAAF;AN1KA,GOjBAtK,OAAA,qDAAA,cAAA,SAAAuD,IACA,MAAAA,IAAAC,SAAA,SAAAC,WAAAC,OAAAC,QAAAC,SAAAT,MAKA,QAAAsB,UAAAf,OAAAP,MAEA,GAAAa,QAAAG,OAAA,EAQA,OAPAA,SAAA,SACAH,OAAAL,QAAA,MAAAY,KAAAb,OAAAA,QAAAA,OAAAqI,UAAAvH,QAAAM,QAAAF,KAAAG,KAAAC,GAAAJ,KAAAK,QAAA,EAAA+G,SAAA7I,MAAAA,KAAAA,QACAa,QAAA,IAAAA,UAAAG,QAAAH,QACAG,QAAA,SACAH,OAAAL,QAAA,MAAAY,KAAAb,OAAAA,QAAAA,OAAA7B,OAAA2C,QAAAM,QAAAF,KAAAG,KAAAC,GAAAJ,KAAAK,QAAA,EAAAgH,SAAA9I,MAAAA,KAAAA,QACAa,QAAA,IAAAA,UAAAG,QAAAH,QACAG,QAAA,KAGA,QAAA6H,UAAAtI,OAAAP,MAEA,GAAAa,QAAAC,OAAAC,QAAAC,OAAA,EAUA,OATAA,SAAA,wCACAE,kBAAAJ,OAAAN,QAAA3C,IAAA0C,QAAAA,OAAA1C;AAAAkD,APJA,SOIAM,QAAArB,KAAAA,MAAAc,OAAAA,OAAAM,KAAAb,OAAA,UAAAQ,SAAAI,cAAAC,KAAAb,OAAA,KAAA,UAAAQ,WACA,KACAD,OAAAN,QAAAoI,UAAA/H,OAAAC,OAAAM,KAAAb,QAAAc,QAAArB,KAAAA,QACAc,OAAAP,QAAAA,OAAAqI,SAAA/H,aAAAC,UAAAG,aAAAH,OAAAM,KAAAb,QAAAc,QAAArB,KAAAA,OAAAc,QACAE,QAAAE,iBAAAL,QACAA,OAAAL,QAAA,MAAAY,KAAAb,OAAAA,QAAAA,OAAAwI,OAAA1H,QAAAM,QAAAF,KAAAG,KAAAC,GAAAJ,KAAAK,QAAA,EAAAkH,SAAAhJ,MAAAA,KAAAA,QACAa,QAAA,IAAAA,UAAAG,QAAAH,QACAG,QAAA,UAGA,QAAAgI,UAAAzI,OAAAP,MAEA,GAAAa,QAAAC,OAAAE,OAAA,EAKA,OAJAA,SAAA,KACAF,OAAAN,QAAAuI,OAAAlI,OAAAC,OAAAM,KAAAb,QAAAc;AAAArB,APjBA,KOiBAA,QACAc,OAAAP,QAAAA,OAAAwI,MAAAlI,aAAAC,UAAAG,aAAAH,OAAAM,KAAAb,QAAAc,QAAArB,KAAAA,OAAAc,QACAE,QAAAE,iBAAAL,QAIA,QAAAiI,UAAAvI,OAAAP,MAEA,GAAAa,QAAAC,OAAAE,OAAA,EAMA,OALAA,SAAA,sCACAF,OAAAN,QAAA9B,OAAAmC,OAAAC,OAAAM,KAAAb,QAAAc,QAAArB,KAAAA,QACAc,OAAAP,QAAAA,OAAA7B,MAAAmC,aAAAC,UAAAG,aAAAH,OAAAM,KAAAb,QAAAc,QAAArB,KAAAA,OAAAc,QACAE,QAAAE,iBAAAL,QACA,UAIA,QAAAoI,UAAA1I,OAAAP,MAEA,GAAAa,QAAAG,OAAA,EAQA,OAPAA,SAAA,SACAH,OAAAL,QAAA,MAAAY,KAAAb,OAAAA,QAAAA,OAAAqI,UAAAvH,QAAAM,QAAAF,KAAAG,KAAAC,GAAAJ,KAAAK,QAAA,EAAAoH,SAAAlJ;AAAAA,APrCA,KOqCAA,QACAa,QAAA,IAAAA,UAAAG,QAAAH,QACAG,QAAA,SACAH,OAAAL,QAAA,QAAAY,KAAAb,OAAAA,QAAAA,OAAA4I,MAAA9H,QAAAM,QAAAF,KAAAG,KAAAC,GAAAJ,KAAAK,QAAA,GAAAsH,UAAApJ,MAAAA,KAAAA,QACAa,QAAA,IAAAA,UAAAG,QAAAH,QACAG,QAAA,KAGA,QAAAkI,UAAA3I,OAAAP,MAEA,GAAAa,QAAAC,OAAAC,QAAAC,OAAA,EAUA,OATAA,SAAA,qCACAE,kBAAAJ,OAAAN,QAAA3C,IAAA0C,QAAAA,OAAA1C,GAAAkD,SAAAM,QAAArB,KAAAA,MAAAc,OAAAA,OAAAM,KAAAb,OAAA,OAAAQ,SAAAI,cAAAC,KAAAb,OAAA,KAAA,OAAAQ,WACA,KACAD,OAAAN,QAAAoI,UAAA/H,OAAAC,OAAAM,KAAAb,QAAAc,QAAArB,KAAAA,QACAc,OAAAP,QAAAA,OAAAqI,SAAA/H,aAAAC,UAAAG,aAAAH,OAAAM,KAAAb;AAAAc,APnDA,QOmDArB,KAAAA,OAAAc,QACAE,QAAAE,iBAAAL,QACAA,OAAAL,QAAA,MAAAY,KAAAb,OAAAA,QAAAA,OAAAwI,OAAA1H,QAAAM,QAAAF,KAAAG,KAAAC,GAAAJ,KAAAK,QAAA,EAAAkH,SAAAhJ,MAAAA,KAAAA,QACAa,QAAA,IAAAA,UAAAG,QAAAH,QACAG,QAAA,UAIA,QAAAoI,WAAA7I,OAAAP,MAEA,GAAAa,QAAAG,OAAA,EAKA,OAJAA,SAAA,aACAH,OAAAL,QAAA,MAAAY,KAAAb,OAAAA,QAAAA,OAAA8I,SAAAhI,QAAAM,QAAAF,KAAAG,KAAAC,GAAAJ,KAAAK,QAAA,GAAAwH,UAAAtJ,MAAAA,KAAAA,QACAa,QAAA,IAAAA,UAAAG,QAAAH,QACAG,QAAA,SAGA,QAAAsI,WAAA/I,OAAAP,MAEA,GAAAa,QAAAG,OAAA,EAQA,OAPAA,SAAA;AACAH,APvEA,OOuEAL,QAAA,MAAAY,KAAAb,OAAAA,QAAAA,OAAAgJ,YAAAlI,QAAAM,QAAAF,KAAAG,KAAAC,GAAAJ,KAAAK,QAAA,GAAA0H,UAAAxJ,MAAAA,KAAAA,QACAa,QAAA,IAAAA,UAAAG,QAAAH,QACAG,QAAA,iBACAH,OAAAL,QAAA,MAAAY,KAAAb,OAAAA,QAAAA,OAAAkJ,UAAApI,QAAAM,QAAAF,KAAAG,KAAAC,GAAAJ,KAAAK,QAAA,GAAA4H,UAAA1J,MAAAA,KAAAA,QACAa,QAAA,IAAAA,UAAAG,QAAAH,QACAG,QAAA,0BAGA,QAAAwI,WAAAjJ,OAAAP,MAEA,GAAAa,QAAAC,OAAAC,QAAAC,OAAA,EAQA,OAPAA,SAAA,gCACAE,kBAAAJ,OAAAN,QAAA3C,IAAA0C,QAAAA,OAAA1C,GAAAkD,SAAAM,QAAArB,KAAAA,MAAAc,OAAAA,OAAAM,KAAAb,OAAA,eAAAQ,SAAAI,cAAAC,KAAAb,OAAA,KAAA,eAAAQ,WACA;APnFA,COoFAD,OAAAN,QAAA+I,YAAA1I,OAAAC,OAAAM,KAAAb,QAAAc,QAAArB,KAAAA,QACAc,OAAAP,QAAAA,OAAAgJ,WAAA1I,aAAAC,UAAAG,aAAAH,OAAAM,KAAAb,QAAAc,QAAArB,KAAAA,OAAAc,QACAE,QAAAE,iBAAAL,QACA,UAIA,QAAA6I,WAAAnJ,OAAAP,MAEA,GAAAa,QAAAC,OAAAC,QAAAC,OAAA,EAQA,OAPAA,SAAA,8BACAE,kBAAAJ,OAAAN,QAAA3C,IAAA0C,QAAAA,OAAA1C,GAAAkD,SAAAM,QAAArB,KAAAA,MAAAc,OAAAA,OAAAM,KAAAb,OAAA,aAAAQ,SAAAI,cAAAC,KAAAb,OAAA,KAAA,aAAAQ,WACA,MACAD,OAAAN,QAAAiJ,UAAA5I,OAAAC,OAAAM,KAAAb,QAAAc,QAAArB,KAAAA,QACAc,OAAAP,QAAAA,OAAAkJ,SAAA5I,aAAAC,UAAAG,aAAAH,OAAAM,KAAAb;AAAAc,APjGA,QOiGArB,KAAAA,OAAAc,QACAE,QAAAE,iBAAAL,QACA,UAzHAH,KAAAC,cAAA,EAAA,YACAH,QAAAE,KAAAE,MAAAJ,QAAAF,WAAAE,SAAAR,KAAAA,QACA,IAAAa,QAAAG,OAAA,GAAAC,aAAA,WAAAC,iBAAAR,KAAAQ,iBAAAC,cAAAX,QAAAW,cAAAM,KAAAf,IAkIA,OAPAM,SAAA,4BACAH,OAAAL,QAAA,QAAAY,KAAAb,OAAAA,QAAAA,OAAAoJ,SAAAtI,QAAAM,QAAAF,KAAAG,KAAAC,GAAAJ,KAAAK,QAAA,EAAAR,SAAAtB,MAAAA,KAAAA,QACAa,QAAA,IAAAA,UAAAG,QAAAH,QACAG,QAAA,KACAH,OAAAL,QAAA,QAAAY,KAAAb,OAAAA,QAAAA,OAAAqJ,MAAAvI,QAAAM,QAAAF,KAAAG,KAAAC,GAAAJ,KAAAK,QAAA,EAAAmH,SAAAjJ,MAAAA,KAAAA,QACAa,QAAA,IAAAA,UAAAG,QAAAH;AACAG,AP5GA,QO4GA,gBCrIAnE,OAAA,qDAAA,cAAA,SAAAuD,IACA,MAAAA,IAAAC,SAAA,SAAAC,WAAAC,OAAAC,QAAAC,SAAAT,MACAU,KAAAC,cAAA,EAAA,YACAH,QAAAE,KAAAE,MAAAJ,QAAAF,WAAAE,SAAAR,KAAAA,QACA,IAAAa,QAAAC,OAAAE,OAAA,GAAAC,aAAA,WAAAC,iBAAAR,KAAAQ,gBAgBA,OAbAF,SAAA,6BACAF,OAAAN,QAAA2D,KAAAtD,OAAAC,OAAAM,KAAAb,QAAAc,QAAArB,KAAAA,QACAc,OAAAP,QAAAA,OAAA4D,IAAAtD,aAAAC,UAAAG,aAAAH,OAAAM,KAAAb,QAAAc,QAAArB,KAAAA,OAAAc,QACAE,QAAAE,iBAAAL,QACA,aACAC,OAAAN,QAAA9B,OAAAmC,OAAAC,OAAAM,KAAAb;AAAAc,ARcA,QQdArB,KAAAA,QACAc,OAAAP,QAAAA,OAAA7B,MAAAmC,aAAAC,UAAAG,aAAAH,OAAAM,KAAAb,QAAAc,QAAArB,KAAAA,OAAAc,QACAE,QAAAE,iBAAAL,QACA,MACAC,OAAAN,QAAA9B,OAAAmC,OAAAC,OAAAM,KAAAb,QAAAc,QAAArB,KAAAA,QACAc,OAAAP,QAAAA,OAAA7B,MAAAmC,aAAAC,UAAAG,aAAAH,OAAAM,KAAAb,QAAAc,QAAArB,KAAAA,OAAAc,QACAE,QAAAE,iBAAAL,QACA,WCAAhE,OAAA,gDACA,SACA,SACA,OACA,UACA,qBACA,cACA,cACA,YACA,qBACA,uBACA,sCACA,8BACA,oDACA,oDACA,gBACA,SACAoF,EACArE,EACAC,GACA2C,QACA0B,WACAE,OACAC,SACA6E,OACA5E,gBACAC,kBACAC,mBACAxE,QACA6L,gBACAC;AAEA,ATxBA,YS8BA,IAAAlH,UAAA,sBAGAV,YAAAW,OAQA,IAkBAsE,2BAIAtE,MAAA,WAwBA,QAAA4E,SAAAtD,IAAAO,UAAAzF,OAAAyI,SACAhD,WAAAA,UAAAsC,SACA9E,WAAAW,QAEAZ,EAAAiC,MACAC,IAAAA,IACAnE,MACAwF,UAAAd,UACAzF,OAAAA,QAEAqF,SAAA,OACAC,KAAA,OACAmB,MAAA,WACAxD,WAAA4B,UAEAU,KAAA,SAAAmB,UACAzD,WAAA4B,OAEA6B,UAAAA,SAAAC,SACA8B,SACArF,WAAAuD,QAAA8B,SAEAN,MAAAQ,UAAA,YAEAvF,WAAAqD,MAAA7H,GAAA,4BAAA,OAAAuE,OAAAoB,KAAAmC,SAAAD,QAAAI,YAAA,OAOA,QAAAiE,WAAArF,WACAsF,eAAA,YAAAnM,GAAA,qBAAA6G,UAAA,SAAAA,UAAAzF;AACAwI,ATvHA,QSuHAwC,aAAAvF,UAAAzF,OAAApB,GAAA,0BAKA,QAAAuB,OAAAsF,WACAsF,eAAA,QAAAnM,GAAA,iBAAA6G,UAAA,SAAAA,UAAAzF,QACAwI,QAAAlB,SAAA7B,UAAAzF,OAAApB,GAAA,sBAKA,QAAAwB,WAAAqF,WACAsF,eAAA,YAAAnM,GAAA,qBAAA6G,UAAA,SAAAA,UAAAzF,QACAwI,QAAAyC,aAAAxF,UAAAzF,OAAApB,GAAA,0BAKA,QAAAyB,QAAAoF,WACAsF,eAAA,SAAAnM,GAAA,uBAAA6G,UAAA,SAAAA,UAAAzF,QACAwI,QAAA0C,UAAAzF,UAAAzF,OAAApB,GAAA,wBAUA,QAAAQ,iBAAAC,cAAAC,YACA,GAAAC,YACAC,GAAAH,cAAAG;AACAC,ATxJA,MSwJAJ,cAAAK,UAAA,IAAAL,cAAAM,UAEAC,OAAAb,QAAAC,gBAAAK,cAAAQ,MAAAD,OAOA,OANAA,UACAL,UAAAO,QAAAF,OAAAG,IAAAT,eAAA,EACAC,UAAAO,UACAP,UAAAS,OAAAJ,OAAAG,IAAAT,cAGAC,UASA,QAAA4L,kBAAAC,KACA,MAAAzM,GAAAO,KAAAkJ,QAAArH,MAAAvB,GAAA4L,MAWA,QAAAL,gBAAAzL,WAAA+L,YAAA5F,UAAA6F,IAEA,GAAAC,sBACAC,uBACAC,WAAA9M,EAAAiJ,QAAAnC,WAAAA,WAAAA,WACAiG,aAAAzF,WAAA3G,aAAA2G,WAAA3G,YAAA0G,uBAAAC,WAAA3G,YAAA0G,sBAAA+B,MAEApJ,GAAAqF,KAAAyH,WAAA,SAAAL,KACA,GACAO,kBADAhG,UAAAwF,iBAAAC;AAEAzF,AT/LA,YSgMAgG,iBAAAvM,gBAAAuG,UAAArG,YACAqM,iBAAA7L,QACAyL,kBAAAK,KAAAD,kBAEAH,oBAAAI,KAAAD,oBAIA,IAAAE,SACA7K,SAAA8K,SACAxM,WAAA+L,YACArL,OAAA0L,aACA5F,aAAA,aACAC,mBAAAzC,kBAAA2C,WAAA3G,aACA4G,iBAAAqF,kBACAQ,gBAAAP,oBAGAnI,iBAAAwI,QAAA1F,GAAA,KAAA,SAAAnG,QAEArB,EAAAqN,WAAAV,KACAA,GAAAG,WAAAzL,UAxJA,GAmBAiM,eAnBApL,WAAAmC,EAAAW,UACAmI,SAAAjL,WAAA3B,KAAA,YACAiJ,MAAAtH,WAAA3B,KAAA,SACA4B,OAAAD,WAAAE,KAAA,eACAqH,QAAAvH,WAAAE,KAAA,OACAmL,YAAArL,WAAAE,KAAA,eACAkF,WAAApF,WAAAE,KAAA,cACAyE,WAAA3E,WAAAE,KAAA,YACAuF,aAAAzF,WAAAE,KAAA,cACAoL,UAAA5K,QAAA6E,KAAA,SAAA,WAAA;AAAAC,ATrEA,SSqEAb,WAAAxH,WAAAsI,eACA2E,aAAA1J,QAAA6E,KAAA,sBAAA,WAAA,iBAAAC,SAAAb,WAAAxH,WAAAsI,eACAgB,SAAA/F,QAAA6E,KAAA,kBAAA,WAAA,iBAAAC,SAAAb,WAAAxH,WAAAsI,eACA0E,aAAAzJ,QAAA6E,KAAA,sBAAA,WAAA,iBAAAC,SAAAb,WAAAxH,WAAAsI,eACA4E,UAAA3J,QAAA6E,KAAA,mBAAA,WAAA,iBAAAC,SAAAb,WAAAxH,WAAAsI,eACAnB,WAAA5D,QAAA6E,KAAA,qBAAA,WAAA,iBAAAC,SAAAb,WAAAxH,WAAAsI,eACA8F,cAAA7K,QAAA6E,KAAA,0BAAA,WAAA;AAAApI,AT1EA,WS0EAsI,eACA0C,SACAlL,WACA4L,QAEAnG,oBAAA1C,WAAAC,OA0IAkI,OAAA4C,MACApM,GAAA,UACAyJ,KAAA,QACAnC,MAAAlI,GAAA,oBACAa,MAAAb,GAAA,WACAsK,OAAA,WACAf,MAAAQ,UAAA,cAKAnD,YACAwD,MAAA4C,MACApM,GAAA,SACAyJ,KAAA,oBACAnC,MAAAlI,GAAA,mBACAa,MAAAb,GAAA,UACAsK,OAAA,WACAC,SAAAC,KAAA+C,aAMAnD,MAAA4C,MACApM,GAAA,YACAyJ,KAAA,OACAnC,MAAAlI,GAAA,sBACAa,MAAAb,GAAA,aACAyK,YAAA,EACAH,OAAA4B,YAIA9B,MAAA4C,MACApM,GAAA,QACAyJ,KAAA,QACAnC,MAAAlI,GAAA,kBACAa,MAAAb,GAAA,SACAyK,YAAA,EACAH,OAAA/I,QAIA6I,MAAA4C,MACApM,GAAA,YACAyJ,KAAA,OACAnC,MAAAlI,GAAA;AACAa,ATxQA,MSwQAb,GAAA,aACAyK,YAAA,EACAH,OAAA9I,YAIA4I,MAAA4C,MACApM,GAAA,eACAyJ,KAAA,iBACAnC,MAAAlI,GAAA,yBACAa,MAAAb,GAAA,UACAyK,YAAA,EACAH,OAAA7I,SAIAvC,QAAA8N,MACApM,GAAA,YACAyJ,KAAA,OACAnC,MAAAlI,GAAA,qBACAyN,OAAA,WACA,GAAAzM,OACA,OAAA6B,MAAA5B,OAAA4B,KAAA5B,MAAAD,QACAA,OAAAb,QAAAC,gBAAAyC,KAAA5B,MAAAD,SACAA,QAAAA,OAAAG,IAAAG,aAAA,IAEA,GAEAgJ,OAAA4B,YAIAhN,QAAA8N,MACApM,GAAA,QACAyJ,KAAA,QACAnC,MAAAlI,GAAA,iBACAyN,OAAA,WACA,GAAAzM,OACA,OAAA6B,MAAA5B,OAAA4B,KAAA5B,MAAAD,QACAA,OAAAb,QAAAC,gBAAAyC,KAAA5B,MAAAD,SACAA,QAAAA,OAAAG,IAAAI,SAAA,IAEA,GAEA+I,OAAA/I;AAIArC,ATvTA,QSuTA8N,MACApM,GAAA,YACAyJ,KAAA,OACAnC,MAAAlI,GAAA,qBACAyN,OAAA,WACA,GAAAzM,OACA,OAAA6B,MAAA5B,OAAA4B,KAAA5B,MAAAD,QACAA,OAAAb,QAAAC,gBAAAyC,KAAA5B,MAAAD,SACAA,QAAAA,OAAAG,IAAAK,aAAA,IAEA,GAEA8I,OAAA9I,YAIAtC,QAAA8N,MACApM,GAAA,eACAyJ,KAAA,iBACAnC,MAAAlI,GAAA,uBACAyN,OAAA,WACA,GAAAzM,OACA,OAAA6B,MAAA5B,OAAA4B,KAAA5B,MAAAD,QACAA,OAAAb,QAAAC,gBAAAyC,KAAA5B,MAAAD,SACAA,QAAAA,OAAAG,IAAAM,UAAA,IAEA,GAEA6I,OAAA7I,SAIAmF,YACAkE,MAAAkC,MACApM,GAAA,WACAC,MAAAb,GAAA,WACA0N,UAAA,SAAAC,MAAAC,KACA,GAAAnG,UAAAmG,KAAAA,IAAAnG,QAKA,OAJAA,YACAA,SAAAnB,IAAA3D,QAAA6E,KAAA,aAAA,WAAA;AAAAC,AT7VA,SS6VAA,SAAA+E,IAAApN,WAAAsI,eACAiG,MAAA1B,gBAAAxE,WAEAkG,SAOA7C,MAAAkC,MACApM,GAAA,YACAC,MAAAb,GAAA,cACA0N,UAAA,SAAAC,MAAAC,KACA,MAAAA,MAAAA,IAAA7G,WAAA6G,IAAA7G,UAAAC,WAAA,MAMA8D,MAAAkC,MACApM,GAAA,WACAC,MAAAb,GAAA,aACA0N,UAAA,SAAAC,MAAAC,KACA,MAAAA,MAAAA,IAAA7G,WAAA6G,IAAA7G,UAAAE,UAAA,MAMAlH,EAAAqF,KAAAkI,YAAA,SAAAO,YACA/C,MAAAkC,MACApM,GAAAiN,WAAAjN,GACAC,MAAAgN,WAAAhN,MACA6M,UAAA,SAAAC,MAAAC,KACA,MAAAA,MAAAA,IAAAN,aAAAM,IAAAN,YAAAO,WAAAjN,KAAA,QAMAkK,MAAAkC,MACApM,GAAA,OACAC,MAAAb,GAAA,gBAIA8K,MAAAkC,MACApM,GAAA,SACAC,MAAAb,GAAA,UACA0N,UAAA,SAAAC,MAAAC;AACA,AT/YA,GS+YAA,KAAAA,IAAA3M,OAAA2M,IAAA3M,MAAAD,OAAA,CACA,GAAAA,QAAAb,QAAAC,gBAAAwN,IAAA3M,MAAAD,OACA,IAAAA,OACA,MAAAA,QAAAH,MAGA,MAAA,MAKAiK,MAAAkC,MACApM,GAAA,WACAC,MAAAb,GAAA,YACA0N,UAAA,SAAAC,MAAAC,KACA,MAAAA,KAAA3M,MAAA6M,eAgBAvE,MACAhC,GAAA,kBAAA,WACAlD,WAAAW,UAEAuC,GAAA,iBAAA,SAAAkB,EAAAsF,YAEAvE,QAAAuE,WAGAV,cAAAtN,GACAuB,UAAAiI,MAAAjJ,KAAA,eAAA0N,SAAA,mBACAzM,MAAAgI,MAAAjJ,KAAA,eAAA0N,SAAA,eACAxM,UAAA+H,MAAAjJ,KAAA,eAAA0N,SAAA,mBACAvM,OAAA8H,MAAAjJ,KAAA,eAAA0N,SAAA,wBAGA3J,WAAA4B,SAEAsB,GAAA,mBAAA,SAAAkB,EAAAsF;ARreA,AQueAV,ATjcA,cSicAjI,KAAA,SAAA6I,MACAA,KAAAC,SAEAnO,EAAAwJ,MAAAQ,UAAA,cAAAjD,IAAA,SAAA0F,KACA,GAAAoB,KAAArB,iBAAAC,IACA,OAAAoB,KAAA3M,MAAAD,SACAmN,OAAA/I,KAAA,SAAA/E,YACA,GAAAW,QAAAb,QAAAC,gBAAAC,WACAgN,eAAAe,MAAA,SAAAH,KAAA3D,QACAtJ,QAAAA,OAAAG,IAAAmJ,WAAA,GACA2D,KAAAI,aAKAtE,WACAzD,IAAAM,WAAAL,WAAAiH,cACAxM,QACAiJ,MAAAjK,GAAA,eACAkK,UAAAlK,GAAA,oBACAmK,QAAAnK,GAAA,YAEAoK,MAAAA,MACAlL,QAAAA,QACA4L,MAAAA,MACAD,YAAA,GACArB,UAKA,OAAAF,4BClfAtK,OAAA,gDACA,SACA,OACA,UACA,qBACA,cACA,cACA,sCACA,gBACA,SAAAoF,EAAApE,GAAA2C,QAAA0B,WAAAE,OAAAC,SAAAG;AT5BA,AS6BA,YAMA,IAAAI,UAAA,sBAGAV,YAAAW,OAOA,IAAAsJ,4BAIAtJ,MAAA,WACA,GAAA/C,YAAAmC,EAAAW,UACAwE,MAAAtH,WAAA3B,KAAA,SACA4B,OAAAD,WAAAE,KAAA,eACAqH,QAAAvH,WAAAE,KAAA,OACAyE,WAAA3E,WAAAE,KAAA,YACAuF,aAAAzF,WAAAE,KAAA,cACAoE,WAAA5D,QAAA6E,KAAA,sBAAA,WAAA,iBAAAC,SAAAb,WAAAxH,WAAAsI,eACA+B,UAAA9G,QAAA6E,KAAA,mBAAA,WAAA,iBAAAC,SAAAb,WAAAxH,WAAAsI,eACA6G,WAAA5L,QAAA6E,KAAA,SAAA,WAAA,iBAAAC,SAAAb,WAAAxH,WAAAsI,eAKA8G,QAHA7J,mBAAA1C,WAAAC;AT3DA,AS8DA,SAAA2E,WACAA,WAAAA,UAAAsC,SACA9E,WAAAW,QAEAZ,EAAAiC,MACAC,IAAAmD,UACAtH,MACA2H,UAAAjD,WAEAJ,SAAA,OACAC,KAAA,OACAmB,MAAA,WACAxD,WAAA4B,UAEAU,KAAA,SAAAmB,UACAzD,WAAA4B,OAEA6B,UAAAA,SAAAC,SACAvD,WAAAuD,QAAA/H,GAAA,gCACAuK,SAAAC,KAAA+D,YAEA/J,WAAAqD,MAAA7H,GAAA,4BAAA,OAAAuE,OAAAoB,KAAAmC,SAAAD,QAAAI,YAAA,QAMAsB,OACAhC,GAAA,kBAAA,WACAlD,WAAAW,UAEAuC,GAAA,iBAAA,SAAAkH,MAAA3G,UACAzD,WAAA4B,SAEA8D,WACAzD,IAAAC,WACAvF,QACAiJ,MAAAjK,GAAA,sCACAkK,UAAAlK,GAAA;ATnGA,ASoGAmK,QAAAnK,GAAA,YAEAoK,QACAxJ,GAAA,OACAyJ,KAAA,OACAnC,MAAAlI,GAAA,iCACAa,MAAAb,GAAA,QACAsK,OAAA,WACAC,SAAAC,KAAA+D,cAGA3N,GAAA,UACAyJ,KAAA,QACAnC,MAAAlI,GAAA,oBACAa,MAAAb,GAAA,WACAsK,OAAA,WACAf,MAAAQ,UAAA,cAGAnJ,GAAA,SACAyJ,KAAA,MACAnC,MAAAlI,GAAA,kDACAa,MAAAb,GAAA,mCACAyK,YAAA,EACAH,OAAA,SAAAzD,WACA2H,OAAA3H,cAGA3H,UACA0B,GAAA,SACAyJ,KAAA,MACAnC,MAAAlI,GAAA,wCACAsK,OAAA,SAAA1J,IACA4N,QAAA5N,QAGAiK,YAAA,EACAC,QACAlK,GAAA,YACAC,MAAAb,GAAA,gBAEAY,GAAA,WACAC,MAAAb,GAAA;AT7IA,GS+IAY,GAAA,aACAC,MAAAb,GAAA,iBAEAwJ,UAIA,OAAA8E,6BCtIAtP,OAAA,4DAAA,WACA,YAMA,IAAA0P,qBAAA,SAAAxL,SAqBA,QAAAyL,UACA,GAAA,OAAAC,UACA,KAAA,IAAAC,WAAA,8BAEAD,WAAAE,YAAA,WACAC,oBAAAC,sBAAAC,YACAA,WAGA,QAAAC,SACAC,cAAAP,WACAA,UAAA,KAGA,QAAAQ,UACAF,QACAG,oBAGA,QAAAC,SACAL,UAAA/L,SAAAA,QAAAqM,UAAA,IASA,QAAAR,qBAAAS,KACAC,OAAAC,aAAAC,QAAAC,YAAAJ,KAOA,QAAAR;AACA,AVjFA,GUiFA7M,MAAAsN,OAAAC,aAAAG,QAAAD,aACAE,OAAAC,KAAAC,MAAA7N,OAAA,CACA,OAAA2N,QAMA,QAAAT,qBACAI,OAAAC,aAAAO,WAAAL,aAnEA,GACAX,WADAW,YAAA,0BAEAhB,UAAA,KAEAsB,cAEAC,MAAA,WACAf,UAGAgB,QAAA,WACAhB,SACAT,UAGA0B,YAAA,WACA,MAAArB,wBAsDA,OA3BAM,SA2BAY,aAGA,OAAAxB,uBCpGA1P,OAAA,mEAAA,cAAA,SAAAuD,IACA,MAAAA,IAAAC,SAAA,SAAAC,WAAAC,OAAAC,QAAAC,SAAAT,MACAU,KAAAC,cAAA,EAAA,YACAH,QAAAE,KAAAE,MAAAJ,QAAAF,WAAAE;AXEA,AWFAR,KAAAA,QACA,IAAAa,QAAAC,OAAAE,OAAA,GAAAC,aAAA,WAAAC,iBAAAR,KAAAQ,gBAQA,OALAF,SAAA,kCACAF,OAAAN,QAAAkH,SAAA7G,OAAAC,OAAAM,KAAAb,QAAAc,QAAArB,KAAAA,QACAc,OAAAP,QAAAA,OAAAmH,QAAA7G,aAAAC,UAAAG,aAAAH,OAAAM,KAAAb,QAAAc,QAAArB,KAAAA,OAAAc,QACAE,QAAAE,iBAAAL,QACA,kDCQAhE,OAAA,oDACA,SACA,SACA,OACA,UACA,qBACA,aACA,kBACA,eACA,yDACA,mEACA,SAAAe,EAAAqE,EAAApE,GAAA2C,QAAA0B,WAAAC,QAAAgM,YAAAC,QAAAC,gBAAAC;AZxBA,AYyBA,YAMA,IAAA3L,gBAAA,IAMAC,SAAA,0BAOA2L,2BAIA1L,MAAA,SAAAiI,QA4DA,QAAAtL,cACA0C,WAAA4B,OAEAhE,WAAA0O,YAAA,6BACAzD,SAAAvH,KAAA8K,gBAAA5G,QAAA7J,GAAA,kCAMA,QAAA4Q,QACArG,SAAAC,KAAAyC,OAAA4D,UArEA,GAAA5O,YAAAmC,EAAAW,UACA+L,gBAAAnO,QAAA6E,KAAA,eAAA,iBAAA,iBAAAuJ,kBAAA9D,OAAA8D,oBACAC,eAAArO,QAAA6E,KAAA,uBAAA,iBAAA,iBAAAuJ,kBAAA9D,OAAA8D,oBACA5L,QACAvE,GAAA,eACAC,MAAAoM,OAAAgE;AZtDA,AYuDA3K,IAAA0K,eACApL,QAAA5F,GAAA,6CACAkR,KAAAlR,GAAA,aAWAkN,UATA5I,SACA4D,MAAAlI,GAAAiN,OAAAkE,aAAA,aAAA,eACAhJ,UAAA,GACAC,WAAA,GACAC,YAAA,GACAjG,SAAAH,WACA+D,KAAAb,MACAmD,MAAA,KAEArG,WAAA3B,KAAA,qBAGAkQ,mBAAAL,QAEA9L,WAAAW,QAEAuL,SACAjG,OAAA,WACA,GAAA8G,OAAAvO,KAAAuO,OACAhN,GAAAyE,IAAAiI,gBAAA,SAAAhB,QACA,GAAA7J,OAAA,CAEA6J,QAAA/H,QAOA+H,OAAAnO,aACAsE,MAAA,EACAtE,eARAsE,MAAA,EACA6J,OAAAjG,QACAyG,YAAAR,OAAAjG,QAAA+G,MAEAA,QAOA3K,KACAmL,MAAAC,SAEAD,MAAAE,aAIAC,SAAAzM,eACA0M,WAAA,KAsBA,OAAAd;AZ1HA,GaWA1R,OAAA,6CACA,SACA,OACA,UACA,qBACA,cACA,cACA,YACA,sCACA,gBACA,SAAAoF,EAAApE,GAAA2C,QAAA0B,WAAAE,OAAAC,SAAA6E,OAAA1E,oBACA,YAMA,IAAAI,UAAA,mBAGAV,YAAAW,OAOA,IAAAyM,8BAIAzM,MAAA,WACA,GAAA/C,YAAAmC,EAAAW,UACAwE,MAAAtH,WAAA3B,KAAA,SACA4B,OAAAD,WAAAE,KAAA,eACAqH,QAAAvH,WAAAE,KAAA,OACAuF,aAAAzF,WAAAE,KAAA,cAEAoE,YADA5D,QAAA6E,KAAA,SAAA,aAAA,iBAAApI,WAAAsI,eACA/E,QAAA6E,KAAA,QAAA,aAAA;AbhDA,AagDApI,WAAAsI,gBAkCAgK,QAhCA/M,mBAAA1C,WAAAC,QAgCA,WACAmH,QACAQ,QAAA7J,GAAA,wBACA0K,YAAA,EACAC,aAAA,EACAgH,QAAA,SAKA3H,OAAA,SAAAnD,WACA6K,SAIAnI,OACAhC,GAAA,kBAAA,WACAlD,WAAAW,UAEAuC,GAAA,iBAAA,WACAlD,WAAA4B,SAEA8D,WACAzD,IAAAC,WACAvF,QACAiJ,MAAAjK,GAAA,uCACAkK,UAAAlK,GAAA,iCACAmK,QAAAnK,GAAA,YAEAoK,QACAxJ,GAAA,SACAyJ,KAAA,OACAnC,MAAAlI,GAAA,kCACAa,MAAAb,GAAA,0BACAsK,OAAA,WACAoH,YAGA9Q,GAAA,SACAyJ,KAAA,SACAnC,MAAAlI,GAAA;AbzHA,Aa0HAa,MAAAb,GAAA,UACAyK,YAAA,EACAH,OAAA,SAAAzD,WACAwC,QACAQ,QAAA7J,GAAA,oEACA0K,YAAA,EACAC,aAAA,EACAC,QAAA,WACAZ,OAAAnD,iBAKA3H,UACA0B,GAAA,SACAyJ,KAAA,SACAnC,MAAAlI,GAAA,sCACAsK,OAAA,SAAA1J,IACAyI,QACAqB,YAAA,EACAC,aAAA,EACAd,QAAA7J,GAAA,0DACA4K,QAAA,WACAZ,QAAApJ,WAKAiK,YAAA,EACAC,QACAlK,GAAA,cACAC,MAAAb,GAAA,iBAEAY,GAAA,KACAC,MAAAb,GAAA,QAEAY,GAAA,UACAC,MAAAb,GAAA,aAEAY,GAAA,cACAC,MAAAb,GAAA,iBAEAY,GAAA,YACAC,MAAAb,GAAA;AbpKA,AaqKA0N,UAAA,SAAAC,OACA,GAAAiE,WAAAjE,KAMA,OAJAA,OAAA,MACAiE,UAAA,SAGAA,UAAA,UAGAhR,GAAA,OACAC,MAAAb,GAAA,WAEAwJ,UAIA,OAAAiI,+BCjMAzS,OAAA,gDAAA,cAAA,SAAAuD,IACA,MAAAA,IAAAC,SAAA,SAAAC,WAAAC,OAAAC,QAAAC,SAAAT,MACAU,KAAAC,cAAA,EAAA,YACAH,QAAAE,KAAAE,MAAAJ,QAAAF,WAAAE,SAAAR,KAAAA,QACA,IAAAa,QAAAC,OAAAE,OAAA,GAAAC,aAAA,UAQA,OALAD,SAAA,2FACAF,OAAAN,QAAAkP,MAAA7O,OAAAC,OAAAM,KAAAb,QAAAc,QAAArB,KAAAA,QACAc,OAAAP,QAAAA,OAAAmP;AAAA7O,AdGA,acHAC,UAAAG,aAAAH,OAAAM,KAAAb,QAAAc,QAAArB,KAAAA,OAAAc,SACAD,QAAA,IAAAA,UAAAG,QAAAH,QACAG,QAAA,2BCQAnE,OAAA,uCACA,SACA,SACA,OACA,UACA,QACA,cACA,eACA,gDACA,SAAAe,EAAAqE,EAAApE,GAAA2C,QAAAmP,MAAAtN,SAAAuN,UAAAC,SACA,YAiBA,SAAAC,oBAAAhQ,WAAAiQ,UACAjQ,WAAA0D,KAAAqM,SACAH,KAAAK,SAAAL,QAEAC,MAAAK,WAAAD,SAAAE,QAAAC,sBAnBA,GAAAC,KAAA,gBAGAC,eAAA5P,QAAA6E,KAAA,oBAAA,iBAAA,iBACA6K,qBAAA1P,QAAA6E,KAAA,aAAA,iBAAA;AA0BA,AfhDA,MeyBA7E,SAAAtB,OAuBA,SAAA4L,QAEA,MAAA8E,aACAxK,GAAA,UAAA,WACA1E,KAAA2P,aAAAC,IAAAH,KAAArI,UAEA1C,GAAA,SAAA,WAEA,GAAA3D,MAAAf,KACA6P,SAAA7P,KAAA2P,YAEApO,GAAAyE,IAAA0J,eAAA,SAAAL,UAEAD,mBAAAS,SAAAR,UAEAQ,SAAAnL,GAAA,SAAA+K,IAAA,OAAA,SAAA7J,GAEA,GAAAkK,OAAAvO,EAAAvB,MACA+P,OAAAD,MAAAE,iBACA7M,KAAApC,KAAAqJ,OAAA6F,eACA3Q,MACA4Q,YAAA/M,MAAAA,KAAAgN,eAEAjT,GAAAqF,KAAAwN,OAAA,SAAAK,OACA9Q,KAAA8Q,MAAAC,MAAAD,MAAAtF,QAGAvJ,EAAA+O,KAAAZ,eAAApQ,KAAA,SAAA2G,KACAA,IAAAsK,SACA5O,WAAAuD,QAAA/H,GAAA,oBACA4D,KAAAyP,WAEApB,mBAAAS,SAAA5J,OAIAL,EAAAG,mBAEArB,GAAA,QAAA,qBAAA;AACA3D,AftFA,KesFAyP,gBAIAhS,KAAA4L,WCxGAjO,OAAA,uDAAA,cAAA,SAAAuD,IACA,MAAAA,IAAAC,SAAA,SAAAC,WAAAC,OAAAC,QAAAC,SAAAT,MAKA,QAAAsB,UAAAf,OAAAP,MAEA,GAAAa,QAAAG,OAAA,EAKA,OAJAA,SAAA,SACAH,OAAAL,QAAA,MAAAY,KAAAb,OAAAA,QAAAA,OAAA8F,OAAAhF,QAAAM,QAAAF,KAAAG,KAAAC,GAAAJ,KAAAK,QAAA,EAAA+G,SAAA7I,MAAAA,KAAAA,QACAa,QAAA,IAAAA,UAAAG,QAAAH,QACAG,QAAA,KAGA,QAAA6H,UAAAtI,OAAAP,MAEA,GAAAa,QAAAC,OAAAE,OAAA,EAcA,OAbAA,SAAA,gBACAF,OAAAN,QAAAL,KAAAU,OAAAC,OAAAM,KAAAb,QAAAc,QAAArB,KAAAA,QACAc,OAAAP,QAAAA,OAAAJ,IAAAU,aAAAC,UAAAG,aAAAH,OAAAM,KAAAb;AhBLA,AgBKAc,QAAArB,KAAAA,OAAAc,QACAE,QAAAE,iBAAAL,QACA,yBACAC,OAAAN,QAAA9B,OAAAmC,OAAAC,OAAAM,KAAAb,QAAAc,QAAArB,KAAAA,QACAc,OAAAP,QAAAA,OAAA7B,MAAAmC,aAAAC,UAAAG,aAAAH,OAAAM,KAAAb,QAAAc,QAAArB,KAAAA,OAAAc,QACAE,QAAAE,iBAAAL,QACA,iCACAC,OAAAN,QAAA6F,OAAAxF,OAAAC,OAAAM,KAAAb,QAAAc,QAAArB,KAAAA,QACAc,OAAAP,QAAAA,OAAA8F,MAAAxF,aAAAC,UAAAG,aAAAH,OAAAM,KAAAb,QAAAc,QAAArB,KAAAA,OAAAc,QACAE,QAAAE,iBAAAL,QACA,gBA5BAH,KAAAC,cAAA,EAAA,YACAH,QAAAE,KAAAE,MAAAJ,QAAAF,WAAAE,SAAAR,KAAAA,QACA,IAAAa,QAAAI,aAAA,WAAAC,iBAAAR,KAAAQ,iBAAAO,KAAAf;AhBYA,AgBmBA,MADAG,QAAAL,QAAAyC,KAAA7B,KAAAb,OAAAA,QAAAc,QAAAM,QAAAF,KAAAG,KAAAC,GAAAJ,KAAAK,QAAA,EAAAR,SAAAtB,MAAAA,KAAAA,OACAa,QAAA,IAAAA,OAAAA,OACA,OCpCAhE,OAAA,qDAAA,cAAA,SAAAuD,IACA,MAAAA,IAAAC,SAAA,SAAAC,WAAAC,OAAAC,QAAAC,SAAAT,MAKA,QAAAsB,UAAAf,OAAAP,MAEA,GAAAc,QAAAC,QAAAC,OAAA,EAGA,OAFAA,SAAAE,kBAAAJ,OAAAN,QAAA3C,IAAA0C,QAAAA,OAAA1C,GAAAkD,SAAAM,QAAArB,KAAAA,MAAAc,OAAAA,OAAAM,KAAAb,OAAA,aAAAQ,SAAAI,cAAAC,KAAAb,OAAA,KAAA,aAAAQ,WACA,6CAIA,QAAAiI,UAAAzI,OAAAP,MAEA,GAAAa,QAAAC,OAAAC,QAAAC,OAAA;AjBCA,AiBOA,MAPAA,SAAA,iBACAF,OAAAN,QAAAoQ,aAAA/P,OAAAC,OAAAM,KAAAb,QAAAc,QAAArB,KAAAA,QACAc,OAAAP,QAAAA,OAAAqQ,YAAA/P,aAAAC,UAAAG,aAAAH,OAAAM,KAAAb,QAAAc,QAAArB,KAAAA,OAAAc,QACAE,QAAAE,iBAAAL,QACA,KACAK,kBAAAJ,OAAAN,QAAA3C,IAAA0C,QAAAA,OAAA1C,GAAAkD,SAAAM,QAAArB,KAAAA,MAAAc,OAAAA,OAAAM,KAAAb,OAAA,uBAAAQ,SAAAI,cAAAC,KAAAb,OAAA,KAAA,uBAAAQ,WACA,UArBAL,KAAAC,cAAA,EAAA,YACAH,QAAAE,KAAAE,MAAAJ,QAAAF,WAAAE,SAAAR,KAAAA,QACA,IAAAa,QAAAG,OAAA,GAAAG,cAAAX,QAAAW,cAAAD,iBAAAR,KAAAQ,iBAAAD,aAAA,WAAAQ,KAAAf;AjBcA,AiBcA,MALAG,QAAAL,QAAA,MAAAY,KAAAb,OAAAA,QAAAA,OAAAf,YAAA6B,QAAAM,QAAAF,KAAAG,KAAAC,GAAAJ,KAAAK,QAAA,EAAAR,SAAAtB,MAAAA,KAAAA,QACAa,QAAA,IAAAA,UAAAG,QAAAH,QACAG,QAAA,KACAH,OAAAL,QAAA,MAAAY,KAAAb,OAAAA,QAAAA,OAAA4Q,WAAA9P,QAAAM,QAAAF,KAAAG,KAAAC,GAAAJ,KAAAK,QAAA,EAAAkH,SAAAhJ,MAAAA,KAAAA,QACAa,QAAA,IAAAA,UAAAG,QAAAH,QACAG,WCbAnE,OAAA,iDACA,SACA,SACA,OACA,UACA,qBACA,cACA,cACA,oBACA,qBACA,cACA,sCACA,sCACA,sDACA,oDACA,gBACA,SAAAe,EAAAqE,EAAApE,GAAA2C,QAAA0B,WAAAE,OAAAC,SAAA+O,cAAA9O,gBAAA+O,SAAA7O,mBAAA8O,YAAAC,WAAAC;AlBhBA,AkBiBA,YAMA,IAAA5O,UAAA,wBAGA6O,gBAAAjR,QAAA6E,KAAA,wBAAA,iBAAA,iBACAqM,aAAAlR,QAAA6E,KAAA,YAAA,iBAAA,iBACAsM,eAAAnR,QAAA6E,KAAA,cAAA,iBAAA,iBAGAuM,QACAC,MAAA,EACAC,KAAA,EACAC,KAAA,EAIA7P,YAAAW,OAOA,IAAAC,oBAIAD,MAAA,WAmBA,QAAA4E,SAAAtD,IAAAO,UAAAgD,SACAhD,WAAAA,UAAAsC,SACA9E,WAAAW,QAEAZ,EAAAiC,MACAC,IAAAA,IACAnE,MACA4Q,YAAA/M,KAAAgN,eACAmB,SAAAtN,WAEAJ,SAAA,OACAC,KAAA,OACAmB,MAAA,WACAxD,WAAA4B,UAEAU,KAAA,SAAAmB,UACAzD,WAAA4B,OAEA6B,UAAAA,SAAAC,SACA8B,SACArF,WAAAuD,QAAA8B;AlBvFA,AkByFAuK,eAAArK,UAAA,YAEAvF,WAAAqD,MAAA7H,GAAA,4BAAA,OAAAuE,OAAAoB,KAAAmC,SAAAD,QAAAI,YAAA,OAMA,QAAA3G,WAAAuF,UAAAgD,SACA0J,cAAA1J,QAAA,WACAD,QAAAiK,aAAAhN,UAAA7G,GAAA,0BAIA,QAAAqU,QAAAxN,UAAAgD,SACA0J,cAAA1J,QAAA,WACAD,QAAAkK,eAAAjN,UAAA7G,GAAA,uBAIA,QAAAsU,aAAAzN,WACA,GAAAA,UAAAsC,OAOA,OAAAoL,UACA,IAAAR,QAAAC,MACAO,SAAAR,OAAAE,IAEA,KAAAF,QAAAE,KACAG,eAEArK,UAAA,WACAyK,QAAAzB,YAAA,QAGAhJ,UAAA,WACAyK,QAAAzB,YAAAlM,aAEAkD,UAAA,UACA;AlBnIA,AkBqIA,IAAAgK,QAAAG,UAvBAH,QAAAE,OAAAM,SACAA,SAAAR,OAAAC,MACAD,OAAAC,QAAAO,UACA/P,WAAAwD,QAAAhI,GAAA,6CA0BAyU,cAAAC,YAAA,SAAAX,OAAAC,QAAAO,UACAH,eAAAM,YAAA,SAAAX,OAAAE,OAAAM,UACAI,eAAAD,YAAA,SAAAX,OAAAG,OAAAK,UA5FA,GAAAtS,YAAAmC,EAAAW,UACA6P,gBAAAxQ,EAAA,sBAEAgQ,gBADAhQ,EAAA,kBACAA,EAAA,kBACAuQ,eAAAvQ,EAAA,mBACAqQ,aAAArQ,EAAA,oBACA2O,YAAA9Q,WAAAE,KAAA,QACAD,OAAAD,WAAAE,KAAA,eACAoS,SAAAR,OAAAC,MAEAhO,MADArB,mBAAA1C,WAAAC;AlBzDA,AkB0DAsR,UACApR,SAAAwS,gBACAxM,WAAApI,GAAA,cACA6U,UAAA7U,GAAA,aACA6K,YAAA,GACAkI,aAgFA/M,MAAAuB,GAAA,SAAA,SAAAV,WACAyN,YAAAzN,aAGAuN,eACA7M,GAAA,kBAAA,WACAlD,WAAAW,UAEAuC,GAAA,iBAAA,SAAAkB,EAAAe,SACA,GAAA8J,WAAA,EACA3R,WAAA,EACAmT,MAAAtL,SAAAA,QAAArH,IACApC,GAAAgV,QAAAD,MAAA,SAAAE,MACA,GAAAA,MAAAA,KAAAhU,OACA,OAAAgU,KAAAhU,QACA,IAAA,GAAAsS,WAAA,MACA,KAAA,GAAA3R,gBAMAyC,EAAAvB,MAAAvC,KAAA,yBAAA2U,OAAAvB,aACA9S,GAAA,kBACAC,MAAAb,GAAA,uBACAwI,MAAA7G,aAEAf,GAAA,iBACAC,MAAAb,GAAA,iCACAwI,MAAA8K;AlB3KA,KkB8KAjP,WAAA4B,SAEA8D,WACAzD,IAAAsN,gBACA5S,QACAiJ,MAAAjK,GAAA,wBACAkK,UAAAlK,GAAA,qBACAmK,QAAAnK,GAAA,YAEAoK,QACAxJ,GAAA,UACAyJ,KAAA,QACAnC,MAAAlI,GAAA,oBACAa,MAAAb,GAAA,WACAsK,OAAA,WACA8J,eAAArK,UAAA,cAGAnJ,GAAA,SACAyJ,KAAA,MACAnC,MAAAlI,GAAA,kCACAa,MAAAb,GAAA,kBACAsK,OAAA,WACA,GAAAzD,WAAAb,KAAAgN,cAEAS,cACArR,SAAAuS,eACA7B,eAAA9M,OACAuB,GAAA,UAAA,WACAgN,SAAAR,OAAAE,KACAK,YAAAtO,KAAAgN,kBAEAuB,SAAAR,OAAAG,KACAI,YAAAzN,cAGAjG,GAAA,YACAyJ,KAAA,YACAnC,MAAAlI,GAAA;AlBnNA,AkBoNAa,MAAAb,GAAA,aACAyK,YAAA,EACAH,OAAA,SAAAzD,WACAvF,UAAAuF,UAAA7G,GAAA,mDAGAY,GAAA,SACAyJ,KAAA,SACAnC,MAAAlI,GAAA,kDACAa,MAAAb,GAAA,UACAyK,YAAA,EACAH,OAAA,SAAAzD,WACAwN,OAAAxN,UAAA7G,GAAA,gDAGAd,UACA0B,GAAA,YACAyJ,KAAA,YACAnC,MAAAlI,GAAA,yBACAyN,OAAA,WACA,MAAA,KAAA5K,KAAA7B,QAEAsJ,OAAA,SAAA1J,IACAU,WAAAV,IAAAZ,GAAA,kDAGAY,GAAA,SACAyJ,KAAA,SACAnC,MAAAlI,GAAA,sBACAyN,OAAA,WACA,OAAA5K,KAAA7B,QAEAsJ,OAAA,SAAA1J;AlBnPA,AkBoPAyT,QAAAzT,IAAAZ,GAAA,+CAGA6K,YAAA,EACAC,QACAlK,GAAA,YACAC,MAAAb,GAAA,gBAEAY,GAAA,WACAC,MAAAb,GAAA,eAEAY,GAAA,QACAC,MAAAb,GAAA,WAEAY,GAAA,QACAC,MAAAb,GAAA,UACA0N,UAAA,SAAAC,MAAAC,KACA,MAAA+F,YACAZ,YAAAnF,IAAAjM,WACA2R,UAAA,IAAA1F,IAAA5M,OACAW,WAAA,IAAAiM,IAAA5M,iBAMAqD,WAAA4B,QAIA,OAAAhB,qBC3SAjG,OAAA,oDAAA,cAAA,SAAAuD,IACA,MAAAA,IAAAC,SAAA,SAAAC,WAAAC,OAAAC,QAAAC,SAAAT,MACAU,KAAAC,cAAA,EAAA,YACAH,QAAAE,KAAAE,MAAAJ,QAAAF,WAAAE,SAAAR,KAAAA,QACA,IAAAa,QAAAC,OAAAC,QAAAC,OAAA,GAAAG,cAAAX,QAAAW,cAAAD,iBAAAR,KAAAQ,iBAAAD,aAAA;AnBsBA,AmBJA,MAfAD,SAAA,yCACAE,kBAAAJ,OAAAN,QAAA3C,IAAA0C,QAAAA,OAAA1C,GAAAkD,SAAAM,QAAArB,KAAAA,MAAAc,OAAAA,OAAAM,KAAAb,OAAA,OAAAQ,SAAAI,cAAAC,KAAAb,OAAA,KAAA,OAAAQ,WACA,yDACAD,OAAAN,QAAAqC,OAAAhC,OAAAC,OAAAM,KAAAb,QAAAc,QAAArB,KAAAA,QACAc,OAAAP,QAAAA,OAAAsC,MAAAhC,aAAAC,UAAAG,aAAAH,OAAAM,KAAAb,QAAAc,QAAArB,KAAAA,OAAAc,QACAE,QAAAE,iBAAAL,QACA,mBACAK,kBAAAJ,OAAAN,QAAA3C,IAAA0C,QAAAA,OAAA1C,GAAAkD,SAAAM,QAAArB,KAAAA,MAAAc,OAAAA,OAAAM,KAAAb,OAAA,KAAAQ,SAAAI,cAAAC,KAAAb,OAAA,KAAA,KAAAQ,WACA;AnBYA,CmBXAD,OAAAN,QAAAuS,KAAAlS,OAAAC,OAAAM,KAAAb,QAAAc,QAAArB,KAAAA,QACAc,OAAAP,QAAAA,OAAAwS,IAAAlS,aAAAC,UAAAG,aAAAH,OAAAM,KAAAb,QAAAc,QAAArB,KAAAA,OAAAc,QACAE,QAAAE,iBAAAL,QACA,kGACAK,kBAAAJ,OAAAN,QAAA3C,IAAA0C,QAAAA,OAAA1C,GAAAkD,SAAAM,QAAArB,KAAAA,MAAAc,OAAAA,OAAAM,KAAAb,OAAA,UAAAQ,SAAAI,cAAAC,KAAAb,OAAA,KAAA,UAAAQ,WACA,yBCrBAlE,OAAA,wDAAA,cAAA,SAAAuD,IACA,MAAAA,IAAAC,SAAA,SAAAC,WAAAC,OAAAC,QAAAC,SAAAT;ApB2BA,AoBtBA,QAAAsB,UAAAf,OAAAP,MAEA,GAAAa,QAAAC,OAAAE,OAAA,EAgBA,OAfAA,SAAA,qEACAF,OAAAN,QAAAwS,WAAAnS,OAAAC,OAAAM,KAAAb,QAAAc,QAAArB,KAAAA,QACAc,OAAAP,QAAAA,OAAAyS,UAAAnS,aAAAC,UAAAG,aAAAH,OAAAM,KAAAb,QAAAc,QAAArB,KAAAA,OAAAc,QACAE,QAAAE,iBAAAL,QACA,wCACAC,OAAAN,QAAA+D,MAAA1D,OAAAC,OAAAM,KAAAb,QAAAc,QAAArB,KAAAA,QACAc,OAAAP,QAAAA,OAAAgE,KAAA1D,aAAAC,UAAAG,aAAAH,OAAAM,KAAAb,QAAAc,QAAArB,KAAAA,OAAAc,QACAE,QAAAE,iBAAAL,QACA,oBACAA,OAAAL,QAAA,MAAAY,KAAAb,OAAAA,QAAAA,OAAAtB;ApBWA,AoBXAoC,QAAAM,QAAAF,KAAAG,KAAAC,GAAAJ,KAAAK,QAAA,EAAA+G,SAAA7I,MAAAA,KAAAA,QACAa,QAAA,IAAAA,UAAAG,QAAAH,QACAG,QAAA,aACAH,OAAAL,QAAA,MAAAY,KAAAb,OAAAA,QAAAA,OAAA0S,SAAA5R,QAAAM,QAAAF,KAAAG,KAAAC,GAAAJ,KAAAK,QAAA,EAAAoR,SAAAlT,MAAAA,KAAAA,QACAa,QAAA,IAAAA,UAAAG,QAAAH,QACAG,QAAA,gBAGA,QAAA6H,UAAAtI,OAAAP,MAEA,GAAAa,QAAAC,OAAAE,OAAA,EAMA,OALAA,SAAA,0BACAF,OAAAN,QAAAvB,QAAA4B,OAAAC,OAAAM,KAAAb,QAAAc,QAAArB,KAAAA,QACAc,OAAAP,QAAAA,OAAAtB,OAAA4B,aAAAC,UAAAG,aAAAH,OAAAM,KAAAb,QAAAc,QAAArB,KAAAA,OAAAc,QACAE,QAAAE,iBAAAL,QACA,WAIA,QAAAqS,UAAA3S,OAAAP;ApBPA,AoBSA,GAAAa,QAAAC,OAAAE,OAAA,EAMA,OALAA,SAAA,4BACAF,OAAAN,QAAAyS,SAAApS,OAAAC,OAAAM,KAAAb,QAAAc,QAAArB,KAAAA,QACAc,OAAAP,QAAAA,OAAA0S,QAAApS,aAAAC,UAAAG,aAAAH,OAAAM,KAAAb,QAAAc,QAAArB,KAAAA,OAAAc,QACAE,QAAAE,iBAAAL,QACA,UA1CAH,KAAAC,cAAA,EAAA,YACAH,QAAAE,KAAAE,MAAAJ,QAAAF,WAAAE,SAAAR,KAAAA,QACA,IAAAa,QAAAG,OAAA,GAAAC,aAAA,WAAAC,iBAAAR,KAAAQ,iBAAAO,KAAAf,IAgDA,OAJAM,SAAA,sCACAH,OAAAL,QAAAyC,KAAA7B,KAAAb,OAAAA,QAAAc,QAAAM,QAAAF,KAAAG,KAAAC,GAAAJ,KAAAK,QAAA,EAAAR,SAAAtB,MAAAA,KAAAA,QACAa,QAAA,IAAAA,UAAAG,QAAAH;ApBnBA,AoBoBAG,QAAA,cChCAnE,OAAA,4CACA,SACA,SACA,OACA,UACA,qBACA,cACA,SACA,mDACA,uDACA,cACA,YACA,sCACA,8BACA,eACA,WACA,qBACA,SAAAoF,EAAArE,EAAAC,GAAA2C,QAAA0B,WAAAE,OAAA+Q,OAAAC,cAAAC,kBAAAhR,SAAA6E,OAAA1E,mBAAAxE,SACA,YA2PA,SAAAsV,iBAAAC,KAAAzT,WAAAsH,OAwCA,QAAApD,WACAoD,MAAAQ,UAAA,WACAyK,QAEA9Q,YAAAA,YACAC,UAAAA;ArB7SA,IqB+SAoG,UAAA,WA7CA,GAAA4L,QAAA1T,WAAA3B,KAAA,UACAoD,YAAAgS,KACA/R,UAAA+R,IACAC,QAAAV,OAAAM,eACAvQ,MAAAtB,YACAwR,IAAAvR,YAGA,IAAAiS,cAAAD,OAAArV,KAAA,2BACAuV,WAAAF,OAAArV,KAAA,yBACAwV,WAAAH,OAAArV,KAAA,0BACAsV,cAAAG,YACAC,WAAA,WACAC,UAAA,IACAC,OAAA,WACAxS,YAAAkS,aAAApG,MACAqG,WAAAE,WAAA,SAAA,UAAArS,aACAyC,YAEA0P,WAAAE,YACAC,WAAA,WACAC,UAAA,IACAC,OAAA,WACAvS,UAAAkS,WAAArG,MACAoG,aAAAG,WAAA,SAAA,UAAApS,WACAwC,YAEA2P,WAAAvO,GAAA,QAAA,SAAAkH;ArB5RA,AqB6RAA,MAAA7F,iBACAlF,YAAAkS,aAAApG,MACA7L,UAAAkS,WAAArG,MACArJ,YAtRA,GAAApB,UAAA,kBAGAV,YAAAW,OAOA,IAAAmR,0BAIAnR,MAAA,WACA,GAAA/C,YAAAmC,EAAAW,UACAwE,MAAAtH,WAAA3B,KAAA,SACA4B,OAAAD,WAAAE,KAAA,eACAqH,QAAAvH,WAAAE,KAAA,OACAiU,kBAAAnU,WAAAE,KAAA,qBACAkF,WAAApF,WAAAE,KAAA,cACAuF,aAAAzF,WAAAE,KAAA,cAEAoE,YADA5D,QAAA6E,KAAA,WAAA,YAAA,iBAAApI,WAAAsI,eACA/E,QAAA6E,KAAA,UAAA,YAAA,iBAAApI,WAAAsI,gBAiCAgK,QAhCA/M,mBAAA1C,WAAAC;ArBjCA,AqBiEA,WACAmH,QACAQ,QAAA7J,GAAA,wBACA0K,YAAA,EACAC,aAAA,EACAgH,QAAA,SAQA0E,aAAA,SAAAC,OACA7G,OAAA8G,KAAA5T,QAAA6E,KAAA,cAAA,YAAA,iBAAA5G,GAAA0V,QAAA,cAAAvG,KAAAyG,UAAAF,SAOAG,YAAA,SAAAH,OACA7G,OAAA8G,KAAA5T,QAAA6E,KAAA,cAAA,YAAA,iBAAA5G,GAAA0V,QAAA,cAAAvG,KAAAyG,UAAAF,SAGAI,MAAApB,SAAApQ,OAAA,cAUAyR,iBAEA/V,GAAA,WACAyJ,KAAA,WACAnC,MAAAlI,GAAA,+CACAa,MAAAb,GAAA,gBACAsK,OAAA,WACAoH,YAGA9Q,GAAA,cACAsH,MAAAlI,GAAA;ArB9GA,AqB+GAqK,KAAA,QACAxJ,MAAAb,GAAA,sBACAyK,YAAA,EACAH,OAAAmM,aAGAL,oBACAO,eAAA3J,MACApM,GAAA,cACAsH,MAAAlI,GAAA,gCACAqK,KAAA,QACAxJ,MAAAb,GAAA,iBACAyK,YAAA,EACAH,OAAA+L,cAIA,IAAAO,mBACAC,cACAjW,GAAA,cACAsH,MAAAlI,GAAA,0DACAqK,KAAA,QACAxJ,MAAAb,GAAA,sBACAsK,OAAAmM,aAGAL,qBACAQ,iBAAAE,aACAlW,GAAA,cACAsH,MAAAlI,GAAA,gCACAqK,KAAA,QACAxJ,MAAAb,GAAA,iBACAsK,OAAA+L,eAKA9M,MACAhC,GAAA,kBAAA,WACAlD,WAAAW,UAEAuC,GAAA,iBAAA;ArBvJA,AqBwJAlD,WAAA4B,SAEA8D,WACAzD,IAAAC,WACAvF,QACAiJ,MAAAjK,GAAA,0BACAkK,UAAAlK,GAAA,qBACAmK,QAAAnK,GAAA,YAEAoK,MAAAuM,eACA9L,YAAA,EACA3L,QAAA0X,iBACA9L,QACAlK,GAAA,WACAC,MAAAb,GAAA,UAEAY,GAAA,YACAC,MAAAb,GAAA,gBAEAY,GAAA,UACAC,MAAAb,GAAA,aAEAY,GAAA,SACAC,MAAAb,GAAA,UACA0N,UAAA,SAAAC,OACA,GAAA3M,QAAAb,QAAAC,gBAAAuN,MACA,OAAA3M,QACAA,OAAAH,MAEA,MAGAD,GAAA,QACAC,MAAAb,GAAA,WAEAY,GAAA,MACAC,MAAAb,GAAA,SAEAY,GAAA,QACAC,MAAAb,GAAA,aAEAY,GAAA,SACAC,MAAAb,GAAA,cAEAY,GAAA,iBACAC,MAAAb,GAAA,kBACA0N,UAAA,SAAAC,OAkCA,MAjCA5N,GAAAgV,QAAApH,MAAA,SAAAoJ;ArBtMA,AqBuMA,GAAAC,KAAA3P,WAAA0P,IAAArQ,KAIA,QAFAqQ,IAAAA,IAAArQ,OAAA,EAEAqQ,IAAArQ,MACA,IAAA,QACAqQ,IAAArQ,KAAA1G,GAAA,QACA,MAEA,KAAA,SACA+W,IAAArQ,KAAA1G,GAAA,SACA,MAEA,KAAA,YACA+W,IAAArQ,KAAA1G,GAAA,YACA,MAEA,SACA+W,IAAArQ,KAAA1G,GAAA,gBAIAgX,MACAD,IAAA3V,OAAA,GACA2V,IAAAE,WACAF,IAAA3V,QAAA2V,IAAAE,UAEAF,IAAAG,cACAH,IAAA3V,QAAA,IAAA2V,IAAAG,gBAIA1B,kBAAA7H,UAGA6G,QACA9Q,YAAAgT,MACA/S,UAAA+S,QAEAlN,SAGAiM,gBAAAiB,MAAAzU,WAAAsH,QA6DA,OAAA4M,2BCnVAnX,OAAA,uDAAA,cAAA,SAAAuD,IACA,MAAAA,IAAAC,SAAA,SAAAC,WAAAC,OAAAC,QAAAC,SAAAT,MACAU,KAAAC,cAAA,EAAA;AtBoCA,AsBnCAH,QAAAE,KAAAE,MAAAJ,QAAAF,WAAAE,SAAAR,KAAAA,QACA,IAAAa,QAAAC,OAAAC,QAAAC,OAAA,GAAAC,aAAA,WAAAC,iBAAAR,KAAAQ,iBAAAC,cAAAX,QAAAW,aAUA,OAPAH,SAAA,aACAF,OAAAN,QAAA6H,MAAAxH,OAAAC,OAAAM,KAAAb,QAAAc,QAAArB,KAAAA,QACAc,OAAAP,QAAAA,OAAA8H,KAAAxH,aAAAC,UAAAG,aAAAH,OAAAM,KAAAb,QAAAc,QAAArB,KAAAA,OAAAc,QACAE,QAAAE,iBAAAL,QACA,oEACAK,kBAAAJ,OAAAN,QAAA3C,IAAA0C,QAAAA,OAAA1C,GAAAkD,SAAAM,QAAArB,KAAAA,MAAAc,OAAAA,OAAAM,KAAAb,OAAA,kBAAAQ,SAAAI,cAAAC,KAAAb,OAAA,KAAA,kBAAAQ,WACA;AtB0BA,KuBpBAlE,OAAA,6CACA,SACA,OACA,UACA,qBACA,aACA,sCACA,uDACA,SAAAoF,EAAApE,GAAA2C,QAAA0B,WAAAC,QAAAK,mBAAAwS,cACA,YAMA,IAAArS,gBAAA,IAMAC,SAAA,oBAGAV,YAAAW,OAOA,IAAAoS,yBAIApS,MAAA,WACA,GAAA/C,YAAAmC,EAAAW,UACAsS,MAAApV,WAAAE,KAAA,iBACAgD,MAAAlD,WAAAE,KAAA,QACAD,OAAAD,WAAAE,KAAA,eACA6D,KAAA1B,SACA4D,MAAAlI,GAAA,iBACAmI,UAAAnI,GAAA,0BACAoI,WAAApI,GAAA,aACAqI,YAAArI,GAAA;AvBvBA,AuBwBAoC,SAAAH,WAAA3B,KAAA,YACA+B,SAAA,IAGAkE,YADA5B,mBAAA1C,WAAAC,QACAS,QAAA6E,KAAA,QAAA,aAAA,kBACA8P,SAAA3U,QAAA6E,KAAA,QAAA,iBAAA,iBACA1B,OAAA,KAGAD,OAAA,SAAAV,OACAW,SACAC,aAAAD,QACAA,OAAA,MAGAE,KAAAH,OAAAV,OACAd,WAAA4B,OAGAnB,iBACAgB,OAAAI,WAAAC,QAAArB,kBAKAqB,QAAA,WACA9B,WAAAW,QACAgB,KAAAI,YAAA,GAEAhC,EAAAiC,MACAC,IAAAC,WACAC,OAAA,EACAC,SAAA,OACAC,KAAA,QACAC,KAAA,SAAAmB,UACA3C,MAAA2C,UAAAA,SAAA9B,KACAH,OAAAV,SAIAA,OAGAU,OAAAV,OAFAgB,UAKAkR,OAEApV,WAAA3B,KAAA,WAAA2U,OAAAkC;AvBvEA,AuBwEA3M,KAAA8M,aAMA,OAAAF,0BCpGApY,OAAA,kDACA,SACA,OACA,UACA,qBACA,aACA,uCACA,SAAAoF,EAAApE,GAAA2C,QAAA0B,WAAAC,QAAAK,oBACA,YAMA,IAAAI,UAAA,yBAGAV,YAAAW,OAOA,IAAAuS,4BAIAvS,MAAA,WACA,GAAA/C,YAAAmC,EAAAW,UACAI,MAAAlD,WAAAE,KAAA,QACAD,OAAAD,WAAAE,KAAA,eAEA+F,OADAjG,WAAAE,KAAA,MACAF,WAAAE,KAAA,UACA6D,KAAA1B,SACA4D,MAAAA,MACAC,WAAA,EACAC,YAAA,EACAC,YAAArI,GAAA,WACAoC,SAAAH,WAAA3B,KAAA,YACA+B,SAAA,EACAiG,MAAA;AxBlBA,GwBqBA/B,YADA5B,mBAAA1C,WAAAC,QACAS,QAAA6E,KAAA,aAAA,aAAA,kBAGA3B,OAAA,SAAAV,OACAa,KAAAH,OAAAV,OACAd,WAAA4B,QAIAE,QAAA,WACA9B,WAAAW,QACAgB,KAAAI,YAAA,GAEAhC,EAAAiC,MACAC,IAAAC,WACAC,OAAA,EACAC,SAAA,OACAC,KAAA,QACAC,KAAA,SAAAmB,UACA3C,MAAA2C,UAAAA,SAAA9B,KACAH,OAAAV,SAIAA,OAGAU,OAAAV,OAFAgB,WAOA,OAAAoR,6BC/FAvY,OAAA,wDAAA,cAAA,SAAAuD,IACA,MAAAA,IAAAC,SAAA,SAAAC,WAAAC,OAAAC,QAAAC,SAAAT,MAKA,QAAAsB,UAAAf,OAAAP,MAGA,MAAA,WAGA,QAAAgJ,UAAAzI,OAAAP,MAGA,MAAA;AzB4BA,CyBzBA,QAAA8I,UAAAvI,OAAAP,MAGA,MAAA,aAGA,QAAAiJ,UAAA1I,OAAAP,MAEA,GAAAa,QAAAC,OAAAC,QAAAC,OAAA,EAOA,OANAA,SAAAE,kBAAAJ,OAAAN,QAAA3C,IAAA0C,QAAAA,OAAA1C,GAAAkD,SAAAM,QAAArB,KAAAA,MAAAc,OAAAA,OAAAM,KAAAb,OAAA,MAAAQ,SAAAI,cAAAC,KAAAb,OAAA,KAAA,MAAAQ,WACA,iCACAD,OAAAN,QAAA6U,cAAAxU,OAAAC,OAAAM,KAAAb,QAAAc,QAAArB,KAAAA,QACAc,OAAAP,QAAAA,OAAA8U,aAAAxU,aAAAC,UAAAG,aAAAH,OAAAM,KAAAb,QAAAc,QAAArB,KAAAA,OAAAc,QACAE,QAAAE,iBAAAL,QACA,YA9BAH,KAAAC,cAAA,EAAA,YACAH,QAAAE,KAAAE,MAAAJ,QAAAF,WAAAE,SAAAR,KAAAA;AACA,AzBwCA,GyBxCAa,QAAAC,OAAAC,QAAAC,OAAA,GAAAG,cAAAX,QAAAW,cAAAD,iBAAAR,KAAAQ,iBAAAD,aAAA,WAAAQ,KAAAf,IAmEA,OAnCAM,SAAA,iCACAH,OAAAL,QAAA,MAAAY,KAAAb,OAAAA,QAAAA,OAAA+U,aAAAjU,QAAAM,QAAAF,KAAAG,KAAAC,GAAAJ,KAAAK,QAAA,EAAAR,SAAAtB,MAAAA,KAAAA,QACAa,QAAA,IAAAA,UAAAG,QAAAH,QACAG,QAAA,8BACAF,OAAAN,QAAAuF,OAAAlF,OAAAC,OAAAM,KAAAb,QAAAc,QAAArB,KAAAA,QACAc,OAAAP,QAAAA,OAAAwF,MAAAlF,aAAAC,UAAAG,aAAAH,OAAAM,KAAAb,QAAAc,QAAArB,KAAAA,OAAAc,QACAE,QAAAE,iBAAAL,QACA;AACAA,AzBCA,OyBDAL,QAAA,MAAAY,KAAAb,OAAAA,QAAAA,OAAA+U,aAAAjU,QAAAM,QAAAF,KAAAK,QAAA,EAAAgH,SAAA9I,MAAA6B,GAAAJ,KAAAK,QAAA,EAAAkH,SAAAhJ,MAAAA,KAAAA,QACAa,QAAA,IAAAA,UAAAG,QAAAH,QACAG,QAAA,2DACAE,kBAAAJ,OAAAN,QAAA3C,IAAA0C,QAAAA,OAAA1C,GAAAkD,SAAAM,QAAArB,KAAAA,MAAAc,OAAAA,OAAAM,KAAAb,OAAA,sBAAAQ,SAAAI,cAAAC,KAAAb,OAAA,KAAA,sBAAAQ,WACA,uCACAD,OAAAN,QAAA+U,gBAAA1U,OAAAC,OAAAM,KAAAb,QAAAc,QAAArB,KAAAA,QACAc,OAAAP,QAAAA,OAAAgV,eAAA1U,aAAAC,UAAAG,aAAAH,OAAAM,KAAAb;AAAAc,AzBJA,QyBIArB,KAAAA,OAAAc,QACAE,QAAAE,iBAAAL,QACA,iDACAA,OAAAL,QAAA,MAAAY,KAAAb,OAAAA,QAAAA,OAAA+U,aAAAjU,QAAAM,QAAAF,KAAAK,QAAA,EAAAgH,SAAA9I,MAAA6B,GAAAJ,KAAAK,QAAA,EAAAkH,SAAAhJ,MAAAA,KAAAA,QACAa,QAAA,IAAAA,UAAAG,QAAAH,QACAG,QAAA,4DACAE,kBAAAJ,OAAAN,QAAA3C,IAAA0C,QAAAA,OAAA1C,GAAAkD,SAAAM,QAAArB,KAAAA,MAAAc,OAAAA,OAAAM,KAAAb,OAAA,uBAAAQ,SAAAI,cAAAC,KAAAb,OAAA,KAAA,uBAAAQ,WACA,IACAF,OAAAL,QAAA,MAAAY,KAAAb,OAAAA,QAAAA,OAAA+U,aAAAjU,QAAAM,QAAAF,KAAAG,KAAAC,GAAAJ,KAAAK,QAAA,EAAAmH,SAAAjJ;AAAAA,AzBXA,KyBWAA,QACAa,QAAA,IAAAA,UAAAG,QAAAH,QACAG,QAAA,uCACAF,OAAAN,QAAAgV,eAAA3U,OAAAC,OAAAM,KAAAb,QAAAc,QAAArB,KAAAA,QACAc,OAAAP,QAAAA,OAAAiV,cAAA3U,aAAAC,UAAAG,aAAAH,OAAAM,KAAAb,QAAAc,QAAArB,KAAAA,OAAAc,QACAE,QAAAE,iBAAAL,QACA,oHACAK,kBAAAJ,OAAAN,QAAA3C,IAAA0C,QAAAA,OAAA1C,GAAAkD,SAAAM,QAAArB,KAAAA,MAAAc,OAAAA,OAAAM,KAAAb,OAAA,KAAAQ,SAAAI,cAAAC,KAAAb,OAAA,KAAA,KAAAQ,WACA,4DACAG,kBAAAJ,OAAAN,QAAA3C,IAAA0C,QAAAA,OAAA1C;AAAAkD,AzBnBA,SyBmBAM,QAAArB,KAAAA,MAAAc,OAAAA,OAAAM,KAAAb,OAAA,oBAAAQ,SAAAI,cAAAC,KAAAb,OAAA,KAAA,oBAAAQ,WACA,KACAG,kBAAAJ,OAAAN,QAAA3C,IAAA0C,QAAAA,OAAA1C,GAAAkD,SAAAM,QAAArB,KAAAA,MAAAc,OAAAA,OAAAM,KAAAb,OAAA,SAAAQ,SAAAI,cAAAC,KAAAb,OAAA,KAAA,SAAAQ,WACA,+BCtEAlE,OAAA,4CAAA,cCiBAA,OAAA,6CACA,SACA,SACA,OACA,UACA,kBACA,sBACA,uDACA,cACA,WACA,0CACA,SAAAe,EAAAqE,EAAApE,GAAA2C,QAAAiV,WAAAC,uBAAAC,UAAAtT;AACA,A3BoBA,Y2BLA,SAAAuT,oBAAAC,SAAAC,SAAAnY,YAEA,GAAAoY,MAAA,GAAAL,wBAAAI,SAAAtV,QAAA6E,KAAA,UAAA,cAAA,QACA2Q,SAAA,uBACAC,QAAA,sBACAC,YACAC,aAAAvY,EAAA6H,MAAA9H,WAAA,cACAyY,kBACAC,gBAAAzY,EAAA6H,MAAA9H,WAAA,OACA2Y,SAAA,uDAEAC,SAAA,GACAC,iBAAA,WACA5Y,EAAA6Y,MAAA,WAEAZ,SAAAa,YAAA/Y,WAAAC,EAAAoO,KAAA+J,KAAAY,cACAd,SAAAe,QAAA,SAAAf,SAAAa,cACA,OAIA,OAAAX,MAUA,QAAAc,mBAAAhB,SAAAC,SAAAgB,YAEA,GAAAf,MAAA,GAAAL,wBAAAI,SAAAtV,QAAA6E,KAAA,UAAA,cAAA;AACA2Q,A3B5BA,S2B4BA,uBACAC,QAAA,sBACAC,YACAC,aAAAvY,EAAA6H,MAAAqR,WAAA,cACAV,kBACAC,gBAAAzY,EAAA6H,MAAAqR,WAAA,OACAR,SAAA,kEAEAC,SAAA,GACAC,iBAAA,WACA5Y,EAAA6Y,MAAA,WAEAZ,SAAAa,YAAAI,WAAAlZ,EAAAoO,KAAA+J,KAAAY,cACAd,SAAAe,QAAA,SAAAf,SAAAa,cACA,OAIA,OAAAX,MASA,QAAAgB,WAAAlB,SAAAmB,aAEAA,YAAApZ,EAAAqZ,SAAAD,gBAAAE,gBAEArB,SAAA/V,WAAA+L,SAAA,uBACAsL,SAAA,SACA/R,GAAA,eAAA,WAEA8L,QAAA2E,YAEAuB,MAAAJ,aACA5R,GAAA,QAAA+K,IAAA,iBAAA,SAAA7J;AAEAuP,A3BnEA,S2BmEAa,aAAAb,SAAAa,YAAAI,YAAAjB,SAAAa,YAAAI,WAAA9P,QACA6O,SAAAe,QAAA,KAAAf,SAAAa,aACAxF,QAAA2E,WAEAxT,SAAAwT,SAAA/V,YAAA+F,QAAAhI,GAAA,0DAGAuH,GAAA,QAAA+K,IAAA,mBAAA,SAAA7J,GAEAA,EAAAG,iBACAoP,SAAAe,QAAA,UACA1F,QAAA2E,YAUA,QAAA3E,SAAA2E,UACAA,SAAA/V,WAAA+L,SAAA,uBACAuL,MAAA,WACAvP,SAaA,QAAA3I,MAAAY,WAAAuX,cAAA/R,UAEA,GAKAgS,mBALAzB,SAAAJ,YACAiB,iBAEAlB,cAAA5X,EAAA2Z,SAAA,4BACAhC,eAAA3X,EAAA2Z,SAAA,2BAEAC,cAAA,EACAnC,aAAA;AAEA,A3BlHA,I2BkHAzX,EAAAiJ,QAAAwQ,eACA,KAAA,yDAGA,IAAA/R,UAAAA,SAAA+E,KAAA/E,SAAA5G,MAAA,CACA,GAAAgY,aAAA9Y,EAAAO,KAAAkZ,eAAA/R,SAAAA,SAAA+E,KACA,KAAAqM,YAUA,KAAA,4DATAc,eAAA,EACAnC,aAAA/P,SAAA5G,MAGAmX,SAAAa,YAAA9Y,EAAAqZ,SAAAP,aACAI,YAAAxR,SAAA+E,KACA1M,gBA6BA,MAvBAkY,UAAA/V,WAAAA,WACAA,WAAAgT,OAAA6C,WACA5P,MAAAlI,GAAA2Z,aAAA,kBAAA,oBACAlC,aAAAkC,aACAhC,cAAAA,cACAD,eAAAA,eACAF,aAAAA,gBAGAmC,eAEAF,kBAAAxX,WAAA3B,KAAA;AACA0Y,A3BhJA,kB2BgJAhB,SAAA,IAAAN,oBAIAK,mBAAAC,SAAA,IAAAL,cAAAK,SAAAa,YAAA/Y,gBAGAoZ,UAAAlB,UACA1P,MAAAqR,aAAA,IAAA,MAGA3B,SAjLA,GAAA1F,KAAA,sBAEA+G,gBACA/Q,MAAA,IAiLA,QACAjH,KAAAA,QCpMArC,OAAA,yDACA,SACA,SACA,OACA,UACA,qBACA,cACA,cACA,4CACA,gBACA,SACAoF,EACArE,EACAC,GACA2C,QACA0B,WACAE,OACAC,SACAoV,mBAEA,YAcA,SAAAC,qBAAArQ,SACA,MAAAA,SAAArH,MAAApC,EAAAiJ,QAAAQ,QAAArH,MACApC,EAAA+G,IAAA0C,QAAArH,KAAA,SAAA0W;A5BEA,A4BDA,OACApR,SAAAoR,YAAAjY,GACAd,WAAA+Y,YAAA/Y,iBAbA,GAAAiF,UAAA,uBAyBA+U,gBAIA9U,MAAA,WAuBA,QAAA+U,cAAAvN,KACA,MAAAzM,GAAAO,KAAA2Y,YAAAzM,IAAAA,MAWA,QAAAwN,UAAA1T,IAAAuS,YAAAhP,QAAAoQ,eACApB,cAEAxU,WAAAW,QAEAZ,EAAAiC,MACAC,IAAAA,IACAnE,MACA0W,YAAAA,aAEApS,SAAA,OACAC,KAAA,OACAmB,MAAA,WACAxD,WAAA4B,UAEAU,KAAA,SAAAmB,UAEAzD,WAAA4B,OAEA6B,UAAAA,SAAAC,SACA8B,SACArF,WAAAuD,QAAA8B,SAEAN,MAAAQ,UAAA,YACAhK,EAAAqN,WAAA6M,eAEAA,cAAAnS,UAEAtD,WAAAqD,MAAA7H,GAAA,4BAAA,OAAAuE,OAAAoB,KAAAmC,SAAAD;A5B/EA,A4B+EAI,YAAA,OA7DA,GAEAiS,YAFAjY,WAAAmC,EAAAW,UACAwE,MAAAtH,WAAA3B,KAAA,SAEA6Z,mBAAAlY,WAAA3B,KAAA,iCACA2Y,WAAAhX,WAAAE,KAAA,cACAqX,cAAAvX,WAAAE,KAAA,iBACAuF,aAAAzF,WAAAE,KAAA,cACAoE,WAAA5D,QAAA6E,KAAA,mBAAA,oBAAA,iBAAAgF,IAAA9E,eACA0S,OAAAzX,QAAA6E,KAAA,mBAAA,oBAAA,iBAAAgF,IAAA9E,eACA2S,QAAA1X,QAAA6E,KAAA,oBAAA,oBAAA,iBAAAgF,IAAA9E,eACAgC,UAAA/G,QAAA6E,KAAA,sBAAA,oBAAA,iBAAAgF,IAAA9E;A5B3BA,G4B4BA0C,SACAlL,WACA4L,QAuDAV,OAAA4C,MACApM,GAAA,MACAyJ,KAAA,MACAnC,MAAAlI,GAAA,OACAa,MAAAb,GAAA,OACAsK,OAAA,WAEA4P,WAAAN,kBAAAvY,KAAA8Y,mBAAAN,oBAAAL,gBACAU,WAAA3S,GAAA,KAAA,SAAAsR,aACAmB,SAAAI,OAAAvB,YAAA7Y,GAAA,+BAAA,SAAA8I,KACAtE,WAAAwD,QAAAhI,GAAA,uDAAA8I,IAAAwR,OAAAC,KAAA,OACAhR,MAAAQ,UAAA,kBAOA7K,QAAA8N,MACApM,GAAA,OACAyJ,KAAA,OACAxJ,MAAAb,GAAA,QACAkI,MAAAlI,GAAA,8BACAsK,OAAA,SAAAkC,KAEA0N,WAAAN,kBAAAvY,KAAA8Y,mBAAAN,oBAAAL,eAAAO,aAAAvN;A5B7GA,A4B8GA0N,WAAA3S,GAAA,KAAA,SAAAsR,aACAmB,SAAAK,QAAAxB,YAAA7Y,GAAA,sCAMAd,QAAA8N,MACApM,GAAA,SACAyJ,KAAA,MACAxJ,MAAAb,GAAA,UACAkI,MAAAlI,GAAA,sBACAsK,OAAA,SAAAkC,KAEAwN,SAAAtQ,WAAAuP,YAAAzM,MAAAxM,GAAA,iCAMA8K,MAAAkC,MACApM,GAAA,MACAC,MAAAb,GAAA,YACA0N,UAAA,SAAAC,MAAAC,KACA,MAAAmM,cAAAnM,IAAAhN,IAAAC,SAMAiK,MAAAkC,MACApM,GAAA,UACAC,MAAAb,GAAA,wBACA0N,UAAA,SAAAC,MAAAC,KACA,MAAAA,KAAA9N,WAAAqJ,UAKAI,MACAhC,GAAA,kBAAA,WACAlD,WAAAW,UAEAuC,GAAA,iBAAA,SAAAkB,EAAAsF,YAEAyL,cAAAzL,WACA1J,WAAA4B,SAEA8D;A5B7JA,A4B8JAzD,IAAAC,WACAvF,QACAiJ,MAAAjK,GAAA,4BACAkK,UAAAlK,GAAA,uBACAmK,QAAAnK,GAAA,YAEAoK,MAAAA,MACAlL,QAAAA,QACA4L,MAAAA,MACAD,YAAA,GACA2O,gBAKA,OAAAM;A5B5KA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC3IA,AD4IA;AC3IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACtCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACrBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC7CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC9OA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC9LA,AD+LA;AC9LA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC1IA,AD2IA;AC1IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACzBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACzgBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC5JA,AD6JA;AC5JA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACvGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACjBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACtIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACpMA,ADqMA;ACpMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChBA,ADiBA;AChBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC7GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACzCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACrCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC9SA,AD+SA;AC9SA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC3BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACzDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACtVA,ADuVA;ACtVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACnBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC3HA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AClGA,ADmGA;AClGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC3EA,AD4EA;AC3EA;AACA,ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACxNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"taoProctoring/controller/routes.js","sourcesContent":["define('taoProctoring/controller/routes',{\n    'TestCenter' : {\n        'actions' : {\n            'index' : 'controller/TestCenter/index',\n            'testCenter' : 'controller/TestCenter/testCenter'\n        }\n    },\n    'TestCenterManager' : {\n        'actions' : {\n            'editCenter' : 'controller/TestCenterManager/editCenter'\n        }\n    },\n\t'ProctorManager' : {\n        'actions' : {\n            'index' : 'controller/ProctorManager/index'\n        }\n    },\n    'Diagnostic' : {\n        'actions' : {\n            'index' : 'controller/Diagnostic/index'\n        }\n    },\n    'Reporting' : {\n        'actions' : {\n            'index' : 'controller/Reporting/index'\n        }\n    },\n    'Delivery' : {\n        'actions' : {\n            'index' : 'controller/Delivery/index',\n            'manage' : 'controller/Delivery/manage',\n            'monitoring' : 'controller/Delivery/monitoring',\n            'monitoringAll' : 'controller/Delivery/monitoring',\n            'testTakers' : 'controller/Delivery/testTakers'\n        }\n    }\n});\n\n","/*\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2015 (original work) Open Assessment Technologies SA ;\n *\n */\ndefine('taoProctoring/helper/status',['lodash', 'i18n'], function(_, __){\n    'use strict';\n    var _status = {\n        init : {\n            code : 'INIT',\n            label : __('Init'),\n            can : {\n                authorize : __('not awaiting'),\n                pause : __('not in progress'),\n                terminate : true,\n                report : true\n            }\n        },\n        awaiting : {\n            code : 'AWAITING',\n            label : __('Awaiting'),\n            can : {\n                authorize : true,\n                pause : __('not in progress'),\n                terminate : true,\n                report : true\n            }\n        },\n        authorized : {\n            code : 'AUTHORIZED',\n            label : __('Authorized but not started'),\n            can : {\n                authorize : __('already authorized'),\n                pause : __('not started'), //not in progress\n                terminate : true,\n                report : true\n            }\n        },\n        inprogress : {\n            code : 'INPROGRESS',\n            label : __('In Progress'),\n            can : {\n                authorize : __('already authorized'),\n                pause : true,\n                terminate : true,\n                report : true\n            }\n        },\n        paused : {\n            code : 'PAUSED',\n            label : __('Paused'),\n            can : {\n                authorize : __('is paused'),\n                pause : __('is already paused'),\n                terminate : true,\n                report : true\n            }\n        },\n        completed : {\n            code : 'COMPLETED',\n            label : __('Completed'),\n            can : {\n                authorize : __('is completed'),\n                pause : __('is completed'),\n                terminate : __('is completed'),\n                report : __('is completed')\n            }\n        },\n        terminated : {\n            code : 'TERMINATED',\n            label : __('Terminated'),\n            can : {\n                authorize : __('is terminated'),\n                pause : __('is terminated'),\n                terminate : __('is terminated'),\n                report : __('is terminated')\n            }\n        }\n    };\n\n    /**\n     * Get the status model from its name\n     * @param {string} statusName\n     * @returns {object}\n     */\n    function getStatus(statusName){\n        return _status[statusName];\n    }\n\n    /**\n     * Get the status model from its code\n     * @param {string} statusName\n     * @returns {object}\n     */\n    function getStatusByCode(statusCode){\n        return _.find(_status, {code : statusCode});\n    }\n\n    /**\n     * Verify and reformat test taker data for the execBulkAction's need\n     * @param {Object} testTakerData\n     * @param {String} actionName\n     * @returns {Object}\n     */\n    function verifyTestTaker(testTakerData, actionName){\n        var formatted = {\n            id : testTakerData.id,\n            label : testTakerData.firstname + ' ' + testTakerData.lastname\n        };\n        var status = _status.getStatusByCode(testTakerData.state.status);\n        if(status){\n            formatted.allowed = (status.can[actionName] === true);\n            if(!formatted.allowed){\n                formatted.reason = status.can[actionName];\n            }\n        }\n        return formatted;\n    }\n\n    return {\n        getStatus : getStatus,\n        getStatusByCode : getStatusByCode,\n        verifyTestTaker : verifyTestTaker\n    };\n});\n\n\n","/*\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2015 (original work) Open Assessment Technologies SA ;\n *\n */\ndefine('taoProctoring/component/breadcrumbs',['ui/breadcrumbs'], function(breadcrumbs){\n    \n    /**\n     * Wrap the generic breadcrumbs component into a very specialized\n     * \n     * @param {JQyery} $container\n     * @param {Array} [crumbs]\n     * @returns {unresolved}\n     */\n    return function breadcrumbFactory($container, crumbs){\n        return breadcrumbs({\n            breadcrumbs : crumbs || $container.data('breadcrumbs'),\n            renderTo: $container.find('.header'),\n            replace: true,\n            cls : 'action-bar horizontal-action-bar'\n        });\n    };\n});\n\n\n","\ndefine('tpl!taoProctoring/templates/delivery/listBoxActions', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, functionType=\"function\", escapeExpression=this.escapeExpression, helperMissing=helpers.helperMissing;\n\n\n  buffer += \"<span class=\\\"listbox-actions\\\">\\n    <span class=\\\"action pause\\\" data-delivery=\\\"\";\n  if (helper = helpers.id) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.id); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\">\\n        <span class=\\\"icon-pause\\\"></span>\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Pause\", options) : helperMissing.call(depth0, \"__\", \"Pause\", options)))\n    + \"\\n    </span>\\n    <span class=\\\"action play\\\">\\n        <span class=\\\"icon-play\\\"></span>\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Monitor\", options) : helperMissing.call(depth0, \"__\", \"Monitor\", options)))\n    + \"\\n    </span>\\n</span>\";\n  return buffer;\n  });\n});\n\n","\ndefine('tpl!taoProctoring/templates/delivery/listBoxStats', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, helperMissing=helpers.helperMissing, escapeExpression=this.escapeExpression, functionType=\"function\", self=this;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", stack1, helper, options;\n  buffer += \"\\n<ul class=\\\"plain listbox-properties\\\">\\n    <li>\\n        <label>\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Start\", options) : helperMissing.call(depth0, \"__\", \"Start\", options)))\n    + \"</label>: \";\n  if (helper = helpers.periodStart) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.periodStart); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\n    </li>\\n    <li>\\n        <label>\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"End\", options) : helperMissing.call(depth0, \"__\", \"End\", options)))\n    + \"</label>: \";\n  if (helper = helpers.periodEnd) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.periodEnd); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\n    </li>\\n</ul>\\n\";\n  return buffer;\n  }\n\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.showProperties), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n<p class=\\\"listbox-stats\\\">\\n    <span class=\\\"icon-lock\\\"></span><span class=\\\"number\\\">\";\n  if (helper = helpers.locked) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.locked); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"</span>\\n    <span class=\\\"icon-play\\\"></span><span class=\\\"number\\\">\";\n  if (helper = helpers.inProgress) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.inProgress); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"</span>\\n    <span class=\\\"icon-pause\\\"></span><span class=\\\"number\\\">\";\n  if (helper = helpers.paused) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.paused); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"</span>\\n</p>\";\n  return buffer;\n  });\n});\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2015 (original work) Open Assessment Technologies SA ;\n */\n/**\n * @author Jean-Sébastien Conan <jean-sebastien.conan@vesperiagroup.com>\n */\ndefine('taoProctoring/controller/Delivery/index',[\n    'lodash',\n    'jquery',\n    'i18n',\n    'helpers',\n    'layout/loading-bar',\n    'ui/listbox',\n    'util/encode',\n    'ui/feedback',\n    'ui/bulkActionPopup',\n    'ui/cascadingComboBox',\n    'taoProctoring/helper/status',\n    'taoProctoring/component/breadcrumbs',\n    'tpl!taoProctoring/templates/delivery/listBoxActions',\n    'tpl!taoProctoring/templates/delivery/listBoxStats'\n], function (_, $, __, helpers, loadingBar, listBox, encode, feedback, bulkActionPopup, cascadingComboBox, _status, breadcrumbsFactory, actionsTpl, statsTpl) {\n    'use strict';\n\n    /**\n     * The polling delay used to refresh the list\n     * @type {Number}\n     */\n    var refreshPolling = 60 * 1000; // once per minute\n\n    /**\n     * The CSS scope\n     * @type {String}\n     */\n    var cssScope = '.delivery-index';\n\n    // the page is always loading data when starting\n    loadingBar.start();\n\n    /**\n     * Controls the ProctorDelivery index page\n     *\n     * @type {Object}\n     */\n    var taoProctoringCtlr = {\n        /**\n         * Entry point of the page\n         */\n        start : function start() {\n            var $container = $(cssScope);\n            var boxes = $container.data('list');\n            var crumbs = $container.data('breadcrumbs');\n            var categories = $container.data('categories');\n            var testCenterId = $container.data('testcenter');\n            var list = listBox({\n                title: __(\"Sessions\"),\n                textEmpty: __(\"No sessions available\"),\n                textNumber: __(\"Available\"),\n                textLoading: __(\"Loading\"),\n                renderTo: $container.find('.content'),\n                replace: true,\n                list: format(boxes),\n                width:12,\n\n                // discard the \"all sessions\" box from available count\n                countRenderer: function(count) {\n                    return count - 1;\n                }\n            });\n            var bc = breadcrumbsFactory($container, crumbs);\n            var serviceUrl = helpers._url('deliveries', 'Delivery', 'taoProctoring', {testCenter : testCenterId});\n            var pollTo = null;\n            \n            function format(boxes){\n                \n                _.each(boxes, function(box){\n\n                    var props = box.properties;\n                    var tplData = {\n                        locked : box.stats.awaitingApproval,\n                        inProgress : box.stats.inProgress,\n                        paused : box.stats.paused\n                    };\n\n                    if(props && props.periodStart && props.periodEnd){\n                        tplData.showProperties = true;\n                        tplData.periodStart = props.periodStart;\n                        tplData.periodEnd = props.periodEnd;\n\n                        //add a special class for boxes that have more information to display\n                        box.cls = 'has-properties-displayed';\n                    }\n                    box.html = actionsTpl({\n                        id : box.id\n                    });\n                    box.content = statsTpl(tplData);\n                });\n\n                return boxes;\n            }\n\n            // update the index from a JSON array\n            function update(boxes) {\n                \n                if (pollTo) {\n                    clearTimeout(pollTo);\n                    pollTo = null;\n                }\n\n                list.update(format(boxes));\n                loadingBar.stop();\n\n                // poll the server at regular interval to refresh the index\n                if (refreshPolling) {\n                    pollTo = setTimeout(refresh, refreshPolling);\n                }\n            }\n\n            // refresh the index\n            function refresh() {\n                loadingBar.start();\n                list.setLoading(true);\n\n                $.ajax({\n                    url: serviceUrl,\n                    cache: false,\n                    dataType : 'json',\n                    type: 'GET'\n                }).done(function(boxes) {\n                    update(boxes);\n                });\n            }\n            \n            /**\n             * Exec \n             * @param {String} actionName\n             * @param {String} actionTitle\n             * @param {Array} selection\n             * @param {Function} cb\n             * @returns {undefined}\n             */\n            function pause(deliveryId, selection){\n                \n                var allowed  = _.map(selection, function(data){\n                    return {\n                        id : data.id,\n                        label : data.testTaker.firstName + ' ' + data.testTaker.lastName\n                    };\n                });\n                \n                bulkActionPopup({\n                    renderTo : $container,\n                    actionName : __('Pause Session'),\n                    reason : true,\n                    resourceType : 'test taker',\n                    categoriesSelector: cascadingComboBox({\n                        categoriesDefinitions: categories.pause.categoriesDefinitions,\n                        categories: categories.pause.categories\n                    }),\n                    allowedResources : allowed\n                }).on('ok', function(reason){\n                    //execute callback\n                    $.ajax({\n                        url: helpers._url('pauseExecutions', 'Delivery', 'taoProctoring'),\n                        data: {\n                            delivery : deliveryId,\n                            testCenter : testCenterId,\n                            execution: _.pluck(selection, 'id'),\n                            reason: reason\n                        },\n                        dataType : 'json',\n                        type: 'POST',\n                        error: function() {\n                            loadingBar.stop();\n                        }\n                    }).done(function(response) {\n                        loadingBar.stop();\n                        if (response && response.success) {\n                            feedback().success('Selected deliveries successfully paused');\n                            refresh();\n                        } else {\n                            feedback().warning(__('Something went wrong ...') + '<br>' + encode.html(response.error), {encodeHtml: false});\n                        }\n                    });\n                });\n            }\n            \n            $container.on('click', '.pause', function(e){\n                \n                var deliveryId = $(this).data('delivery');\n                var pauseUrl = (deliveryId === 'all') ? \n                    helpers._url('allDeliveriesExecutions', 'Delivery', 'taoProctoring', {testCenter : testCenterId}) :\n                    helpers._url('deliveryExecutions', 'Delivery', 'taoProctoring', {delivery : deliveryId, testCenter : testCenterId});\n                \n                //prevent clicking the parent link that goes to the monitoring screen\n                e.stopPropagation();\n                e.preventDefault();\n                \n                //get list of all test taker for the selected delivery\n                $.get(pauseUrl, function(res){\n                    if(_.isPlainObject(res) && _.isArray(res.data)){\n                        var inProgressExecs = _.filter(res.data, function(data){\n                            return (data.state && data.state.status === _status.getStatus('inprogress').code);\n                        });\n                        if(inProgressExecs.length){\n                            pause(deliveryId, inProgressExecs);\n                        }else{\n                            feedback().info(__('There is no delivery in progress'));\n                        }\n                    }\n                });\n            });\n            \n            if (!boxes) {\n                refresh();\n            } else {\n                loadingBar.stop();\n            }\n        }\n    };\n\n    return taoProctoringCtlr;\n});\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2015 (original work) Open Assessment Technologies SA ;\n */\n/**\n * @author Jean-Sébastien Conan <jean-sebastien.conan@vesperiagroup.com>\n */\ndefine('taoProctoring/controller/Delivery/manage',[\n    'jquery',\n    'i18n',\n    'helpers',\n    'layout/loading-bar',\n    'util/encode',\n    'ui/feedback',\n    'ui/dialog',\n    'taoProctoring/component/breadcrumbs',\n    'ui/datatable'\n], function ($, __, helpers, loadingBar, encode, feedback, dialog, breadcrumbsFactory) {\n    'use strict';\n\n    /**\n     * The CSS scope\n     * @type {String}\n     */\n    var cssScope = '.delivery-manager';\n\n    // the page is always loading data when starting\n    loadingBar.start();\n\n    /**\n     * Controls the taoProctoring delivery page\n     *\n     * @type {Object}\n     */\n    var proctorDeliveryIndexCtlr = {\n        /**\n         * Entry point of the page\n         */\n        start : function start() {\n            var $container = $(cssScope);\n            var $list = $container.find('.list');\n            var crumbs = $container.data('breadcrumbs');\n            var dataset = $container.data('set');\n            var deliveryId = $container.data('delivery');\n            var testCenterId = $container.data('testcenter');\n            var assignUrl = helpers._url('testTakers', 'Delivery', 'taoProctoring', {delivery : deliveryId, testCenter : testCenterId});\n            var removeUrl = helpers._url('removeTestTakers', 'Delivery', 'taoProctoring', {delivery : deliveryId, testCenter : testCenterId});\n            var serviceUrl = helpers._url('deliveryTestTakers', 'Delivery', 'taoProctoring', {delivery : deliveryId, testCenter : testCenterId});\n            var monitoringUrl = helpers._url('monitoring', 'Delivery', 'taoProctoring', {delivery : deliveryId, testCenter: testCenterId});\n\n            var bc = breadcrumbsFactory($container, crumbs);\n\n            // request the server with a selection of test takers\n            var request = function(url, selection, message) {\n                if (selection && selection.length) {\n                    loadingBar.start();\n\n                    $.ajax({\n                        url: url,\n                        data: {\n                            testtaker: selection\n                        },\n                        dataType : 'json',\n                        type: 'POST',\n                        error: function() {\n                            loadingBar.stop();\n                        }\n                    }).done(function(response) {\n                        loadingBar.stop();\n\n                        if (response && response.success) {\n                            if (message) {\n                                feedback().success(message);\n                            }\n                            $list.datatable('refresh');\n                        } else {\n                            feedback().error(__('Something went wrong ...') + '<br>' + encode.html(response.error), {encodeHtml: false});\n                        }\n                    });\n                }\n            };\n\n            // request the server to remove the selected test takers\n            var remove = function(selection) {\n                request(removeUrl, selection, __('Test takers have been removed'));\n            };\n\n            $list\n                .on('query.datatable', function() {\n                    loadingBar.start();\n                })\n                .on('load.datatable', function() {\n                    loadingBar.stop();\n                })\n                .datatable({\n                    url: serviceUrl,\n                    status: {\n                        empty: __('No assigned test takers'),\n                        available: __('Assigned test takers'),\n                        loading: __('Loading')\n                    },\n                    tools: [{\n                        id: 'refresh',\n                        icon: 'reset',\n                        title: __('Refresh the page'),\n                        label: __('Refresh'),\n                        action: function() {\n                            $list.datatable('refresh');\n                        }\n                    }, {\n                        id: 'back',\n                        icon: 'preview',\n                        title: __('Return to the session monitoring'),\n                        label: __('Monitoring'),\n                        action: function() {\n                            location.href = monitoringUrl;\n                        }\n                    }, {\n                        id: 'assign',\n                        icon: 'add',\n                        title: __('Assign more test takers to this session'),\n                        label: __('Add test takers'),\n                        action: function() {\n                            location.href = assignUrl;\n                        }\n                    }, {\n                        id: 'remove',\n                        icon: 'remove',\n                        title: __('Remove the selected test takers from the session'),\n                        label: __('Remove'),\n                        massAction: true,\n                        action: function(selection) {\n                            dialog({\n                                message: __('The test takers will be removed from this session. Continue ?'),\n                                autoRender: true,\n                                autoDestroy: true,\n                                onOkBtn: function() {\n                                    remove(selection);\n                                }\n                            });\n                        }\n                    }],\n                    actions: [{\n                        id: 'remove',\n                        icon: 'remove',\n                        title: __('Remove the test taker from the session'),\n                        action: function(id) {\n                            dialog({\n                                autoRender: true,\n                                autoDestroy: true,\n                                message: __('The test taker will be removed from this session. Continue ?'),\n                                onOkBtn: function() {\n                                    remove([id]);\n                                }\n                            });\n                        }\n                    }],\n                    selectable: true,\n                    model: [{\n                        id: 'firstname',\n                        label: __('First name')\n                    }, {\n                        id: 'lastname',\n                        label: __('Last name')\n                    }, {\n                        id: 'identifier',\n                        label: __('Identifier')\n                    }, {\n                        id: 'status',\n                        label: __('Status')\n                    }]\n                }, dataset);\n        }\n    };\n\n    return proctorDeliveryIndexCtlr;\n});\n\n","\ndefine('tpl!taoProctoring/templates/delivery/itemProgress', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, functionType=\"function\", escapeExpression=this.escapeExpression, helperMissing=helpers.helperMissing, self=this;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"\\n    \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.position), {hash:{},inverse:self.noop,fn:self.program(2, program2, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.label), {hash:{},inverse:self.noop,fn:self.program(5, program5, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n\";\n  return buffer;\n  }\nfunction program2(depth0,data) {\n  \n  var buffer = \"\", stack1, helper, options;\n  buffer += \"<span class=\\\"state section-progress\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"section\", options) : helperMissing.call(depth0, \"__\", \"section\", options)))\n    + \" \";\n  if (helper = helpers.position) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.position); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1);\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.total), {hash:{},inverse:self.noop,fn:self.program(3, program3, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"</span>\";\n  return buffer;\n  }\nfunction program3(depth0,data) {\n  \n  var buffer = \"\", stack1, helper;\n  buffer += \"/\";\n  if (helper = helpers.total) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.total); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1);\n  return buffer;\n  }\n\nfunction program5(depth0,data) {\n  \n  var buffer = \"\", stack1, helper;\n  buffer += \"<span class=\\\"state section-label\\\">\";\n  if (helper = helpers.label) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.label); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"</span>\";\n  return buffer;\n  }\n\nfunction program7(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"\\n    \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.position), {hash:{},inverse:self.noop,fn:self.program(8, program8, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    \";\n  stack1 = helpers['with'].call(depth0, (depth0 && depth0.time), {hash:{},inverse:self.noop,fn:self.program(10, program10, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n\";\n  return buffer;\n  }\nfunction program8(depth0,data) {\n  \n  var buffer = \"\", stack1, helper, options;\n  buffer += \"<span class=\\\"state item-progress\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"item\", options) : helperMissing.call(depth0, \"__\", \"item\", options)))\n    + \" \";\n  if (helper = helpers.position) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.position); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1);\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.total), {hash:{},inverse:self.noop,fn:self.program(3, program3, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"</span>\";\n  return buffer;\n  }\n\nfunction program10(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"\\n        \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.display), {hash:{},inverse:self.noop,fn:self.program(11, program11, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    \";\n  return buffer;\n  }\nfunction program11(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"\\n    <span class=\\\"item-time\\\">\\n        <span class=\\\"icon icon-time\\\"></span>\\n            \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.elapsedStr), {hash:{},inverse:self.noop,fn:self.program(12, program12, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n            \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.totalStr), {hash:{},inverse:self.noop,fn:self.program(14, program14, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    </span>\\n        \";\n  return buffer;\n  }\nfunction program12(depth0,data) {\n  \n  var buffer = \"\", stack1, helper, options;\n  buffer += \"<span class=\\\"elapsed\\\" title=\\\"\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Elapsed time\", options) : helperMissing.call(depth0, \"__\", \"Elapsed time\", options)))\n    + \"\\\">\";\n  if (helper = helpers.elapsedStr) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.elapsedStr); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"</span>\";\n  return buffer;\n  }\n\nfunction program14(depth0,data) {\n  \n  var buffer = \"\", stack1, helper, options;\n  buffer += \"<span class=\\\"total\\\" title=\\\"\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Total time\", options) : helperMissing.call(depth0, \"__\", \"Total time\", options)))\n    + \"\\\">\";\n  if (helper = helpers.totalStr) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.totalStr); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"</span>\";\n  return buffer;\n  }\n\n  buffer += \"<span class=\\\"progress\\\">\\n\";\n  stack1 = helpers['with'].call(depth0, (depth0 && depth0.section), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n\";\n  stack1 = helpers['with'].call(depth0, (depth0 && depth0.item), {hash:{},inverse:self.noop,fn:self.program(7, program7, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n</span>\";\n  return buffer;\n  });\n});\n\n","\ndefine('tpl!taoProctoring/templates/delivery/deliveryLink', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression;\n\n\n  buffer += \"<a class=\\\"elipsis\\\" href=\\\"\";\n  if (helper = helpers.url) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.url); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" title=\\\"\";\n  if (helper = helpers.label) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.label); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\">\";\n  if (helper = helpers.label) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.label); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"</a>\";\n  return buffer;\n  });\n});\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2015 (original work) Open Assessment Technologies SA ;\n */\n/**\n * @author Jean-Sébastien Conan <jean-sebastien.conan@vesperiagroup.com>\n */\ndefine('taoProctoring/controller/Delivery/monitoring',[\n    'jquery',\n    'lodash',\n    'i18n',\n    'helpers',\n    'layout/loading-bar',\n    'util/encode',\n    'ui/feedback',\n    'ui/dialog',\n    'ui/bulkActionPopup',\n    'ui/cascadingComboBox',\n    'taoProctoring/component/breadcrumbs',\n    'taoProctoring/helper/status',\n    'tpl!taoProctoring/templates/delivery/itemProgress',\n    'tpl!taoProctoring/templates/delivery/deliveryLink',\n    'ui/datatable'\n], function (\n    $,\n    _,\n    __,\n    helpers,\n    loadingBar,\n    encode,\n    feedback,\n    dialog,\n    bulkActionPopup,\n    cascadingComboBox,\n    breadcrumbsFactory,\n    _status,\n    itemProgressTpl,\n    deliveryLinkTpl\n) {\n    'use strict';\n\n    /**\n     * The CSS scope\n     * @type {String}\n     */\n    var cssScope = '.delivery-monitoring';\n\n    // the page is always loading data when starting\n    loadingBar.start();\n\n    /**\n     * Formats a time value to string\n     * @param {Number} time\n     * @returns {String}\n     * @private\n     */\n    var _timerFormat = function(time) {\n        return __('%d min', Math.floor(time / 60));\n    };\n\n    var notYet = function() {\n        dialog({\n            message: __('Not yet implemented!'),\n            autoRender: true,\n            autoDestroy: true,\n            buttons: 'ok'\n        });\n    };\n    \n    /**\n     * Controls the taoProctoring delivery page\n     *\n     * @type {Object}\n     */\n    var proctorDeliveryIndexCtlr = {\n        /**\n         * Entry point of the page\n         */\n        start : function start() {\n            var $container = $(cssScope);\n            var $content = $container.find('.content');\n            var $list = $container.find('.list');\n            var crumbs = $container.data('breadcrumbs');\n            var dataset = $container.data('set');\n            var extraFields = $container.data('extrafields');\n            var categories = $container.data('categories');\n            var deliveryId = $container.data('delivery');\n            var testCenterId = $container.data('testcenter');\n            var manageUrl = helpers._url('manage', 'Delivery', 'taoProctoring', {delivery : deliveryId, testCenter : testCenterId});\n            var terminateUrl = helpers._url('terminateExecutions', 'Delivery', 'taoProctoring', {delivery : deliveryId, testCenter : testCenterId});\n            var pauseUrl = helpers._url('pauseExecutions', 'Delivery', 'taoProctoring', {delivery : deliveryId, testCenter : testCenterId});\n            var authoriseUrl = helpers._url('authoriseExecutions', 'Delivery', 'taoProctoring', {delivery : deliveryId, testCenter : testCenterId});\n            var reportUrl = helpers._url('reportExecutions', 'Delivery', 'taoProctoring', {delivery : deliveryId, testCenter : testCenterId});\n            var serviceUrl = helpers._url('deliveryExecutions', 'Delivery', 'taoProctoring', {delivery : deliveryId, testCenter : testCenterId});\n            var serviceAllUrl = helpers._url('allDeliveriesExecutions', 'Delivery', 'taoProctoring', {testCenter : testCenterId});\n            var tools = [];\n            var actions = [];\n            var model = [];\n            var actionButtons;\n            var bc = breadcrumbsFactory($container, crumbs);\n            \n            // request the server with a selection of test takers\n            function request(url, selection, reason, message) {\n                if (selection && selection.length) {\n                    loadingBar.start();\n\n                    $.ajax({\n                        url: url,\n                        data: {\n                            execution: selection,\n                            reason: reason\n                        },\n                        dataType : 'json',\n                        type: 'POST',\n                        error: function() {\n                            loadingBar.stop();\n                        }\n                    }).done(function(response) {\n                        loadingBar.stop();\n\n                        if (response && response.success) {\n                            if (message) {\n                                feedback().success(message);\n                            }\n                            $list.datatable('refresh');\n                        } else {\n                            feedback().error(__('Something went wrong ...') + '<br>' + encode.html(response.error), {encodeHtml: false});\n                        }\n                    });\n                }\n            }\n\n            // request the server to authorise the selected delivery executions\n            function authorise(selection) {\n                execBulkAction('authorize', __('Authorize Session'), selection, function(selection, reason){\n                    request(authoriseUrl, selection, reason, __('Sessions authorized'));\n                });\n            }\n\n            // request the server to pause the selected delivery executions\n            function pause(selection) {\n                execBulkAction('pause', __('Pause Session'), selection, function(selection, reason){\n                    request(pauseUrl, selection, reason, __('Sessions paused'));\n                });\n            }\n\n            // request the server to terminate the selected delivery executions\n            function terminate(selection) {\n                execBulkAction('terminate', __('Terminate Session'), selection, function(selection, reason){\n                    request(terminateUrl, selection, reason, __('Sessions terminated'));\n                });\n            }\n            \n            // report irregularities on the selected delivery executions\n            function report(selection) {\n                execBulkAction( 'report', __('Report Irregularity'), selection, function(selection, reason){\n                    request(reportUrl, selection, reason, __('Sessions reported'));\n                });\n            }\n            \n            /**\n             * Verify and reformat test taker data for the execBulkAction's need\n             * @param {Object} testTakerData\n             * @param {String} actionName\n             * @returns {Object}\n             */\n            function verifyTestTaker(testTakerData, actionName){\n                var formatted = {\n                    id : testTakerData.id,\n                    label : testTakerData.firstname+' '+testTakerData.lastname\n                };\n                var status = _status.getStatusByCode(testTakerData.state.status);\n                if(status){\n                    formatted.allowed = (status.can[actionName] === true);\n                    if(!formatted.allowed){\n                        formatted.reason = status.can[actionName];\n                    }\n                }\n                return formatted;\n            }\n            \n            /**\n             * Find the execution row data from its uri\n             * \n             * @param {String} uri\n             * @returns {Object}\n             */\n            function getExecutionData(uri){\n                return _.find(dataset.data, {id : uri});\n            }\n            \n            /**\n             * Exec \n             * @param {String} actionName\n             * @param {String} actionTitle\n             * @param {Array|String} selection\n             * @param {Function} cb\n             * @returns {undefined}\n             */\n            function execBulkAction(actionName, actionTitle, selection, cb){\n\n                var allowedTestTakers = [];\n                var forbiddenTestTakers = [];\n                var _selection = _.isArray(selection) ? selection : [selection];\n                var askForReason = (categories[actionName] && categories[actionName].categoriesDefinitions && categories[actionName].categoriesDefinitions.length);\n\n                _.each(_selection, function(uri){\n                    var testTaker = getExecutionData(uri);\n                    var checkedTestTaker;\n                    if(testTaker){\n                        checkedTestTaker = verifyTestTaker(testTaker, actionName);\n                        if(checkedTestTaker.allowed){\n                            allowedTestTakers.push(checkedTestTaker);\n                        }else{\n                            forbiddenTestTakers.push(checkedTestTaker);\n                        }\n                    }\n                });\n                var config = {\n                    renderTo : $content,\n                    actionName : actionTitle,\n                    reason : askForReason,\n                    resourceType : 'test taker',\n                    categoriesSelector: cascadingComboBox(categories[actionName]),\n                    allowedResources : allowedTestTakers,\n                    deniedResources : forbiddenTestTakers\n                };\n                \n                bulkActionPopup(config).on('ok', function(reason){\n                    //execute callback\n                    if(_.isFunction(cb)){\n                        cb(_selection, reason);\n                    }\n                });\n            }\n\n            // tool: page refresh\n            tools.push({\n                id: 'refresh',\n                icon: 'reset',\n                title: __('Refresh the page'),\n                label: __('Refresh'),\n                action: function() {\n                    $list.datatable('refresh');\n                }\n            });\n\n            // tool: manage test takers (only for unique delivery)\n            if (deliveryId) {\n                tools.push({\n                    id: 'manage',\n                    icon: 'property-advanced',\n                    title: __('Manage sessions'),\n                    label: __('Manage'),\n                    action: function() {\n                        location.href = manageUrl;\n                    }\n                });\n            }\n\n            // tool: authorise the executions\n            tools.push({\n                id: 'authorise',\n                icon: 'play',\n                title: __('Authorize sessions'),\n                label: __('Authorise'),\n                massAction: true,\n                action: authorise\n            });\n\n            // tool: pause the executions\n            tools.push({\n                id: 'pause',\n                icon: 'pause',\n                title: __('Pause sessions'),\n                label: __('Pause'),\n                massAction: true,\n                action: pause\n            });\n\n            // tool: terminate the executions\n            tools.push({\n                id: 'terminate',\n                icon: 'stop',\n                title: __('Terminate sessions'),\n                label: __('Terminate'),\n                massAction: true,\n                action: terminate\n            });\n\n            // tool: report irregularities\n            tools.push({\n                id: 'irregularity',\n                icon: 'delivery-small',\n                title: __('Report irregularities'),\n                label: __('Report'),\n                massAction: true,\n                action: report\n            });\n\n            // action: authorise the execution\n            actions.push({\n                id: 'authorise',\n                icon: 'play',\n                title: __('Authorize session'),\n                hidden: function() {\n                    var status;\n                    if(this.state && this.state.status){\n                        status = _status.getStatusByCode(this.state.status);\n                        return !status || status.can.authorize !== true;\n                    }\n                    return true;\n                },\n                action: authorise\n            });\n\n            // action: pause the execution\n            actions.push({\n                id: 'pause',\n                icon: 'pause',\n                title: __('Pause session'),\n                hidden: function() {\n                    var status;\n                    if(this.state && this.state.status){\n                        status = _status.getStatusByCode(this.state.status);\n                        return !status || status.can.pause !== true;\n                    }\n                    return true;\n                },\n                action: pause\n            });\n\n            // action: terminate the execution\n            actions.push({\n                id: 'terminate',\n                icon: 'stop',\n                title: __('Terminate session'),\n                hidden: function() {\n                    var status;\n                    if(this.state && this.state.status){\n                        status = _status.getStatusByCode(this.state.status);\n                        return !status || status.can.terminate !== true;\n                    }\n                    return true;\n                },\n                action: terminate\n            });\n\n            // action: report irregularities\n            actions.push({\n                id: 'irregularity',\n                icon: 'delivery-small',\n                title: __('Report irregularity'),\n                hidden: function() {\n                    var status;\n                    if(this.state && this.state.status){\n                        status = _status.getStatusByCode(this.state.status);\n                        return !status || status.can.report !== true;\n                    }\n                    return true;\n                },\n                action: report\n            });\n\n            // column: delivery (only for all deliveries view)\n            if (!deliveryId) {\n                model.push({\n                    id: 'delivery',\n                    label: __('Session'),\n                    transform: function(value, row) {\n                        var delivery = row && row.delivery;\n                        if (delivery) {\n                            delivery.url = helpers._url('monitoring', 'Delivery', 'taoProctoring', {delivery : delivery.uri, testCenter : testCenterId});\n                            value = deliveryLinkTpl(delivery);\n                        }\n                        return value;\n\n                    }\n                });\n            }\n\n            // column: test taker first name\n            model.push({\n                id: 'firstname',\n                label: __('First name'),\n                transform: function(value, row) {\n                    return row && row.testTaker && row.testTaker.firstName || '';\n\n                }\n            });\n\n            // column: test taker last name\n            model.push({\n                id: 'lastname',\n                label: __('Last name'),\n                transform: function(value, row) {\n                    return row && row.testTaker && row.testTaker.lastName || '';\n\n                }\n            });\n            \n            //extra fields\n            _.each(extraFields, function(extraField){\n                model.push({\n                    id : extraField.id,\n                    label: extraField.label,\n                    transform: function(value, row) {\n                        return row && row.extraFields && row.extraFields[extraField.id] || '';\n                    }\n                });\n            });\n            \n            // column: start time\n            model.push({\n                id: 'date',\n                label: __('Started at')\n            });\n\n            // column: delivery execution status\n            model.push({\n                id: 'status',\n                label: __('Status'),\n                transform: function(value, row) {\n                    if(row && row.state && row.state.status){\n                        var status = _status.getStatusByCode(row.state.status);\n                        if(status){\n                            return status.label;\n                        }\n                    }\n                    return '';\n                }\n            });\n\n            // column: delivery execution progress\n            model.push({\n                id: 'progress',\n                label: __('Progress'),\n                transform: function(value, row) {\n                \treturn row.state.description;\n                \t/*\n                    var state = row && row.state;\n                    var item = state && state.item;\n                    var time = item && item.time;\n                    if (time && time.elapsed) {\n                        time.elapsedStr = _timerFormat(time.elapsed);\n                        time.totalStr = _timerFormat(time.total);\n                        time.display = !!(time.elapsedStr || time.totalStr);\n                    }\n                    return itemProgressTpl(state);\n                    */\n                }\n            });\n            \n            // renders the datatable\n            $list\n                .on('query.datatable', function() {\n                    loadingBar.start();\n                })\n                .on('load.datatable', function(e, newDataset) {\n                    //update dateset in memory\n                    dataset = newDataset;\n                    \n                    //udate the buttons, which have been reconstructed\n                    actionButtons = _({\n                        authorize : $list.find('.action-bar').children('.tool-authorise'),\n                        pause : $list.find('.action-bar').children('.tool-pause'),\n                        terminate : $list.find('.action-bar').children('.tool-terminate'),\n                        report : $list.find('.action-bar').children('.tool-irregularity')\n                    });\n                    \n                    loadingBar.stop();\n                })\n                .on('select.datatable', function(e, newDataset) {\n                    //hide all controls then display each required one individually\n                    actionButtons.each(function($btn){\n                        $btn.hide();\n                    });\n                    _($list.datatable('selection')).map(function(uri){\n                        var row = getExecutionData(uri);\n                        return row.state.status;\n                    }).uniq().each(function(statusCode){\n                        var status = _status.getStatusByCode(statusCode);\n                        actionButtons.forIn(function($btn, action){\n                            if(status && status.can[action] === true){\n                                $btn.show();\n                            }\n                        });\n                    });\n                })\n                .datatable({\n                    url: deliveryId ? serviceUrl : serviceAllUrl,\n                    status: {\n                        empty: __('No sessions'),\n                        available: __('Current sessions'),\n                        loading: __('Loading')\n                    },\n                    tools: tools,\n                    actions: actions,\n                    model: model,\n                    selectable: true\n                }, dataset);\n                \n        }\n    };\n\n    return proctorDeliveryIndexCtlr;\n});\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2015 (original work) Open Assessment Technologies SA ;\n */\n/**\n * @author Jean-Sébastien Conan <jean-sebastien.conan@vesperiagroup.com>\n */\ndefine('taoProctoring/controller/Delivery/testTakers',[\n    'jquery',\n    'i18n',\n    'helpers',\n    'layout/loading-bar',\n    'util/encode',\n    'ui/feedback',\n    'taoProctoring/component/breadcrumbs',\n    'ui/datatable'\n], function ($, __, helpers, loadingBar, encode, feedback, breadcrumbsFactory) {\n    'use strict';\n\n    /**\n     * The CSS scope\n     * @type {String}\n     */\n    var cssScope = '.delivery-testtakers';\n\n    // the page is always loading data when starting\n    loadingBar.start();\n\n    /**\n     * Controls the ProctorDelivery test takers assign page\n     *\n     * @type {Object}\n     */\n    var proctorDeliveryAssignCtlr = {\n        /**\n         * Entry point of the page\n         */\n        start : function start() {\n            var $container = $(cssScope);\n            var $list = $container.find('.list');\n            var crumbs = $container.data('breadcrumbs');\n            var dataset = $container.data('set');\n            var deliveryId = $container.data('delivery');\n            var testCenterId = $container.data('testcenter');\n            var serviceUrl = helpers._url('availableTestTakers', 'Delivery', 'taoProctoring', {delivery : deliveryId, testCenter: testCenterId});\n            var assignUrl = helpers._url('assignTestTakers', 'Delivery', 'taoProctoring', {delivery : deliveryId, testCenter: testCenterId});\n            var managerUrl = helpers._url('manage', 'Delivery', 'taoProctoring', {delivery : deliveryId, testCenter: testCenterId});\n\n            var bc = breadcrumbsFactory($container, crumbs);\n\n            // send the selection to the server and redirect to the index page\n            var assign = function(selection) {\n                if (selection && selection.length) {\n                    loadingBar.start();\n\n                    $.ajax({\n                        url: assignUrl,\n                        data: {\n                            testtaker: selection\n                        },\n                        dataType : 'json',\n                        type: 'POST',\n                        error: function() {\n                            loadingBar.stop();\n                        }\n                    }).done(function(response) {\n                        loadingBar.stop();\n\n                        if (response && response.success) {\n                            feedback().success(__('Test takers have been added'));\n                            location.href = managerUrl;\n                        } else {\n                            feedback().error(__('Something went wrong ...') + '<br>' + encode.html(response.error), {encodeHtml: false});\n                        }\n                    });\n                }\n            };\n\n            $list\n                .on('query.datatable', function() {\n                    loadingBar.start();\n                })\n                .on('load.datatable', function(event, response) {\n                    loadingBar.stop();\n                })\n                .datatable({\n                    url: serviceUrl,\n                    status: {\n                        empty: __('No available test takers to assign'),\n                        available: __('Available test takers'),\n                        loading: __('Loading')\n                    },\n                    tools: [{\n                        id: 'back',\n                        icon: 'left',\n                        title: __('Return to the session manager'),\n                        label: __('Back'),\n                        action: function() {\n                            location.href = managerUrl;\n                        }\n                    }, {\n                        id: 'refresh',\n                        icon: 'reset',\n                        title: __('Refresh the page'),\n                        label: __('Refresh'),\n                        action: function() {\n                            $list.datatable('refresh');\n                        }\n                    }, {\n                        id: 'assign',\n                        icon: 'add',\n                        title: __('Assign the selected test takers to the session'),\n                        label: __('Assign the selected test takers'),\n                        massAction: true,\n                        action: function(selection) {\n                            assign(selection);\n                        }\n                    }],\n                    actions: [{\n                        id: 'assign',\n                        icon: 'add',\n                        title: __('Assign the test taker to the session'),\n                        action: function(id) {\n                            assign([id]);\n                        }\n                    }],\n                    selectable: true,\n                    model: [{\n                        id: 'firstname',\n                        label: __('First name')\n                    }, {\n                        id: 'lastname',\n                        label: __('Last name')\n                    }, {\n                        id: 'identifier',\n                        label: __('Identifier')\n                    }]\n                }, dataset);\n        }\n    };\n\n    return proctorDeliveryAssignCtlr;\n});\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2015 (original work) Open Assessment Technologies SA;\n *\n * Keep duration of test-taker activity in localstorage\n */\n\ndefine('taoQtiTest/testRunner/resumingStrategy/keepAfterResume',[], function () {\n    'use strict';\n\n    /**\n     * @param {Object} options\n     * @param {string} options.accuracy - period of user status checking\n     */\n    var sessionStateFactory = function sessionStateFactory(options) {\n        var _storageKey = 'sessionState_active_for',\n            _accuracy,\n            _interval = null;\n\n        var sessionState = {\n\n            reset: function reset() {\n                _reset();\n            },\n\n            restart: function restart() {\n                _reset();\n                _start();\n            },\n\n            getDuration: function getDuration() {\n                return getLocalStorageData();\n            }\n        };\n\n        function _start() {\n            if (null !== _interval) {\n                throw new TypeError('Tracking is already started');\n            }\n            _interval = setInterval(function () {\n                setLocalStorageData(getLocalStorageData() + _accuracy);\n            }, _accuracy);\n        }\n\n        function _stop() {\n            clearInterval(_interval);\n            _interval = null;\n        }\n\n        function _reset() {\n            _stop();\n            clearLocalStorage();\n        }\n\n        function _init() {\n            _accuracy = options && options.accuracy || 1000;\n        }\n\n        _init();\n\n        /**\n         * Store duration in ms to local storage\n         * @param {*} val - data to be stored.\n         */\n        function setLocalStorageData(val) {\n            window.localStorage.setItem(_storageKey, val);\n        }\n\n        /**\n         * Get duration from local storage\n         * @returns {int} in ms\n         */\n        function getLocalStorageData() {\n            var data = window.localStorage.getItem(_storageKey),\n                result = JSON.parse(data) || 0;\n            return result;\n        }\n\n        /**\n         * Clear storage\n         */\n        function clearLocalStorage() {\n            window.localStorage.removeItem(_storageKey);\n        }\n\n        return sessionState;\n    };\n\n    return sessionStateFactory;\n});\n","\ndefine('tpl!taoProctoring/templates/deliveryServer/authorizationSuccess', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\", escapeExpression=this.escapeExpression;\n\n\n  buffer += \"<span class=\\\"success-message\\\">\";\n  if (helper = helpers.message) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.message); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"<span class=\\\"icon-result-ok\\\"></span></span>\";\n  return buffer;\n  });\n});\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2015 (original work) Open Assessment Technologies SA ;\n */\n/**\n * @author Jean-Sébastien Conan <jean-sebastien.conan@vesperiagroup.com>\n */\ndefine('taoProctoring/controller/DeliveryServer/awaiting',[\n    'lodash',\n    'jquery',\n    'i18n',\n    'helpers',\n    'layout/loading-bar',\n    'ui/listbox',\n    'ui/dialog/alert',\n    'core/polling',\n    'taoQtiTest/testRunner/resumingStrategy/keepAfterResume',\n    'tpl!taoProctoring/templates/deliveryServer/authorizationSuccess'\n], function (_, $, __, helpers, loadingBar, listBox, dialogAlert, polling, keepAfterResume, authSuccessTpl){\n    'use strict';\n\n    /**\n     * The polling delay used to refresh the list\n     * @type {Number}\n     */\n    var refreshPolling = 10 * 1000; // once every 10 seconds\n\n    /**\n     * The CSS scope\n     * @type {String}\n     */\n    var cssScope = '.awaiting-authorization';\n\n    /**\n     * Controls the ProctorDelivery index page\n     *\n     * @type {Object}\n     */\n    var awaitingAuthorizationCtlr = {\n        /**\n         * Entry point of the page\n         */\n        start : function start(config){\n\n            var $container = $(cssScope);\n            var isAuthorizedUrl = helpers._url('isAuthorized', 'DeliveryServer', 'taoProctoring', {deliveryExecution : config.deliveryExecution});\n            var runDeliveryUrl = helpers._url('runDeliveryExecution', 'DeliveryServer', 'taoProctoring', {deliveryExecution : config.deliveryExecution});\n            var boxes = [{\n                    id : 'goToDelivery',\n                    label : config.deliveryLabel,\n                    url : runDeliveryUrl,\n                    content : __('Please wait, authorization in process ...'),\n                    text : __('Proceed')\n                }];\n            var list = listBox({\n                title : config.deliveryInit ? __('Start Test') : __('Resume Test'),\n                textEmpty : '',\n                textNumber : '',\n                textLoading : '',\n                renderTo : $container,\n                list : boxes,\n                width : 12\n            });\n            var $content = $container.find('.listbox .content');\n\n            // we need to reset the local timer to avoid loss of time inside the assessment test session\n            keepAfterResume().reset();\n\n            loadingBar.start();\n\n            polling({\n                action : function (){\n                    var async = this.async();\n                    $.get(isAuthorizedUrl, function(result){\n                        var stop = false;\n\n                        if (!result.success) {\n                            stop = true;\n                            if (result.message) {\n                                dialogAlert(result.message, exit);\n                            } else {\n                                exit();\n                            }\n                        } else if (result.authorized) {\n                            stop = true;\n                            authorized();\n                        }\n\n                        if (stop) {\n                            async.reject();\n                        } else {\n                            async.resolve();\n                        }\n                    });\n                },\n                interval : refreshPolling,\n                autoStart : true\n            });\n            \n            /**\n             * Function to be called when the delivery execution has been authorized\n             */\n            function authorized(){\n                loadingBar.stop();\n                //@todo it would be nice to smoothen the transition\n                $container.removeClass('authorization-in-progress');\n                $content.html(authSuccessTpl({message : __('Authorized, you may proceed')}));\n            }\n\n            /**\n             * Goes back to the delivery index\n             */\n            function exit() {\n                location.href = config.returnUrl;\n            }\n        }\n    };\n\n    return awaitingAuthorizationCtlr;\n});\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2015 (original work) Open Assessment Technologies SA ;\n */\n/**\n * @author Jean-Sébastien Conan <jean-sebastien.conan@vesperiagroup.com>\n */\ndefine('taoProctoring/controller/Diagnostic/index',[\n    'jquery',\n    'i18n',\n    'helpers',\n    'layout/loading-bar',\n    'util/encode',\n    'ui/feedback',\n    'ui/dialog',\n    'taoProctoring/component/breadcrumbs',\n    'ui/datatable'\n], function ($, __, helpers, loadingBar, encode, feedback, dialog, breadcrumbsFactory) {\n    'use strict';\n\n    /**\n     * The CSS scope\n     * @type {String}\n     */\n    var cssScope = '.diagnostic-index';\n\n    // the page is always loading data when starting\n    loadingBar.start();\n\n    /**\n     * Controls the taoProctoring readiness check page\n     *\n     * @type {Object}\n     */\n    var taoProctoringDiagnosticCtlr = {\n        /**\n         * Entry point of the page\n         */\n        start : function start() {\n            var $container = $(cssScope);\n            var $list = $container.find('.list');\n            var crumbs = $container.data('breadcrumbs');\n            var dataset = $container.data('set');\n            var testCenterId = $container.data('testCenter');\n            var removeUrl = helpers._url('remove', 'Diagnostic', 'taoProctoring', {testCenter : testCenterId});\n            var serviceUrl = helpers._url('index', 'Diagnostic', 'taoProctoring', {testCenter : testCenterId});\n\n            var bc = breadcrumbsFactory($container, crumbs);\n\n            // request the server with a selection of readiness check results\n            var request = function(url, selection, message) {\n                if (selection && selection.length) {\n                    loadingBar.start();\n\n                    $.ajax({\n                        url: url,\n                        data: {\n                            report: selection\n                        },\n                        dataType : 'json',\n                        type: 'POST',\n                        error: function() {\n                            loadingBar.stop();\n                        }\n                    }).done(function(response) {\n                        loadingBar.stop();\n\n                        if (response && response.success) {\n                            if (message) {\n                                feedback().success(message);\n                            }\n                            $list.datatable('refresh');\n                        } else {\n                            feedback().error(__('Something went wrong ...') + '<br>' + encode.html(response.error), {encodeHtml: false});\n                        }\n                    });\n                }\n            };\n\n            var notYet = function() {\n                dialog({\n                    message: __('Not yet implemented!'),\n                    autoRender: true,\n                    autoDestroy: true,\n                    buttons: 'ok'\n                });\n            };\n\n            // request the server to remove the selected diagnostic-index\n            var remove = function(selection) {\n                notYet();\n                //request(removeUrl, selection, __('The readiness check result have been removed'));\n            };\n            \n            $list\n                .on('query.datatable', function() {\n                    loadingBar.start();\n                })\n                .on('load.datatable', function() {\n                    loadingBar.stop();\n                })\n                .datatable({\n                    url: serviceUrl,\n                    status: {\n                        empty: __('No readiness checks have been done!'),\n                        available: __('Readiness checks already done'),\n                        loading: __('Loading')\n                    },\n                    tools: [{\n                        id: 'launch',\n                        icon: 'play',\n                        title: __('Launch another readiness check'),\n                        label: __('Launch readiness check'),\n                        action: function() {\n                            notYet();\n                        }\n                    }, {\n                        id: 'remove',\n                        icon: 'remove',\n                        title: __('Remove the selected readiness check results'),\n                        label: __('Remove'),\n                        massAction: true,\n                        action: function(selection) {\n                            dialog({\n                                message: __('The selected readiness check results will be removed. Continue ?'),\n                                autoRender: true,\n                                autoDestroy: true,\n                                onOkBtn: function() {\n                                    remove(selection);\n                                }\n                            });\n                        }\n                    }],\n                    actions: [{\n                        id: 'remove',\n                        icon: 'remove',\n                        title: __('Remove the readiness check result?'),\n                        action: function(id) {\n                            dialog({\n                                autoRender: true,\n                                autoDestroy: true,\n                                message: __('The readiness check result will be removed. Continue ?'),\n                                onOkBtn: function() {\n                                    remove([id]);\n                                }\n                            });\n                        }\n                    }],\n                    selectable: true,\n                    model: [{\n                        id: 'workstation',\n                        label: __('Workstation')\n                    }, {\n                        id: 'os',\n                        label: __('OS')\n                    }, {\n                        id: 'browser',\n                        label: __('Browser')\n                    }, {\n                        id: 'performance',\n                        label: __('Performance')\n                    }, {\n                        id: 'bandwidth',\n                        label: __('Bandwidth'),\n                        transform: function(value) {\n                            var bandwidth = value;\n\n                            if (value > 100) {\n                                bandwidth = '> 100';\n                            }\n\n                            return bandwidth + ' Mbs';\n                        }\n                    }, {\n                        id: 'date',\n                        label: __('Date')\n                    }]\n                }, dataset);\n        }\n    };\n\n    return taoProctoringDiagnosticCtlr;\n});\n\n","\ndefine('tpl!taoProctoring/component/proctorForm/form', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\";\n\n\n  buffer += \"<div class=\\\"proctor-form section-container\\\">\\n    <div class=\\\"content-block\\\">\\n        \";\n  if (helper = helpers.form) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.form); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    </div>\\n</div>\";\n  return buffer;\n  });\n});\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2015 (original work) Open Assessment Technologies SA ;\n */\n/**\n * @author Sam <sam@taotesting.com>\n */\ndefine('taoProctoring/component/proctorForm',[\n    'lodash',\n    'jquery',\n    'i18n',\n    'helpers',\n    'users',\n    'ui/feedback',\n    'ui/component',\n    'tpl!taoProctoring/component/proctorForm/form'\n], function(_, $, __, helpers, users, feedback, component, formTpl){\n    'use strict';\n\n    var _ns = '.proctor-form';\n\n    //service urls:\n    var proctorFormUrl = helpers._url('createProctorForm', 'ProctorManager', 'taoProctoring');\n    var proctorLoginCheckUrl = helpers._url('checkLogin', 'ProctorManager', 'taoProctoring');\n    \n    //initialize legacy components\n    helpers.init();\n    \n    /**\n     * Render the form from the server provided data\n     * \n     * @param {JQuery} $container\n     * @param {Object} formData\n     */\n    function renderFormFromData($container, formData){\n        $container.html(formTpl({\n            form : formData.form\n        }));\n        users.checkLogin(formData.loginId, proctorLoginCheckUrl);\n    }\n    \n    /**\n     * Create a proctor creation form\n     * \n     * @param {type} config\n     * @param {JQuery} config.renderTo - the jQuery container it should be rendered to\n     * @param {Object} config.testCenterList - the test center list component\n     * @returns {proctorForm}\n     */\n    return function proctorFormFactory(config){\n\n        return component()\n            .on('destroy', function(){\n                this.getElement().off(_ns).empty();\n            })\n            .on('render', function(){\n\n                var self = this;\n                var $element = this.getElement();\n\n                $.get(proctorFormUrl, function(formData){\n\n                    renderFormFromData($element, formData);\n\n                    $element.on('submit' + _ns, 'form', function(e){\n\n                        var $form = $(this);\n                        var fields = $form.serializeArray();\n                        var list = self.config.testCenterList;\n                        var data = {\n                            testCenters : list && list.getSelection()\n                        };\n                        _.each(fields, function(field){\n                            data[field.name] = field.value;\n                        });\n\n                        $.post(proctorFormUrl, data, function(res){\n                            if(res.created){\n                                feedback().success(__('Proctor created'));\n                                self.destroy();\n                            }else{\n                                renderFormFromData($element, res);\n                            }\n                        });\n\n                        e.preventDefault();\n                        \n                    }).on('click', 'button.btn-diasble', function() {\n                        self.destroy();\n                    });\n                });\n            })\n            .init(config);\n    };\n});\n\n","\ndefine('tpl!taoProctoring/templates/proctorManager/counters', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var stack1, functionType=\"function\", escapeExpression=this.escapeExpression, self=this;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"\\n    \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.count), {hash:{},inverse:self.noop,fn:self.program(2, program2, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n\";\n  return buffer;\n  }\nfunction program2(depth0,data) {\n  \n  var buffer = \"\", stack1, helper;\n  buffer += \"<div class=\\\"\";\n  if (helper = helpers.cls) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.cls); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\"><span class=\\\"text\\\">\";\n  if (helper = helpers.label) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.label); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"</span>: <span class=\\\"count\\\">\";\n  if (helper = helpers.count) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.count); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"</span></div>\";\n  return buffer;\n  }\n\n  stack1 = helpers.each.call(depth0, depth0, {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { return stack1; }\n  else { return ''; }\n  });\n});\n\n","\ndefine('tpl!taoProctoring/templates/proctorManager/status', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helperMissing=helpers.helperMissing, escapeExpression=this.escapeExpression, functionType=\"function\", self=this;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", helper, options;\n  buffer += escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Authorized\", options) : helperMissing.call(depth0, \"__\", \"Authorized\", options)))\n    + \" <span class=\\\"icon icon-authorize\\\"></span>\";\n  return buffer;\n  }\n\nfunction program3(depth0,data) {\n  \n  var buffer = \"\", stack1, helper, options;\n  buffer += \"<span title=\\\"\";\n  if (helper = helpers.testCenters) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.testCenters); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Partially authorized\", options) : helperMissing.call(depth0, \"__\", \"Partially authorized\", options)))\n    + \"</span>\";\n  return buffer;\n  }\n\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.authorized), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n\";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.partially), {hash:{},inverse:self.noop,fn:self.program(3, program3, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  return buffer;\n  });\n});\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2015 (original work) Open Assessment Technologies SA ;\n */\n/**\n * @author Sam <sam@taotesting.com>\n */\ndefine('taoProctoring/controller/ProctorManager/index',[\n    'lodash',\n    'jquery',\n    'i18n',\n    'helpers',\n    'layout/loading-bar',\n    'util/encode',\n    'ui/feedback',\n    'ui/dialog/confirm',\n    'ui/bulkActionPopup',\n    'ui/datalist',\n    'taoProctoring/component/breadcrumbs',\n    'taoProctoring/component/proctorForm',\n    'tpl!taoProctoring/templates/proctorManager/counters',\n    'tpl!taoProctoring/templates/proctorManager/status',\n    'ui/datatable'\n], function (_, $, __, helpers, loadingBar, encode, feedback, dialogConfirm, bulkActionPopup, datalist, breadcrumbsFactory, proctorForm, counterTpl, statusTpl) {\n    'use strict';\n    \n    /**\n     * The CSS scope\n     * @type {String}\n     */\n    var cssScope = '.proctorManager-index';\n    \n    //service urls:\n    var proctorsDataUrl = helpers._url('proctorAuthorizations', 'ProctorManager', 'taoProctoring');\n    var authorizeUrl = helpers._url('authorize', 'ProctorManager', 'taoProctoring');\n    var unauthorizeUrl = helpers._url('unauthorize', 'ProctorManager', 'taoProctoring');\n\n    // page modes\n    var _modes = {\n        EMPTY: 0,\n        LIST: 1,\n        FORM: 2\n    };\n\n    // the page is always loading data when starting\n    loadingBar.start();\n\n    /**\n     * Controls the ProctorDelivery index page\n     *\n     * @type {Object}\n     */\n    var taoProctoringCtlr = {\n        /**\n         * Entry point of the page\n         */\n        start : function start() {\n            \n            var $container = $(cssScope);\n            var $panelSelection = $('.test-center-panel');\n            var $panelData = $('.proctor-panel');\n            var $containerList = $('.proctor-list');\n            var $containerForm = $('.proctor-create');\n            var $noSelection = $('.proctor-default');\n            var testCenters = $container.data('list');\n            var crumbs = $container.data('breadcrumbs');\n            var pageMode = _modes.EMPTY;\n            var bc = breadcrumbsFactory($container, crumbs);\n            var list = datalist({\n                renderTo: $panelSelection,\n                textNumber:  __('Test sites'),\n                labelText: __('Test site'),\n                selectable: true\n            }, testCenters);\n\n            function request(url, selection, message) {\n                if (selection && selection.length) {\n                    loadingBar.start();\n\n                    $.ajax({\n                        url: url,\n                        data: {\n                            testCenters: list.getSelection(),\n                            proctors: selection\n                        },\n                        dataType : 'json',\n                        type: 'POST',\n                        error: function() {\n                            loadingBar.stop();\n                        }\n                    }).done(function(response) {\n                        loadingBar.stop();\n\n                        if (response && response.success) {\n                            if (message) {\n                                feedback().success(message);\n                            }\n                            $containerList.datatable('refresh');\n                        } else {\n                            feedback().error(__('Something went wrong ...') + '<br>' + encode.html(response.error), {encodeHtml: false});\n                        }\n                    });\n                }\n            }\n\n            function authorize(selection, message) {\n                dialogConfirm(message, function() {\n                    request(authorizeUrl, selection, __('Proctors authorized'));\n                });\n            }\n\n            function revoke(selection, message) {\n                dialogConfirm(message, function() {\n                    request(unauthorizeUrl, selection, __('Proctors revoked'));\n                });\n            }\n\n            function processMode(selection) {\n                if (!selection.length) {\n                    if (_modes.LIST === pageMode) {\n                        pageMode = _modes.EMPTY;\n                    } else if (_modes.EMPTY !== pageMode) {\n                        feedback().warning(__('You must select at least one test center!'));\n                    }\n                } else {\n                    switch (pageMode) {\n                        case _modes.EMPTY:\n                            pageMode = _modes.LIST;\n\n                        case _modes.LIST:\n                            $containerList\n                                // erase previous parameters to prevent the datatable to keep old values\n                                .datatable('options', {\n                                    params: {testCenters: null}\n                                })\n                                // set new parameter value\n                                .datatable('options', {\n                                    params: {testCenters: selection}\n                                })\n                                .datatable('refresh');\n                            break;\n\n                        case _modes.FORM:\n                            // the form manages itself the selection\n                            break;\n                    }\n                }\n\n                $noSelection.toggleClass('hidden', _modes.EMPTY !== pageMode);\n                $containerList.toggleClass('hidden', _modes.LIST !== pageMode);\n                $containerForm.toggleClass('hidden', _modes.FORM !== pageMode);\n            }\n\n            list.on('select', function(selection) {\n                processMode(selection);\n            });\n\n            $containerList\n                .on('query.datatable', function() {\n                    loadingBar.start();\n                })\n                .on('load.datatable', function(e, dataset) {\n                    var partially = 0;\n                    var authorized = 0;\n                    var lines = dataset && dataset.data;\n                    _.forEach(lines, function(line) {\n                        if (line && line.status) {\n                            switch (line.status) {\n                                case 1: partially ++; break;\n                                case 2: authorized ++; break;\n                            }\n                        }\n\n                    });\n\n                    $(this).find('.datatable-wrapper h2').append(counterTpl([{\n                        id: 'authorized-list',\n                        label: __('Authorized proctors'),\n                        count: authorized\n                    }, {\n                        id: 'partially-list',\n                        label: __('Partially authorized proctors'),\n                        count: partially\n                    }]));\n\n                    loadingBar.stop();\n                })\n                .datatable({\n                    url: proctorsDataUrl,\n                    status: {\n                        empty: __('No assigned proctors'),\n                        available: __('Assigned proctors'),\n                        loading: __('Loading')\n                    },\n                    tools: [{\n                        id: 'refresh',\n                        icon: 'reset',\n                        title: __('Refresh the page'),\n                        label: __('Refresh'),\n                        action: function() {\n                            $containerList.datatable('refresh');\n                        }\n                    }, {\n                        id: 'create',\n                        icon: 'add',\n                        title: __('Creates and authorizes proctor'),\n                        label: __('Create Proctor'),\n                        action: function() {\n                            var selection = list.getSelection();\n                            // switch to proctorForm\n                            proctorForm({\n                                renderTo : $containerForm,\n                                testCenterList : list\n                            }).on('destroy', function() {\n                                pageMode = _modes.LIST;\n                                processMode(list.getSelection());\n                            });\n                            pageMode = _modes.FORM;\n                            processMode(selection);\n                        }\n                    }, {\n                        id: 'authorize',\n                        icon: 'authorize',\n                        title: __('Authorize the selected proctors'),\n                        label: __('Authorize'),\n                        massAction: true,\n                        action: function(selection) {\n                            authorize(selection, __('The proctors will be authorized. Continue ?'));\n                        }\n                    }, {\n                        id: 'revoke',\n                        icon: 'revoke',\n                        title: __('Revoke authorization for the selected proctors'),\n                        label: __('Revoke'),\n                        massAction: true,\n                        action: function(selection) {\n                            revoke(selection, __('The proctors will be revoked. Continue ?'));\n                        }\n                    }],\n                    actions: [{\n                        id: 'authorize',\n                        icon: 'authorize',\n                        title: __('Authorize the proctor'),\n                        hidden: function() {\n                            return this.status === 2;\n                        },\n                        action: function(id) {\n                            authorize([id], __('The proctor will be authorized. Continue ?'));\n                        }\n                    }, {\n                        id: 'revoke',\n                        icon: 'revoke',\n                        title: __('Revoke the proctor'),\n                        hidden: function() {\n                            return !this.status;\n                        },\n                        action: function(id) {\n                            revoke([id], __('The proctor will be revoked. Continue ?'));\n                        }\n                    }],\n                    selectable: true,\n                    model: [{\n                        id: 'firstname',\n                        label: __('First name')\n                    }, {\n                        id: 'lastname',\n                        label: __('Last name')\n                    }, {\n                        id: 'login',\n                        label: __('Login')\n                    }, {\n                        id: 'state',\n                        label: __('Status'),\n                        transform: function(value, row) {\n                            return statusTpl({\n                                testCenters: row.authorized,\n                                partially: row.status === 1,\n                                authorized: row.status === 2\n                            });\n                        }\n                    }]\n                }, []);\n\n            loadingBar.stop();\n        }\n    };\n\n    return taoProctoringCtlr;\n});\n\n","\ndefine('tpl!taoProctoring/templates/reporting/datepicker', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, helperMissing=helpers.helperMissing, escapeExpression=this.escapeExpression, functionType=\"function\";\n\n\n  buffer += \"<form class=\\\"datepicker\\\">\\n    <label>\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"From\", options) : helperMissing.call(depth0, \"__\", \"From\", options)))\n    + \"</label><input type=\\\"text\\\" name=\\\"periodStart\\\" value=\\\"\";\n  if (helper = helpers.start) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.start); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\"/>\\n    <label>\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"to\", options) : helperMissing.call(depth0, \"__\", \"to\", options)))\n    + \"</label><input type=\\\"text\\\" name=\\\"periodEnd\\\" value=\\\"\";\n  if (helper = helpers.end) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.end); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\"/>\\n    <button class=\\\"small info\\\" data-control=\\\"filter\\\"><span class=\\\"icon icon-reset\\\"></span>\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Refresh\", options) : helperMissing.call(depth0, \"__\", \"Refresh\", options)))\n    + \"</button>\\n</form>\";\n  return buffer;\n  });\n});\n\n","\ndefine('tpl!taoProctoring/templates/reporting/irregularities', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, functionType=\"function\", escapeExpression=this.escapeExpression, self=this;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", stack1, helper;\n  buffer += \"\\n    <li class=\\\"irregularity\\\">\\n        <span class=\\\"timestamp\\\">\";\n  if (helper = helpers.timestamp) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.timestamp); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"</span>\\n        <span class=\\\"type\\\">\";\n  if (helper = helpers.type) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.type); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"</span>\\n        \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.reason), {hash:{},inverse:self.noop,fn:self.program(2, program2, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n        \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.comment), {hash:{},inverse:self.noop,fn:self.program(4, program4, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    </li>\\n\";\n  return buffer;\n  }\nfunction program2(depth0,data) {\n  \n  var buffer = \"\", stack1, helper;\n  buffer += \"<span class=\\\"reason\\\">[\";\n  if (helper = helpers.reason) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.reason); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"</span>]\";\n  return buffer;\n  }\n\nfunction program4(depth0,data) {\n  \n  var buffer = \"\", stack1, helper;\n  buffer += \"- <span class=\\\"comment\\\">\";\n  if (helper = helpers.comment) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.comment); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"</span>\";\n  return buffer;\n  }\n\n  buffer += \"<ul class=\\\"irregularities plain\\\">\\n\";\n  stack1 = helpers.each.call(depth0, depth0, {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n</ul>\";\n  return buffer;\n  });\n});\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2015 (original work) Open Assessment Technologies SA ;\n */\n/**\n * @author Jean-Sébastien Conan <jean-sebastien.conan@vesperiagroup.com>\n */\ndefine('taoProctoring/controller/Reporting/index',[\n    'jquery',\n    'lodash',\n    'i18n',\n    'helpers',\n    'layout/loading-bar',\n    'util/encode',\n    'moment',\n    'tpl!taoProctoring/templates/reporting/datepicker',\n    'tpl!taoProctoring/templates/reporting/irregularities',\n    'ui/feedback',\n    'ui/dialog',\n    'taoProctoring/component/breadcrumbs',\n    'taoProctoring/helper/status',\n    'ui/datatable',\n    'jqueryui',\n    'jquery.timePicker'\n], function ($, _, __, helpers, loadingBar, encode, moment, datepickerTpl, irregularitiesTpl, feedback, dialog, breadcrumbsFactory, _status) {\n    'use strict';\n\n    /**\n     * The CSS scope\n     * @type {String}\n     */\n    var cssScope = '.reporting-index';\n\n    // the page is always loading data when starting\n    loadingBar.start();\n\n    /**\n     * Controls the taoProctoring reporting-index page\n     *\n     * @type {Object}\n     */\n    var taoProctoringReportCtlr = {\n        /**\n         * Entry point of the page\n         */\n        start : function start() {\n            var $container = $(cssScope);\n            var $list = $container.find('.list');\n            var crumbs = $container.data('breadcrumbs');\n            var dataset = $container.data('set');\n            var printReportButton = $container.data('printreportbutton');\n            var categories = $container.data('categories');\n            var testCenterId = $container.data('testcenter');\n\t\t\tvar downloadUrl = helpers._url('download', 'Reporting', 'taoProctoring', {testCenter : testCenterId});\n            var serviceUrl = helpers._url('reports', 'Reporting', 'taoProctoring', {testCenter : testCenterId});\n            var bc = breadcrumbsFactory($container, crumbs);\n\n            // request the server with a selection of reports\n            var request = function(url, selection, message) {\n                if (selection && selection.length) {\n                    loadingBar.start();\n\n                    $.ajax({\n                        url: url,\n                        data: {\n                            report: selection\n                        },\n                        dataType : 'json',\n                        type: 'POST',\n                        error: function() {\n                            loadingBar.stop();\n                        }\n                    }).done(function(response) {\n                        loadingBar.stop();\n\n                        if (response && response.success) {\n                            if (message) {\n                                feedback().success(message);\n                            }\n                            $list.datatable('refresh');\n                        } else {\n                            feedback().error(__('Something went wrong ...') + '<br>' + encode.html(response.error), {encodeHtml: false});\n                        }\n                    });\n                }\n            };\n\n            var notYet = function() {\n                dialog({\n                    message: __('Not yet implemented!'),\n                    autoRender: true,\n                    autoDestroy: true,\n                    buttons: 'ok'\n                });\n            };\n\n            /**\n             * Open new tab with page to be printed\n             * @param string|array rowId\n             */\n            var printResults = function printReport(rowId) {\n                window.open(helpers._url('printReport',  'Reporting', 'taoProctoring', {'id' : rowId}), 'printReport' + JSON.stringify(rowId));\n            };\n\n            /**\n             * Print rubric blocks with item tagged with tao-print tag\n             * @param string|array rowId\n             */\n            var printRubric = function printRubric(rowId) {\n                window.open(helpers._url('printRubric',  'Reporting', 'taoProctoring', {'id' : rowId}), 'printRubric' + JSON.stringify(rowId));\n            };\n\n            var today = moment().format('YYYY-MM-DD');\n\n            // renderer for date strings\n            function transformDate(date) {\n                if (date) {\n                    return moment(date).toString();\n                }\n                return '';\n            }\n\n            var datatableTools = [\n                {\n                    id: 'download',\n                    icon: 'download',\n                    title: __('Download the selected reports to a CSV file'),\n                    label: __('Download CSV'),\n                    action: function() {\n                        notYet();\n                    }\n                }, {\n                    id : 'printRubric',\n                    title : __('Print rubric block with item tagged with tao-print tag'),\n                    icon : 'print',\n                    label : __('Print Score Report'),\n                    massAction: true,\n                    action : printRubric\n                }\n            ];\n            if (printReportButton) {\n                datatableTools.push({\n                    id : 'printReport',\n                    title : __('Print the assessment results'),\n                    icon : 'print',\n                    label : __('Print results'),\n                    massAction: true,\n                    action : printResults\n                });\n            }\n\n            var datatableActions =  {\n                printRubrick : {\n                    id : 'printRubric',\n                    title : __('Print rubric block with item tagged with tao-print tag'),\n                    icon : 'print',\n                    label : __('Print Score Report'),\n                    action : printRubric\n                }\n            };\n            if (printReportButton) {\n                datatableActions.printReport = {\n                    id : 'printReport',\n                    title : __('Print the assessment results'),\n                    icon : 'print',\n                    label : __('Print results'),\n                    action : printResults\n                };\n            }\n\n\n            $list\n                .on('query.datatable', function() {\n                    loadingBar.start();\n                })\n                .on('load.datatable', function() {\n                    loadingBar.stop();\n                })\n                .datatable({\n                    url: serviceUrl,\n                    status: {\n                        empty: __('No reports to display!'),\n                        available: __('Available reports'),\n                        loading: __('Loading')\n                    },\n                    tools: datatableTools,\n                    selectable: true,\n                    actions : datatableActions,\n                    model: [{\n                        id: 'delivery',\n                        label: __('Test')\n                    }, {\n                        id: 'testtaker',\n                        label: __('Test Taker')\n                    }, {\n                        id: 'proctor',\n                        label: __('Proctor')\n                    }, {\n                        id: 'status',\n                        label: __('Status'),\n                        transform: function(value) {\n                            var status = _status.getStatusByCode(value);\n                            if(status){\n                                return status.label;\n                            }\n                            return '';\n                        }\n                    }, {\n                        id: 'start',\n                        label: __('Start')\n                    }, {\n                        id: 'end',\n                        label: __('End')\n                    }, {\n                        id: 'pause',\n                        label: __('Pause #')\n                    }, {\n                        id: 'resume',\n                        label: __('Resume #')\n                    }, {\n                        id: 'irregularities',\n                        label: __('Irregularities'),\n                        transform: function(value) {\n                            _.forEach(value, function(log) {\n                                var cat = categories[log.type];\n\n                                log[log.type] = true;\n\n                                switch (log.type) {\n                                    case 'pause':\n                                        log.type = __('Pause');\n                                        break;\n\n                                    case 'resume':\n                                        log.type = __('Resume');\n                                        break;\n\n                                    case 'terminate':\n                                        log.type = __('Terminate');\n                                        break;\n\n                                    default:\n                                        log.type = __('Irregularity');\n                                        break;\n                                }\n\n                                if (cat) {\n                                    log.reason = '';\n                                    if (log.category) {\n                                        log.reason += log.category;\n                                    }\n                                    if (log.subCategory) {\n                                        log.reason += '/' + log.subCategory;\n                                    }\n                                }\n                            });\n                            return irregularitiesTpl(value);\n                        }\n                    }],\n                    params:{\n                        periodStart : today,\n                        periodEnd : today\n                    }\n                }, dataset);\n            \n            //init date range picker\n            dateRangePicker(today, $container, $list);\n        }\n    };\n    \n    /**\n     * Create a data range picker for reporting index\n     * \n     * @param {JQuery} $container\n     * @param {JQuery} $list\n     */\n    function dateRangePicker(date, $container, $list){\n        \n        var $panel = $container.find('.panel');\n        var periodStart = date;\n        var periodEnd = date;\n        $panel.append(datepickerTpl({\n            start : periodStart,\n            end : periodEnd\n        }));\n        \n        var $periodStart = $panel.find('input[name=periodStart]');\n        var $periodEnd = $panel.find('input[name=periodEnd]');\n        var $filterBtn = $panel.find('[data-control=\"filter\"]');\n        $periodStart.datepicker({\n            dateFormat: 'yy-mm-dd',\n            autoSize: true\n        }).change(function(){\n            periodStart = $periodStart.val();\n            $periodEnd.datepicker('option', 'minDate', periodStart);\n            refresh();\n        });\n        $periodEnd.datepicker({\n            dateFormat: 'yy-mm-dd',\n            autoSize: true\n        }).change(function(){\n            periodEnd = $periodEnd.val();\n            $periodStart.datepicker('option', 'maxDate', periodEnd);\n            refresh();\n        });\n        $filterBtn.on('click', function(event) {\n            event.preventDefault();\n            periodStart = $periodStart.val();\n            periodEnd = $periodEnd.val();\n            refresh();\n        });\n        \n        /**\n         * Refresh the data table with new date range \n         * @returns {undefined}\n         */\n        function refresh(){\n            $list.datatable('options', {\n                params:\n                    {\n                        periodStart : periodStart,\n                        periodEnd : periodEnd\n                    }\n            }).datatable('refresh');\n        }\n    }\n    \n    return taoProctoringReportCtlr;\n});\n\n","\ndefine('tpl!taoProctoring/templates/testSiteAdmin/adminLink', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, functionType=\"function\", escapeExpression=this.escapeExpression, helperMissing=helpers.helperMissing;\n\n\n  buffer += \"<a href=\\\"\";\n  if (helper = helpers.href) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.href); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" class=\\\"admin-link\\\">\\n    <span class=\\\"icon-users\\\"></span>\\n    \"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Manage Proctors\", options) : helperMissing.call(depth0, \"__\", \"Manage Proctors\", options)))\n    + \"\\n</a>\";\n  return buffer;\n  });\n});\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2015 (original work) Open Assessment Technologies SA ;\n */\n/**\n * @author Jean-Sébastien Conan <jean-sebastien.conan@vesperiagroup.com>\n */\ndefine('taoProctoring/controller/TestCenter/index',[\n    'jquery',\n    'i18n',\n    'helpers',\n    'layout/loading-bar',\n    'ui/listbox',\n    'taoProctoring/component/breadcrumbs',\n    'tpl!taoProctoring/templates/testSiteAdmin/adminLink'\n], function ($, __, helpers, loadingBar, listBox, breadcrumbsFactory, adminLinkTpl) {\n    'use strict';\n\n    /**\n     * The polling delay used to refresh the list\n     * @type {Number}\n     */\n    var refreshPolling = 60 * 1000; // once per minute\n\n    /**\n     * The CSS scope\n     * @type {String}\n     */\n    var cssScope = '.testcenters-index';\n\n    // the page is always loading data when starting\n    loadingBar.start();\n\n    /**\n     * Controls the taoProctoring index page\n     *\n     * @type {Object}\n     */\n    var taoProctoringIndexCtlr = {\n        /**\n         * Entry point of the page\n         */\n        start : function start() {\n            var $container = $(cssScope);\n            var admin = $container.data('administrator');\n            var boxes = $container.data('list');\n            var crumbs = $container.data('breadcrumbs');\n            var list = listBox({\n                title: __(\"My Test sites\"),\n                textEmpty: __(\"No test site available\"),\n                textNumber: __(\"Available\"),\n                textLoading: __(\"Loading\"),\n                renderTo: $container.find('.content'),\n                replace: true\n            });\n            var bc = breadcrumbsFactory($container, crumbs);\n            var serviceUrl = helpers._url('index', 'TestCenter', 'taoProctoring');\n            var adminUrl = helpers._url('index', 'ProctorManager', 'taoProctoring');\n            var pollTo = null;\n            \n            // update the index from a JSON array\n            var update = function(boxes) {\n                if (pollTo) {\n                    clearTimeout(pollTo);\n                    pollTo = null;\n                }\n\n                list.update(boxes);\n                loadingBar.stop();\n\n                // poll the server at regular interval to refresh the index\n                if (refreshPolling) {\n                    pollTo = setTimeout(refresh, refreshPolling);\n                }\n            };\n\n            // refresh the index\n            var refresh = function() {\n                loadingBar.start();\n                list.setLoading(true);\n\n                $.ajax({\n                    url: serviceUrl,\n                    cache: false,\n                    dataType : 'json',\n                    type: 'GET'\n                }).done(function(response) {\n                    boxes = response && response.list;\n                    update(boxes);\n                });\n            };\n\n            if (!boxes) {\n                refresh();\n            } else {\n                update(boxes);\n            }\n            \n            if(admin){\n                //add test center admin link\n                $container.find('.header').append(adminLinkTpl({\n                    href : adminUrl\n                }));\n            }\n        }\n    };\n\n    return taoProctoringIndexCtlr;\n});\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2015 (original work) Open Assessment Technologies SA ;\n */\n/**\n * @author Jean-Sébastien Conan <jean-sebastien.conan@vesperiagroup.com>\n */\ndefine('taoProctoring/controller/TestCenter/testCenter',[\n    'jquery',\n    'i18n',\n    'helpers',\n    'layout/loading-bar',\n    'ui/listbox',\n    'taoProctoring/component/breadcrumbs'\n], function ($, __, helpers, loadingBar, listBox, breadcrumbsFactory) {\n    'use strict';\n\n    /**\n     * The CSS scope\n     * @type {String}\n     */\n    var cssScope = '.testcenters-testcenter';\n\n    // the page is always loading data when starting\n    loadingBar.start();\n\n    /**\n     * Controls the taoProctoring test site page\n     *\n     * @type {Object}\n     */\n    var taoProctoringTestSiteCtlr = {\n        /**\n         * Entry point of the page\n         */\n        start : function start() {\n            var $container = $(cssScope);\n            var boxes = $container.data('list');\n            var crumbs = $container.data('breadcrumbs');\n            var id = $container.data('id');\n            var title = $container.data('title');\n            var list = listBox({\n                title: title,\n                textEmpty: false,\n                textNumber: false,\n                textLoading: __(\"Loading\"),\n                renderTo: $container.find('.content'),\n                replace: true,\n                width: 4\n            });\n            var bc = breadcrumbsFactory($container, crumbs);\n            var serviceUrl = helpers._url('testCenter', 'TestCenter', 'taoProctoring');\n\n            // update the index from a JSON array\n            var update = function(boxes) {\n                list.update(boxes);\n                loadingBar.stop();\n            };\n\n            // refresh the index\n            var refresh = function() {\n                loadingBar.start();\n                list.setLoading(true);\n\n                $.ajax({\n                    url: serviceUrl,\n                    cache: false,\n                    dataType : 'json',\n                    type: 'GET'\n                }).done(function(response) {\n                    boxes = response && response.list;\n                    update(boxes);\n                });\n            };\n\n            if (!boxes) {\n                refresh();\n            } else {\n                update(boxes);\n            }\n        }\n    };\n\n    return taoProctoringTestSiteCtlr;\n});\n\n","\ndefine('tpl!taoProctoring/component/eligibilityEditor/layout', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, helperMissing=helpers.helperMissing, escapeExpression=this.escapeExpression, functionType=\"function\", self=this;\n\nfunction program1(depth0,data) {\n  \n  \n  return \" editing\";\n  }\n\nfunction program3(depth0,data) {\n  \n  \n  return \"flex-col-12\";\n  }\n\nfunction program5(depth0,data) {\n  \n  \n  return \"flex-col-6\";\n  }\n\nfunction program7(depth0,data) {\n  \n  var buffer = \"\", stack1, helper, options;\n  buffer += escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"for\", options) : helperMissing.call(depth0, \"__\", \"for\", options)))\n    + \" <span class=\\\"delivery-name\\\">\";\n  if (helper = helpers.deliveryName) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.deliveryName); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"</span> :\";\n  return buffer;\n  }\n\n  buffer += \"<div class=\\\"eligibility-editor\";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.editingMode), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\\">\\n    <h2 class=\\\"title\\\">\";\n  if (helper = helpers.title) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.title); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"</h2>\\n    <div class=\\\"flex-grid \\\">\\n        <div class=\\\"\";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.editingMode), {hash:{},inverse:self.program(5, program5, data),fn:self.program(3, program3, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" tree-container eligible-delivery\\\">\\n            <label>\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Eligible Deliveries\", options) : helperMissing.call(depth0, \"__\", \"Eligible Deliveries\", options)))\n    + \"</label>\\n                <div id=\\\"\";\n  if (helper = helpers.deliveryTreeId) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.deliveryTreeId); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\"></div>\\n        </div>\\n        <div class=\\\"\";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.editingMode), {hash:{},inverse:self.program(5, program5, data),fn:self.program(3, program3, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" tree-container eligible-testTaker\\\">\\n            <label>\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Eligible Test Takers\", options) : helperMissing.call(depth0, \"__\", \"Eligible Test Takers\", options)))\n    + \" \";\n  stack1 = helpers['if'].call(depth0, (depth0 && depth0.editingMode), {hash:{},inverse:self.noop,fn:self.program(7, program7, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"</label>\\n                <div id=\\\"\";\n  if (helper = helpers.subjectTreeId) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.subjectTreeId); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\"></div>\\n        </div>\\n    </div>\\n    <div class=\\\"actions\\\">\\n        <button class=\\\"btn btn-info small done\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"OK\", options) : helperMissing.call(depth0, \"__\", \"OK\", options)))\n    + \"</button>\\n        <a href=\\\"#\\\" class=\\\"btn cancel\\\" title=\\\"\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"cancel the action\", options) : helperMissing.call(depth0, \"__\", \"cancel the action\", options)))\n    + \"\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"cancel\", options) : helperMissing.call(depth0, \"__\", \"cancel\", options)))\n    + \"</a>\\n    </div>\\n</div>\";\n  return buffer;\n  });\n});\n\n","\ndefine('css!taoProctoringCss/eligibilityEditor',[],function(){});\n","/*\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2015 (original work) Open Assessment Technologies SA ;\n *\n */\ndefine('taoProctoring/component/eligibilityEditor',[\n    'lodash',\n    'jquery',\n    'i18n',\n    'helpers',\n    'core/eventifier',\n    'generis.tree.select',\n    'tpl!taoProctoring/component/eligibilityEditor/layout',\n    'ui/feedback',\n    'ui/modal',\n    'css!taoProctoringCss/eligibilityEditor'\n], function(_, $, __, helpers, eventifier, GenerisTreeSelectClass, layoutTpl, feedback){\n    'use strict';\n    \n    var _ns = '.eligibility-editor';\n\n    var _modalDefaults = {\n        width : 600\n    };\n\n    /**\n     * Builds group tree inside target container\n     * \n     * @param {Object} the eligibility editor instance\n     * @param {String} selector - the selector for the tree (generis tree works with selector only)\n     * @param {Array} [testTakers] - array of selected test takers\n     */\n    function buildTestTakerTree(instance, selector, testTakers){\n\n        var tree = new GenerisTreeSelectClass(selector, helpers._url('getData', 'GenerisTree', 'tao'), {\n            actionId : 'treeOptions.actionId',\n            saveUrl : 'treeOptions.saveUrl',\n            saveData : {},\n            checkedNodes : _.pluck(testTakers, 'encodedUri'), //generis tree uses \"encoded uri\" to check nodes\n            serverParameters : {\n                openParentNodes : _.pluck(testTakers, 'uri'), //generis tree uses normal if to open nodes...\n                rootNode : 'http://www.tao.lu/Ontologies/TAOSubject.rdf#Subject'\n            },\n            paginate : 10,\n            onChangeCallback : function(){\n                _.delay(function(){\n                    //requires a delay to let the node status to be updated\n                    instance.eligibility.testTakers = _.uniq(tree.getChecked());\n                    instance.trigger('change', instance.eligibility);\n                }, 100);\n            }\n        });\n\n        return tree;\n    }\n\n    /**\n     * Builds delivery tree inside target container\n     * \n     * @param {Object} the eligibility editor instance\n     * @param {String} selector - the selector for the tree (generis tree works with selector only)\n     * @param {Array} [deliveries] - array of selected deliveries\n     */\n    function buildDeliveryTree(instance, selector, deliveries){\n\n        var tree = new GenerisTreeSelectClass(selector, helpers._url('getData', 'GenerisTree', 'tao'), {\n            actionId : 'treeOptions.actionId',\n            saveUrl : 'treeOptions.saveUrl',\n            saveData : {},\n            checkedNodes : _.pluck(deliveries, 'encodedUri'), //generis tree uses \"encoded uri\" to check nodes\n            serverParameters : {\n                openParentNodes : _.pluck(deliveries, 'uri'), //generis tree uses normal if to open nodes...\n                rootNode : 'http://www.tao.lu/Ontologies/TAODelivery.rdf#AssembledDelivery'\n            },\n            paginate : 10,\n            onChangeCallback : function(){\n                _.delay(function(){\n                    //requires a delay to let the node status to be updated\n                    instance.eligibility.deliveries = _.uniq(tree.getChecked());\n                    instance.trigger('change', instance.eligibility);\n                }, 100);\n            }\n        });\n\n        return tree;\n    }\n\n    /**\n     * Add the editor into a popup and display it\n     * \n     * @param {Object} instance - the eligibility editor instance\n     * @param {Object} [modalConfig] - any config option available in ui/modal\n     */\n    function initModal(instance, modalConfig){\n\n        modalConfig = _.defaults(modalConfig || {}, _modalDefaults);\n\n        instance.$container.children('.eligibility-editor')\n            .addClass('modal')\n            .on('closed.modal', function(){\n                //one shot only, on close, destroy the widget\n                destroy(instance);\n            })\n            .modal(modalConfig)\n            .on('click' + _ns, '.actions .done', function(e){\n                \n                if(instance.eligibility && instance.eligibility.deliveries && instance.eligibility.deliveries.length){\n                    instance.trigger('ok', instance.eligibility);\n                    destroy(instance);\n                }else{\n                    feedback(instance.$container).warning(__('At least one delivery need to be selected to create'));\n                }\n\n            }).on('click' + _ns, '.actions .cancel', function(e){\n\n                e.preventDefault();\n                instance.trigger('cancel');\n                destroy(instance);\n            });\n    }\n\n    /**\n     * Destroy the eligibility editor\n     * \n     * @param {object} instance\n     * @returns {undefined}\n     */\n    function destroy(instance){\n        instance.$container.children('.eligibility-editor')\n            .modal('destroy')\n            .remove();\n    }\n\n    /**\n     * Create an eligibility editor into a $container\n     * \n     * @param {JQuery} $container\n     * @param {Array} eligibilities\n     * @param {Object} [delivery]\n     * @param {String} [delivery.label]\n     * @param {String} [delivery.uri]\n     * @returns {Object} the eligibility editor instance\n     */\n    function init($container, eligibilities, delivery){\n\n        var instance = eventifier({\n            eligibility : {}\n        });\n        var subjectTreeId = _.uniqueId('eligible-testTaker-tree-');//generating the generis tree id, because it requires one to work\n        var deliveryTreeId = _.uniqueId('eligible-delivery-tree-');//generating the generis tree id, because it requires one to work\n        var $deliverySelector;\n        var creationMode = true;\n        var deliveryName = '';\n        \n        if(!_.isArray(eligibilities)){\n            throw 'the egibility editor requires an array of eligibilities';\n        }\n\n        if(delivery && delivery.uri && delivery.label){\n            var eligibility = _.find(eligibilities, {delivery : delivery.uri});\n            if(eligibility){\n                creationMode = false;\n                deliveryName = delivery.label;\n                \n                //the format expected for the returned value\n                instance.eligibility = _.defaults(eligibility , {\n                    deliveries : [delivery.uri],\n                    testTakers : []\n                });\n            }else{\n                throw ('given delivery does not exist in the list of eligibilities');\n            }\n        }\n        instance.$container = $container;\n        $container.append(layoutTpl({\n            title : creationMode ? __('Add Eligibility') : __('Edit Eligibility'),\n            editingMode : !creationMode,\n            subjectTreeId : subjectTreeId,\n            deliveryTreeId : deliveryTreeId,\n            deliveryName : deliveryName\n        }));\n\n        if(creationMode){\n            //init delivery selector only when no delivery is selected\n            $deliverySelector = $container.find('.eligible-delivery');\n            buildDeliveryTree(instance, '#' + deliveryTreeId, []);\n        }\n\n        //init test taker selector\n        buildTestTakerTree(instance, '#' + subjectTreeId, instance.eligibility.testTakers || []);\n\n        //init modal\n        initModal(instance, {\n            width : creationMode ? 650 : 400\n        });\n\n        return instance;\n    }\n\n    return {\n        init : init\n    };\n});\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2015 (original work) Open Assessment Technologies SA ;\n */\ndefine('taoProctoring/controller/TestCenterManager/editCenter',[\n    'jquery',\n    'lodash',\n    'i18n',\n    'helpers',\n    'layout/loading-bar',\n    'util/encode',\n    'ui/feedback',\n    'taoProctoring/component/eligibilityEditor',\n    'ui/datatable'\n], function(\n    $,\n    _,\n    __,\n    helpers,\n    loadingBar,\n    encode,\n    feedback,\n    eligibilityEditor\n    ){\n    'use strict';\n\n    /**\n     * The CSS scope\n     * @type {String}\n     */\n    var cssScope = '.eligible-deliveries';\n    \n    /**\n     * Format the raw eligibility from the dataset to the expected format for the eligibility editor\n     * \n     * @param {Object} dataset\n     * @returns {Array}\n     */\n    function formatEligibilities(dataset){\n        if(dataset.data && _.isArray(dataset.data)){\n            return _.map(dataset.data, function(eligibility){\n                return {\n                    delivery : eligibility.id,\n                    testTakers : eligibility.testTakers\n                };\n            });\n        }\n        return [];\n    }\n\n    /**\n     * Controls the test center manager screen\n     *\n     * @type {Object}\n     */\n    var editCenterCtlr = {\n        /**\n         * Entry point of the page\n         */\n        start : function start(){\n\n            var $container = $(cssScope);\n            var $list = $container.find('.list');\n            var eligEditor;\n            var $eligibilityEditor = $container.find('.eligibility-editor-container');\n            var deliveries = $container.data('deliveries');\n            var eligibilities = $container.data('eligibilities');\n            var testCenterId = $container.data('testcenter');\n            var serviceUrl = helpers._url('getEligibilities', 'TestCenterManager', 'taoProctoring', {uri : testCenterId});\n            var addUrl = helpers._url('addEligibilities', 'TestCenterManager', 'taoProctoring', {uri : testCenterId});\n            var editUrl = helpers._url('editEligibilities', 'TestCenterManager', 'taoProctoring', {uri : testCenterId});\n            var removeUrl = helpers._url('removeEligibilities', 'TestCenterManager', 'taoProctoring', {uri : testCenterId});\n            var tools = [];\n            var actions = [];\n            var model = [];\n            \n            /**\n             * Get the delivery object from its uri\n             * \n             * @param {String} uri\n             * @returns {Object}\n             */\n            function _getDelivery(uri){\n                return _.find(deliveries, {uri : uri});\n            }\n\n            /**\n             * request the server with a selection of test takers\n             * \n             * @param {String} url\n             * @param {Object} eligibility\n             * @param {String} message\n             * @param {Function} errorCallback\n             */\n            function _request(url, eligibility, message, errorCallback){\n                if(eligibility){\n                    \n                    loadingBar.start();\n                    \n                    $.ajax({\n                        url : url,\n                        data : {\n                            eligibility : eligibility\n                        },\n                        dataType : 'json',\n                        type : 'POST',\n                        error : function(){\n                            loadingBar.stop();\n                        }\n                    }).done(function(response){\n                        \n                        loadingBar.stop();\n\n                        if(response && response.success){\n                            if(message){\n                                feedback().success(message);\n                            }\n                            $list.datatable('refresh');\n                        }else if(_.isFunction(errorCallback)){\n                            //execute a final callback if needed\n                            errorCallback(response);\n                        }else{\n                            feedback().error(__('Something went wrong ...') + '<br>' + encode.html(response.error), {encodeHtml : false});\n                        }\n                    });\n                }\n            }\n            \n            //tool : add new eligibility\n            tools.push({\n                id : 'add',\n                icon : 'add',\n                title : __('Add'),\n                label : __('Add'),\n                action : function(){\n                    //open modal to select delivery + test takers\n                    eligEditor = eligibilityEditor.init($eligibilityEditor, formatEligibilities(eligibilities));\n                    eligEditor.on('ok', function(eligibility){\n                        _request(addUrl, eligibility, __('New eligible delivery added'), function(res){\n                            feedback().warning(__('The following delivery(ies) are already eligible : ')+res.failed.join(', '));\n                            $list.datatable('refresh');\n                        });\n                    });\n                }\n            });\n            \n            //action : edit existing eligibility\n            actions.push({\n                id : 'edit',\n                icon : 'edit',\n                label : __('Edit'),\n                title : __('Edit eligibile test takers'),\n                action : function(uri){\n                    //open modal to select test takers\n                    eligEditor = eligibilityEditor.init($eligibilityEditor, formatEligibilities(eligibilities), _getDelivery(uri));\n                    eligEditor.on('ok', function(eligibility){\n                        _request(editUrl, eligibility, __('Eligible test takers updated'));\n                    });\n                }\n            });\n            \n            //action : remove existing eligibility\n            actions.push({\n                id : 'remove',\n                icon : 'bin',\n                label : __('Remove'),\n                title : __('Remove eligibility'),\n                action : function(uri){\n                    //open modal to select test takers\n                    _request(removeUrl, {deliveries : [uri]}, __('Eligible delivery removed'));\n                }\n            });\n\n\n            // column: delivery\n            model.push({\n                id : 'del',\n                label : __('Delivery'),\n                transform : function(value, row){\n                    return _getDelivery(row.id).label;\n\n                }\n            });\n\n            // column: test taker\n            model.push({\n                id : 'ttakers',\n                label : __('Eligible Test Takers'),\n                transform : function(value, row){\n                    return row.testTakers.length;\n                }\n            });\n\n            // renders the datatable\n            $list\n                .on('query.datatable', function(){\n                    loadingBar.start();\n                })\n                .on('load.datatable', function(e, newDataset){\n                    //update dateset in memory\n                    eligibilities = newDataset;\n                    loadingBar.stop();\n                })\n                .datatable({\n                    url : serviceUrl,\n                    status : {\n                        empty : __('No Eligible Delivery yet'),\n                        available : __('Eligible Deliveries'),\n                        loading : __('Loading')\n                    },\n                    tools : tools,\n                    actions : actions,\n                    model : model,\n                    selectable : false\n                }, eligibilities);\n\n        }\n    };\n\n    return editCenterCtlr;\n});\n\n"]}